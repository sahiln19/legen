"use strict";var lp=Object.create;var Mo=Object.defineProperty;var cp=Object.getOwnPropertyDescriptor;var dp=Object.getOwnPropertyNames;var fp=Object.getPrototypeOf,mp=Object.prototype.hasOwnProperty;var i=(t,e)=>Mo(t,"name",{value:e,configurable:!0});var $=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var pp=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of dp(e))!mp.call(t,o)&&o!==n&&Mo(t,o,{get:()=>e[o],enumerable:!(r=cp(e,o))||r.enumerable});return t};var Lt=(t,e,n)=>(n=t!=null?lp(fp(t)):{},pp(e||!t||!t.__esModule?Mo(n,"default",{value:t,enumerable:!0}):n,t));var Hu=$(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.bytePairEncode=Et.BinaryMap=Et.binaryMapKey=void 0;var Mp=i((t,e,n)=>{let r=n-e,o=16777215>>>Math.max(0,(3-r)*8),s=(t[e+0]|t[e+1]<<8|t[e+2]<<16)&o,a=16777215>>>Math.min(31,Math.max(0,(6-r)*8)),u=(t[e+3]|t[e+4]<<8|t[e+5]<<16)&a;return s+16777216*u},"binaryMapKey");Et.binaryMapKey=Mp;var Ho=class t{static{i(this,"BinaryMap")}constructor(){this.nested=new Map,this.final=new Map}get(e,n=0,r=e.length){let o=r<6+n,s=(0,Et.binaryMapKey)(e,n,r);return o?this.final.get(s):this.nested.get(s)?.get(e,6+n,r)}set(e,n){let r=(0,Et.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(r,n);return}let s=this.nested.get(r);if(s instanceof t)s.set(e.subarray(6),n);else{let a=new t;a.set(e.subarray(6),n),this.nested.set(r,a)}}};Et.BinaryMap=Ho;var St=new Int32Array(128),Ve=new Int32Array(128);function Cp(t,e,n){if(n===1)return[e.get(t)];let r=2147483647,o=-1;for(;St.length<n*2;)Ve=new Int32Array(Ve.length*2),St=new Int32Array(St.length*2);for(let d=0;d<n-1;d++){let f=e.get(t,d,d+2)??2147483647;f<r&&(r=f,o=d),Ve[d]=d,St[d]=f}Ve[n-1]=n-1,St[n-1]=2147483647,Ve[n]=n,St[n]=2147483647;let s=n+1;function a(d,f=0){if(d+f+2<s){let p=e.get(t,Ve[d],Ve[d+f+2]);if(p!==void 0)return p}return 2147483647}for(i(a,"getRank");r!==2147483647;){St[Ve[o]]=a(o,1),o>0&&(St[Ve[o-1]]=a(o-1,1));for(let d=o+1;d<s-1;d++)Ve[d]=Ve[d+1];s--,o=-1,r=2147483647;for(let d=0;d<s-1;d++){let f=St[Ve[d]];St[Ve[d]]<r&&(r=f,o=d)}}let u=[];for(let d=0;d<s-1;d++)u.push(e.get(t,Ve[d],Ve[d+1]));return u}i(Cp,"bytePairEncode");Et.bytePairEncode=Cp});var Gu=$(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});ri.makeTextEncoder=void 0;var Go=class{static{i(this,"UniversalTextEncoder")}constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let n=this.encoder.encode(e);return this.length=n.length,n}},Zo=class{static{i(this,"NodeTextEncoder")}constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}},Lp=i(()=>typeof Buffer<"u"?new Zo:new Go,"makeTextEncoder");ri.makeTextEncoder=Lp});var Zu=$(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.LRUCache=void 0;var Qo=class{static{i(this,"LRUCache")}constructor(e){this.size=e,this.nodes=new Map}get(e){let n=this.nodes.get(e);if(n)return this.moveToHead(n),n.value}set(e,n){let r=this.nodes.get(e);if(r)r.value=n,this.moveToHead(r);else{let o=new Jo(e,n);this.nodes.set(e,o),this.addNode(o),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),e.next=void 0,e.prev=void 0,this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};ii.LRUCache=Qo;var Jo=class{static{i(this,"Node")}constructor(e,n){this.key=e,this.value=n}}});var Xo=$(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});si.TikTokenizer=void 0;var Np=require("fs"),Ap=require("util"),oi=Hu(),Dp=Gu(),Op=Zu();function Fp(t){let e=new Map;try{let r=Np.readFileSync(t,"utf-8");return n(r),e}catch(r){throw new Error(`Failed to load from BPE encoder file stream: ${r}`)}function n(r){for(let o of r.split(/[\r\n]+/)){if(o.trim()==="")continue;let s=o.split(" ");if(s.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let a=new Uint8Array(Buffer.from(s[0],"base64")),u=parseInt(s[1]);if(!isNaN(u))e.set(a,u);else throw new Error(`Can't parse ${s[1]} to integer`)}}i(n,"processBpeRanks")}i(Fp,"loadTikTokenBpe");function jp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}i(jp,"escapeRegExp");var Ko=class{static{i(this,"TikTokenizer")}constructor(e,n,r,o=8192){this.textEncoder=(0,Dp.makeTextEncoder)(),this.textDecoder=new Ap.TextDecoder("utf-8"),this.cache=new Op.LRUCache(o);let s=typeof e=="string"?Fp(e):e;this.init(s,n,r)}init(e,n,r){this.encoder=new oi.BinaryMap;for(let[o,s]of e)this.encoder.set(o,s);this.regex=new RegExp(r,"gu"),this.specialTokensRegex=new RegExp(Array.from(n.keys()).map(o=>jp(o)).join("|")),this.specialTokensEncoder=n,this.decoder=new Map;for(let[o,s]of e)this.decoder.set(s,o);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[o,s]of n)this.specialTokensDecoder.set(s,o)}findNextSpecialToken(e,n,r){let o=n,s=null;if(r&&this.specialTokensRegex)for(;s=e.slice(o).match(this.specialTokensRegex),!(!s||r&&r.includes(s[0]));)o+=s.index+1;let a=s?o+s.index:e.length;return[s,a]}encode(e,n){let r=[],o=0;for(;;){let s,a;if([s,a]=this.findNextSpecialToken(e,o,n),a>o&&this.encodeByIndex(e,r,o,a),s){if(o=o+this.encodeSpecialToken(r,s),o>=e.length)break}else break}return r}encodeSpecialToken(e,n){let r=this.specialTokensEncoder?.get(n[0]);return e.push(r),n.index+n[0].length}encodeByIndex(e,n,r,o){let s,a=e.substring(r,o);for(this.regex.lastIndex=0;s=this.regex.exec(a);){let u=this.cache.get(s[0]);if(u)for(let d of u)n.push(d);else{let d=this.textEncoder.encode(s[0]),f=this.encoder.get(d,0,this.textEncoder.length);if(f!==void 0)n.push(f),this.cache.set(s[0],[f]);else{let p=(0,oi.bytePairEncode)(d,this.encoder,this.textEncoder.length);for(let b of p)n.push(b);this.cache.set(s[0],p)}}}}encodeTrimSuffixByIndex(e,n,r,o,s,a,u){let d,f=e.substring(r,o);for(this.regex.lastIndex=0;d=this.regex.exec(f);){let p=d[0],b=this.cache.get(p);if(b)if(a+b.length<=s)a+=b.length,u+=p.length,n.push(...b);else{let v=s-a;a+=v,u+=p.length,n.push(...b.slice(0,v));break}else{let v=this.textEncoder.encode(p),T=this.encoder.get(v,0,v.length);if(T!==void 0)if(this.cache.set(p,[T]),a+1<=s)a++,u+=p.length,n.push(T);else break;else{let A=(0,oi.bytePairEncode)(v,this.encoder,this.textEncoder.length);if(this.cache.set(p,A),a+A.length<=s){a+=A.length,u+=p.length;for(let P of A)n.push(P)}else{let P=s-a;a+=P,u+=p.length;for(let j=0;j<P;j++)n.push(A[j]);break}}}if(a>=s)break}return{tokenCount:a,encodeLength:u}}encodeTrimSuffix(e,n,r){let o=[],s=0,a=0,u=0;for(;;){let f,p;if([f,p]=this.findNextSpecialToken(e,s,r),p>s){let{tokenCount:b,encodeLength:v}=this.encodeTrimSuffixByIndex(e,o,s,p,n,a,u);if(a=b,u=v,a>=n)break}if(f!==null){if(a++,a<=n&&(s=s+this.encodeSpecialToken(o,f),u+=f[0].length,s>=e.length)||a>=n)break}else break}let d=u===e.length?e:e.slice(0,u);return{tokenIds:o,text:d}}encodeTrimPrefix(e,n,r){let o=[],s=0,a=0,u=0,d=new Map;for(d.set(a,u);;){let v,T;if([v,T]=this.findNextSpecialToken(e,s,r),T>s){let A,P=e.substring(s,T);for(this.regex.lastIndex=0;A=this.regex.exec(P);){let j=A[0],O=this.cache.get(j);if(O)a+=O.length,u+=j.length,o.push(...O),d.set(a,u);else{let I=this.textEncoder.encode(j),V=this.encoder.get(I);if(V!==void 0)this.cache.set(j,[V]),a++,u+=j.length,o.push(V),d.set(a,u);else{let X=(0,oi.bytePairEncode)(I,this.encoder,this.textEncoder.length);this.cache.set(j,X),a+=X.length,u+=j.length;for(let Y of X)o.push(Y);d.set(a,u)}}}}if(v!==null){if(s=s+this.encodeSpecialToken(o,v),a++,u+=v[0].length,d.set(a,u),s>=e.length)break}else break}if(a<=n)return{tokenIds:o,text:e};let f=a-n,p=0,b=0;for(let[v,T]of d)if(v>=f){p=v,b=T;break}if(p>n){let v=this.encode(e,r),T=v.slice(v.length-n);return{tokenIds:T,text:this.decode(T)}}return{tokenIds:o.slice(p),text:e.slice(b)}}decode(e){let n=[];for(let r of e){let o=[],s=this.decoder?.get(r);if(s!==void 0)o=Array.from(s);else{let a=this.specialTokensDecoder?.get(r);if(a!==void 0){let u=this.textEncoder.encode(a);o=Array.from(u.subarray(0,this.textEncoder.length))}}n.push(...o)}return this.textDecoder.decode(new Uint8Array(n))}};si.TikTokenizer=Ko});var il=$(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.createTokenizer=Re.createByEncoderName=Re.createByModelName=Re.getRegexByModel=Re.getRegexByEncoder=Re.getSpecialTokensByModel=Re.getSpecialTokensByEncoder=Re.MODEL_TO_ENCODING=void 0;var ui=require("fs"),Yo=require("path"),qp=Xo(),Wp=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);Re.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var ai="<|endoftext|>",Qu="<|fim_prefix|>",Ju="<|fim_middle|>",Ku="<|fim_suffix|>",Xu="<|endofprompt|>",hr="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",Yu="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",Up=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],el=Up.join("|");function es(t){let e="";if(Re.MODEL_TO_ENCODING.has(t))e=Re.MODEL_TO_ENCODING.get(t);else for(let[n,r]of Wp)if(t.startsWith(n)){e=r;break}return e}i(es,"getEncoderFromModelName");async function Bp(t,e){let n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${n.status}`);let r=await n.text();ui.writeFileSync(e,r)}i(Bp,"fetchAndSaveFile");function ts(t){let e=new Map([[ai,50256]]);switch(t){case"o200k_base":e=new Map([[ai,199999],[Xu,200018]]);break;case"cl100k_base":e=new Map([[ai,100257],[Qu,100258],[Ju,100259],[Ku,100260],[Xu,100276]]);break;case"p50k_edit":e=new Map([[ai,50256],[Qu,50281],[Ju,50282],[Ku,50283]]);break;default:break}return e}i(ts,"getSpecialTokensByEncoder");Re.getSpecialTokensByEncoder=ts;function zp(t){let e=es(t);return ts(e)}i(zp,"getSpecialTokensByModel");Re.getSpecialTokensByModel=zp;function tl(t){switch(t){case"o200k_base":return el;case"cl100k_base":return Yu;default:break}return hr}i(tl,"getRegexByEncoder");Re.getRegexByEncoder=tl;function $p(t){let e=es(t);return tl(e)}i($p,"getRegexByModel");Re.getRegexByModel=$p;async function Vp(t,e=null){return nl(es(t),e)}i(Vp,"createByModelName");Re.createByModelName=Vp;async function nl(t,e=null){let n,r,o=ts(t);switch(t){case"o200k_base":n=el,r="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":n=Yu,r="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":n=hr,r="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":n=hr,r="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":n=hr,r="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":n=hr,r="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(o=new Map([...o,...e]));let s=Yo.basename(r),a=Yo.resolve(__dirname,"..","model");ui.existsSync(a)||ui.mkdirSync(a,{recursive:!0});let u=Yo.resolve(a,s);return ui.existsSync(u)||(console.log(`Downloading file from ${r}`),await Bp(r,u),console.log(`Saved file to ${u}`)),rl(u,o,n)}i(nl,"createByEncoderName");Re.createByEncoderName=nl;function rl(t,e,n,r=8192){return new qp.TikTokenizer(t,e,n,r)}i(rl,"createTokenizer");Re.createTokenizer=rl});var ol=$(Ie=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});Ie.createTokenizer=Ie.createByEncoderName=Ie.createByModelName=Ie.getSpecialTokensByModel=Ie.getSpecialTokensByEncoder=Ie.getRegexByModel=Ie.getRegexByEncoder=Ie.MODEL_TO_ENCODING=Ie.TikTokenizer=void 0;var Hp=Xo();Object.defineProperty(Ie,"TikTokenizer",{enumerable:!0,get:i(function(){return Hp.TikTokenizer},"get")});var Bt=il();Object.defineProperty(Ie,"MODEL_TO_ENCODING",{enumerable:!0,get:i(function(){return Bt.MODEL_TO_ENCODING},"get")});Object.defineProperty(Ie,"getRegexByEncoder",{enumerable:!0,get:i(function(){return Bt.getRegexByEncoder},"get")});Object.defineProperty(Ie,"getRegexByModel",{enumerable:!0,get:i(function(){return Bt.getRegexByModel},"get")});Object.defineProperty(Ie,"getSpecialTokensByEncoder",{enumerable:!0,get:i(function(){return Bt.getSpecialTokensByEncoder},"get")});Object.defineProperty(Ie,"getSpecialTokensByModel",{enumerable:!0,get:i(function(){return Bt.getSpecialTokensByModel},"get")});Object.defineProperty(Ie,"createByModelName",{enumerable:!0,get:i(function(){return Bt.createByModelName},"get")});Object.defineProperty(Ie,"createByEncoderName",{enumerable:!0,get:i(function(){return Bt.createByEncoderName},"get")});Object.defineProperty(Ie,"createTokenizer",{enumerable:!0,get:i(function(){return Bt.createTokenizer},"get")})});var _l=$((exports,module)=>{var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{static{i(this,"Parser")}constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=i((t,e)=>{throw e},"quit_"),ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}i(locateFile,"locateFile");function logExceptionOnExit(t){t instanceof ExitStatus||err("exiting due to exception: "+t)}if(i(logExceptionOnExit,"logExceptionOnExit"),ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=i((t,e)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFileSync(t,e?void 0:"utf8")),"read_"),readBinary=i(t=>{var e=read_(t,!0);return e.buffer||(e=new Uint8Array(e)),e},"readBinary"),readAsync=i((t,e,n)=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFile(t,function(r,o){r?n(r):e(o.buffer)})},"readAsync"),process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=i((t,e)=>{if(keepRuntimeAlive())throw process.exitCode=t,e;logExceptionOnExit(e),process.exit(t)},"quit_"),Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=i(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},"read_"),ENVIRONMENT_IS_WORKER&&(readBinary=i(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)},"readBinary")),readAsync=i((t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{r.status==200||r.status==0&&r.response?e(r.response):n()},r.onerror=n,r.send(null)},"readAsync"),setWindowTitle=i(t=>document.title=t,"setWindowTitle"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(t,e,n){for(var r=e+n,o=e;t[o]&&!(o>=r);)++o;if(o-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,o));for(var s="";e<o;){var a=t[e++];if(128&a){var u=63&t[e++];if((224&a)!=192){var d=63&t[e++];if((a=(240&a)==224?(15&a)<<12|u<<6|d:(7&a)<<18|u<<12|d<<6|63&t[e++])<65536)s+=String.fromCharCode(a);else{var f=a-65536;s+=String.fromCharCode(55296|f>>10,56320|1023&f)}}else s+=String.fromCharCode((31&a)<<6|u)}else s+=String.fromCharCode(a)}return s}i(UTF8ArrayToString,"UTF8ArrayToString");function UTF8ToString(t,e){return t?UTF8ArrayToString(HEAPU8,t,e):""}i(UTF8ToString,"UTF8ToString");function stringToUTF8Array(t,e,n,r){if(!(r>0))return 0;for(var o=n,s=n+r-1,a=0;a<t.length;++a){var u=t.charCodeAt(a);if(u>=55296&&u<=57343&&(u=65536+((1023&u)<<10)|1023&t.charCodeAt(++a)),u<=127){if(n>=s)break;e[n++]=u}else if(u<=2047){if(n+1>=s)break;e[n++]=192|u>>6,e[n++]=128|63&u}else if(u<=65535){if(n+2>=s)break;e[n++]=224|u>>12,e[n++]=128|u>>6&63,e[n++]=128|63&u}else{if(n+3>=s)break;e[n++]=240|u>>18,e[n++]=128|u>>12&63,e[n++]=128|u>>6&63,e[n++]=128|63&u}}return e[n]=0,n-o}i(stringToUTF8Array,"stringToUTF8Array");function stringToUTF8(t,e,n){return stringToUTF8Array(t,HEAPU8,e,n)}i(stringToUTF8,"stringToUTF8");function lengthBytesUTF8(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);r<=127?e++:r<=2047?e+=2:r>=55296&&r<=57343?(e+=4,++n):e+=3}return e}i(lengthBytesUTF8,"lengthBytesUTF8");function updateGlobalBufferAndViews(t){buffer=t,Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}i(updateGlobalBufferAndViews,"updateGlobalBufferAndViews");var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}i(keepRuntimeAlive,"keepRuntimeAlive");function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}i(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}i(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}i(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}i(postRun,"postRun");function addOnPreRun(t){__ATPRERUN__.unshift(t)}i(addOnPreRun,"addOnPreRun");function addOnInit(t){__ATINIT__.unshift(t)}i(addOnInit,"addOnInit");function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}i(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(t){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}i(addRunDependency,"addRunDependency");function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}i(removeRunDependency,"removeRunDependency");function abort(t){throw Module.onAbort&&Module.onAbort(t),err(t="Aborted("+t+")"),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}i(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(t){return t.startsWith(dataURIPrefix)}i(isDataURI,"isDataURI");function isFileURI(t){return t.startsWith("file://")}i(isFileURI,"isFileURI");function getBinary(t){try{if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}i(getBinary,"getBinary");function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return t.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(t,e){readAsync(wasmBinaryFile,function(n){t(new Uint8Array(n))},e)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}i(getBinaryPromise,"getBinaryPromise");function createWasm(){var t={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function e(o,s){var a=o.exports;a=relocateExports(a,1024);var u=getDylinkMetadata(s);u.neededDynlibs&&(dynamicLibraries=u.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(a,"main"),Module.asm=a,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}i(e,"t");function n(o){e(o.instance,o.module)}i(n,"r");function r(o){return getBinaryPromise().then(function(s){return WebAssembly.instantiate(s,t)}).then(function(s){return s}).then(o,function(s){err("failed to asynchronously prepare wasm: "+s),abort(s)})}if(i(r,"_"),addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(o){return err("Module.instantiateWasm callback failed with error: "+o),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?r(n):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(o){return WebAssembly.instantiateStreaming(o,t).then(n,function(s){return err("wasm streaming compile failed: "+s),err("falling back to ArrayBuffer instantiation"),r(n)})}),{}}i(createWasm,"createWasm"),wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}i(ExitStatus,"ExitStatus");var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:i(function(t,e){var n=GOT[e];return n||(n=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(e)||(n.required=!0),n},"get")};function callRuntimeCallbacks(t){for(;t.length>0;)t.shift()(Module)}i(callRuntimeCallbacks,"callRuntimeCallbacks");function getDylinkMetadata(t){var e=0,n=0;function r(){for(var O=0,I=1;;){var V=t[e++];if(O+=(127&V)*I,I*=128,!(128&V))break}return O}i(r,"_");function o(){var O=r();return UTF8ArrayToString(t,(e+=O)-O,O)}i(o,"n");function s(O,I){if(O)throw new Error(I)}i(s,"s");var a="dylink.0";if(t instanceof WebAssembly.Module){var u=WebAssembly.Module.customSections(t,a);u.length===0&&(a="dylink",u=WebAssembly.Module.customSections(t,a)),s(u.length===0,"need dylink section"),n=(t=new Uint8Array(u[0])).length}else{s(new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),s(t[8]!==0,"need the dylink section to be first"),e=9;var d=r();n=e+d,a=o()}var f={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(a=="dylink"){f.memorySize=r(),f.memoryAlign=r(),f.tableSize=r(),f.tableAlign=r();for(var p=r(),b=0;b<p;++b){var v=o();f.neededDynlibs.push(v)}}else for(s(a!=="dylink.0");e<n;){var T=t[e++],A=r();if(T===1)f.memorySize=r(),f.memoryAlign=r(),f.tableSize=r(),f.tableAlign=r();else if(T===2)for(p=r(),b=0;b<p;++b)v=o(),f.neededDynlibs.push(v);else if(T===3)for(var P=r();P--;){var j=o();256&r()&&f.tlsExports.add(j)}else if(T===4)for(P=r();P--;)o(),j=o(),(3&r())==1&&f.weakImports.add(j);else e+=A}return f}i(getDylinkMetadata,"getDylinkMetadata");function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return HEAP8[t>>0];case"i16":return HEAP16[t>>1];case"i32":case"i64":return HEAP32[t>>2];case"float":return HEAPF32[t>>2];case"double":return HEAPF64[t>>3];case"*":return HEAPU32[t>>2];default:abort("invalid type for getValue: "+e)}return null}i(getValue,"getValue");function asmjsMangle(t){return t.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(t)?t:"_"+t}i(asmjsMangle,"asmjsMangle");function mergeLibSymbols(t,e){for(var n in t)if(t.hasOwnProperty(n)){asmLibraryArg.hasOwnProperty(n)||(asmLibraryArg[n]=t[n]);var r=asmjsMangle(n);Module.hasOwnProperty(r)||(Module[r]=t[n]),n=="__main_argc_argv"&&(Module._main=t[n])}}i(mergeLibSymbols,"mergeLibSymbols");var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(t,e,n){var r=Module["dynCall_"+t];return n&&n.length?r.apply(null,[e].concat(n)):r.call(null,e)}i(dynCallLegacy,"dynCallLegacy");var wasmTableMirror=[];function getWasmTableEntry(t){var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e}i(getWasmTableEntry,"getWasmTableEntry");function dynCall(t,e,n){return t.includes("j")?dynCallLegacy(t,e,n):getWasmTableEntry(e).apply(null,n)}i(dynCall,"dynCall");function createInvokeFunction(t){return function(){var e=stackSave();try{return dynCall(t,arguments[0],Array.prototype.slice.call(arguments,1))}catch(n){if(stackRestore(e),n!==n+0)throw n;_setThrew(1,0)}}}i(createInvokeFunction,"createInvokeFunction");var ___heap_base=78144;function zeroMemory(t,e){return HEAPU8.fill(0,t,t+e),t}i(zeroMemory,"zeroMemory");function getMemory(t){if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,n=e+t+15&-16;return ___heap_base=n,GOT.__heap_base.value=n,e}i(getMemory,"getMemory");function isInternalSym(t){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(t)}i(isInternalSym,"isInternalSym");function uleb128Encode(t,e){t<128?e.push(t):e.push(t%128|128,t>>7)}i(uleb128Encode,"uleb128Encode");function sigToWasmTypes(t){for(var e={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},n={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},r=1;r<t.length;++r)n.parameters.push(e[t[r]]),t[r]==="j"&&n.parameters.push("i32");return n}i(sigToWasmTypes,"sigToWasmTypes");function generateFuncType(t,e){var n=t.slice(0,1),r=t.slice(1),o={i:127,p:127,j:126,f:125,d:124};e.push(96),uleb128Encode(r.length,e);for(var s=0;s<r.length;++s)e.push(o[r[s]]);n=="v"?e.push(0):e.push(1,o[n])}i(generateFuncType,"generateFuncType");function convertJsFunctionToWasm(t,e){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var n=[1];generateFuncType(e,n);var r=[0,97,115,109,1,0,0,0,1];uleb128Encode(n.length,r),r.push.apply(r,n),r.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var o=new WebAssembly.Module(new Uint8Array(r));return new WebAssembly.Instance(o,{e:{f:t}}).exports.f}i(convertJsFunctionToWasm,"convertJsFunctionToWasm");function updateTableMap(t,e){if(functionsInTableMap)for(var n=t;n<t+e;n++){var r=getWasmTableEntry(n);r&&functionsInTableMap.set(r,n)}}i(updateTableMap,"updateTableMap");var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1}i(getEmptyTableSlot,"getEmptyTableSlot");function setWasmTableEntry(t,e){wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)}i(setWasmTableEntry,"setWasmTableEntry");function addFunction(t,e){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(t))return functionsInTableMap.get(t);var n=getEmptyTableSlot();try{setWasmTableEntry(n,t)}catch(r){if(!(r instanceof TypeError))throw r;setWasmTableEntry(n,convertJsFunctionToWasm(t,e))}return functionsInTableMap.set(t,n),n}i(addFunction,"addFunction");function updateGOT(t,e){for(var n in t)if(!isInternalSym(n)){var r=t[n];n.startsWith("orig$")&&(n=n.split("$")[1],e=!0),GOT[n]||(GOT[n]=new WebAssembly.Global({value:"i32",mutable:!0})),(e||GOT[n].value==0)&&(typeof r=="function"?GOT[n].value=addFunction(r):typeof r=="number"?GOT[n].value=r:err("unhandled export type for `"+n+"`: "+typeof r))}}i(updateGOT,"updateGOT");function relocateExports(t,e,n){var r={};for(var o in t){var s=t[o];typeof s=="object"&&(s=s.value),typeof s=="number"&&(s+=e),r[o]=s}return updateGOT(r,n),r}i(relocateExports,"relocateExports");function resolveGlobalSymbol(t,e){var n;return e&&(n=asmLibraryArg["orig$"+t]),n||(n=asmLibraryArg[t])&&n.stub&&(n=void 0),n||(n=Module[asmjsMangle(t)]),!n&&t.startsWith("invoke_")&&(n=createInvokeFunction(t.split("_")[1])),n}i(resolveGlobalSymbol,"resolveGlobalSymbol");function alignMemory(t,e){return Math.ceil(t/e)*e}i(alignMemory,"alignMemory");function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t,!1);return e||(e=moduleExports[t]),e}i(resolveSymbol,"resolveSymbol"),tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:i(function(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in asmLibraryArg)return asmLibraryArg[e];var n;return e in t||(t[e]=function(){return n||(n=resolveSymbol(e)),n.apply(null,arguments)}),t[e]},"get")},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(i(addEmAsm,"addEmAsm"),updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(i(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(t){return postInstantiation(t.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return i(loadModule,"loadModule"),CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(t){loadDynamicLibrary(t,flags)}),loadModule())}i(loadWebAssemblyModule,"loadWebAssemblyModule");function loadDynamicLibrary(t,e,n){e=e||{global:!0,nodelete:!0};var r=LDSO.loadedLibsByName[t];if(r)return e.global&&!r.global&&(r.global=!0,r.module!=="loading"&&mergeLibSymbols(r.module,t)),e.nodelete&&r.refcount!==1/0&&(r.refcount=1/0),r.refcount++,n&&(LDSO.loadedLibsByHandle[n]=r),!e.loadAsync||Promise.resolve(!0);function o(u){if(e.fs&&e.fs.findObject(u)){var d=e.fs.readFile(u,{encoding:"binary"});return d instanceof Uint8Array||(d=new Uint8Array(d)),e.loadAsync?Promise.resolve(d):d}if(u=locateFile(u),e.loadAsync)return new Promise(function(f,p){readAsync(u,b=>f(new Uint8Array(b)),p)});if(!readBinary)throw new Error(u+": file not found, and synchronous loading of external files is not available");return readBinary(u)}i(o,"n");function s(){if(typeof preloadedWasm<"u"&&preloadedWasm[t]){var u=preloadedWasm[t];return e.loadAsync?Promise.resolve(u):u}return e.loadAsync?o(t).then(function(d){return loadWebAssemblyModule(d,e,n)}):loadWebAssemblyModule(o(t),e,n)}i(s,"s");function a(u){r.global&&mergeLibSymbols(u,t),r.module=u}return i(a,"a"),r={refcount:e.nodelete?1/0:1,name:t,module:"loading",global:e.global},LDSO.loadedLibsByName[t]=r,n&&(LDSO.loadedLibsByHandle[n]=r),e.loadAsync?s().then(function(u){return a(u),!0}):(a(s()),!0)}i(loadDynamicLibrary,"loadDynamicLibrary");function reportUndefinedSymbols(){for(var t in GOT)if(GOT[t].value==0){var e=resolveGlobalSymbol(t,!0);if(!e&&!GOT[t].required)continue;if(typeof e=="function")GOT[t].value=addFunction(e,e.sig);else{if(typeof e!="number")throw new Error("bad export type for `"+t+"`: "+typeof e);GOT[t].value=e}}}i(reportUndefinedSymbols,"reportUndefinedSymbols");function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}i(preloadDylibs,"preloadDylibs");function setValue(t,e,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":case"i8":HEAP8[t>>0]=e;break;case"i16":HEAP16[t>>1]=e;break;case"i32":HEAP32[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1];break;case"float":HEAPF32[t>>2]=e;break;case"double":HEAPF64[t>>3]=e;break;case"*":HEAPU32[t>>2]=e;break;default:abort("invalid type for setValue: "+n)}}i(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}i(__emscripten_get_now_is_monotonic,"__emscripten_get_now_is_monotonic");function _abort(){abort("")}i(_abort,"_abort");function _emscripten_date_now(){return Date.now()}i(_emscripten_date_now,"_emscripten_date_now");function _emscripten_memcpy_big(t,e,n){HEAPU8.copyWithin(t,e,e+n)}i(_emscripten_memcpy_big,"_emscripten_memcpy_big");function getHeapMax(){return 2147483648}i(getHeapMax,"getHeapMax");function emscripten_realloc_buffer(t){try{return wasmMemory.grow(t-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}i(emscripten_realloc_buffer,"emscripten_realloc_buffer");function _emscripten_resize_heap(t){var e=HEAPU8.length;t>>>=0;var n=getHeapMax();if(t>n)return!1;for(var r=1;r<=4;r*=2){var o=e*(1+.2/r);if(o=Math.min(o,t+100663296),emscripten_realloc_buffer(Math.min(n,(s=Math.max(t,o))+((a=65536)-s%a)%a)))return!0}var s,a;return!1}i(_emscripten_resize_heap,"_emscripten_resize_heap"),__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:i(function(t,e,n){if(PATH.isAbs(e))return e;var r;if(t===-100?r=FS.cwd():r=SYSCALLS.getStreamFromFD(t).path,e.length==0){if(!n)throw new FS.ErrnoError(44);return r}return PATH.join2(r,e)},"calculateAt"),doStat:i(function(t,e,n){try{var r=t(e)}catch(u){if(u&&u.node&&PATH.normalize(e)!==PATH.normalize(FS.getPath(u.node)))return-54;throw u}HEAP32[n>>2]=r.dev,HEAP32[n+8>>2]=r.ino,HEAP32[n+12>>2]=r.mode,HEAPU32[n+16>>2]=r.nlink,HEAP32[n+20>>2]=r.uid,HEAP32[n+24>>2]=r.gid,HEAP32[n+28>>2]=r.rdev,tempI64=[r.size>>>0,(tempDouble=r.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+40>>2]=tempI64[0],HEAP32[n+44>>2]=tempI64[1],HEAP32[n+48>>2]=4096,HEAP32[n+52>>2]=r.blocks;var o=r.atime.getTime(),s=r.mtime.getTime(),a=r.ctime.getTime();return tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+56>>2]=tempI64[0],HEAP32[n+60>>2]=tempI64[1],HEAPU32[n+64>>2]=o%1e3*1e3,tempI64=[Math.floor(s/1e3)>>>0,(tempDouble=Math.floor(s/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+72>>2]=tempI64[0],HEAP32[n+76>>2]=tempI64[1],HEAPU32[n+80>>2]=s%1e3*1e3,tempI64=[Math.floor(a/1e3)>>>0,(tempDouble=Math.floor(a/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+88>>2]=tempI64[0],HEAP32[n+92>>2]=tempI64[1],HEAPU32[n+96>>2]=a%1e3*1e3,tempI64=[r.ino>>>0,(tempDouble=r.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+104>>2]=tempI64[0],HEAP32[n+108>>2]=tempI64[1],0},"doStat"),doMsync:i(function(t,e,n,r,o){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&r)return 0;var s=HEAPU8.slice(t,t+n);FS.msync(e,s,o,n,r)},"doMsync"),varargs:void 0,get:i(function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},"get"),getStr:i(function(t){return UTF8ToString(t)},"getStr"),getStreamFromFD:i(function(t){var e=FS.getStream(t);if(!e)throw new FS.ErrnoError(8);return e},"getStreamFromFD")};function _proc_exit(t){EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit&&Module.onExit(t),ABORT=!0),quit_(t,new ExitStatus(t))}i(_proc_exit,"_proc_exit");function exitJS(t,e){EXITSTATUS=t,_proc_exit(t)}i(exitJS,"exitJS"),_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(t){try{var e=SYSCALLS.getStreamFromFD(t);return FS.close(e),0}catch(n){if(typeof FS>"u"||!(n instanceof FS.ErrnoError))throw n;return n.errno}}i(_fd_close,"_fd_close");function convertI32PairToI53Checked(t,e){return e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN}i(convertI32PairToI53Checked,"convertI32PairToI53Checked");function _fd_seek(t,e,n,r,o){try{var s=convertI32PairToI53Checked(e,n);if(isNaN(s))return 61;var a=SYSCALLS.getStreamFromFD(t);return FS.llseek(a,s,r),tempI64=[a.position>>>0,(tempDouble=a.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[o>>2]=tempI64[0],HEAP32[o+4>>2]=tempI64[1],a.getdents&&s===0&&r===0&&(a.getdents=null),0}catch(u){if(typeof FS>"u"||!(u instanceof FS.ErrnoError))throw u;return u.errno}}i(_fd_seek,"_fd_seek");function doWritev(t,e,n,r){for(var o=0,s=0;s<n;s++){var a=HEAPU32[e>>2],u=HEAPU32[e+4>>2];e+=8;var d=FS.write(t,HEAP8,a,u,r);if(d<0)return-1;o+=d,r!==void 0&&(r+=d)}return o}i(doWritev,"doWritev");function _fd_write(t,e,n,r){try{var o=doWritev(SYSCALLS.getStreamFromFD(t),e,n);return HEAPU32[r>>2]=o,0}catch(s){if(typeof FS>"u"||!(s instanceof FS.ErrnoError))throw s;return s.errno}}i(_fd_write,"_fd_write");function _tree_sitter_log_callback(t,e){if(currentLogCallback){let n=UTF8ToString(e);currentLogCallback(n,t!==0)}}i(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(t,e,n,r,o){var s=currentParseCallback(e,{row:n,column:r});typeof s=="string"?(setValue(o,s.length,"i32"),stringToUTF16(s,t,10240)):setValue(o,0,"i32")}i(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");function handleException(t){if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)}i(handleException,"handleException");function allocateUTF8OnStack(t){var e=lengthBytesUTF8(t)+1,n=stackAlloc(e);return stringToUTF8Array(t,HEAP8,n,e),n}i(allocateUTF8OnStack,"allocateUTF8OnStack");function stringToUTF16(t,e,n){if(n===void 0&&(n=2147483647),n<2)return 0;for(var r=e,o=(n-=2)<2*t.length?n/2:t.length,s=0;s<o;++s){var a=t.charCodeAt(s);HEAP16[e>>1]=a,e+=2}return HEAP16[e>>1]=0,e-r}i(stringToUTF16,"stringToUTF16");function AsciiToString(t){for(var e="";;){var n=HEAPU8[t++>>0];if(!n)return e;e+=String.fromCharCode(n)}}i(AsciiToString,"AsciiToString"),_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(t){var e=Module._main;if(e){(t=t||[]).unshift(thisProgram);var n=t.length,r=stackAlloc(4*(n+1)),o=r>>2;t.forEach(a=>{HEAP32[o++]=allocateUTF8OnStack(a)}),HEAP32[o]=0;try{var s=e(n,r);return exitJS(s,!0),s}catch(a){return handleException(a)}}}i(callMain,"callMain"),Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=i(function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)},"e");var dylibsLoaded=!1;function run(t){function e(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(t),postRun()))}i(e,"t"),t=t||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()))}if(i(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static{i(this,"ParserImpl")}static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let n;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{n=e[0];let r=C._ts_language_version(n);if(r<MIN_COMPATIBLE_VERSION||VERSION<r)throw new Error(`Incompatible language version ${r}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else n=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],n),this}getLanguage(){return this.language}parse(e,n,r){if(typeof e=="string")currentParseCallback=i((d,f,p)=>e.slice(d,p),"currentParseCallback");else{if(typeof e!="function")throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let o=0,s=0;if(r&&r.includedRanges){o=r.includedRanges.length,s=C._calloc(o,SIZE_OF_RANGE);let d=s;for(let f=0;f<o;f++)marshalRange(d,r.includedRanges[f]),d+=SIZE_OF_RANGE}let a=C._ts_parser_parse_wasm(this[0],this[1],n?n[0]:0,s,o);if(!a)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let u=new Tree(INTERNAL,a,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,u}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(typeof e!="function")throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{static{i(this,"Tree")}constructor(e,n,r,o){assertInternal(e),this[0]=n,this.language=r,this.textCallback=o}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let n=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),o=new Array(n);if(n>0){let s=r;for(let a=0;a<n;a++)o[a]=unmarshalRange(s),s+=SIZE_OF_RANGE;C._free(r)}return o}}class Node{static{i(this,"Node")}constructor(e,n){assertInternal(e),this.tree=n}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let n=this.tree.language.fields.indexOf(e);if(n!==-1)return this.childForFieldId(n)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let r=n;for(let o=0;o<e;o++)this._children[o]=unmarshalNode(this.tree,r),r+=SIZE_OF_NODE;C._free(n)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let r=n;for(let o=0;o<e;o++)this._namedChildren[o]=unmarshalNode(this.tree,r),r+=SIZE_OF_NODE;C._free(n)}}return this._namedChildren}descendantsOfType(e,n,r){Array.isArray(e)||(e=[e]),n||(n=ZERO_POINT),r||(r=ZERO_POINT);let o=[],s=this.tree.language.types;for(let p=0,b=s.length;p<b;p++)e.includes(s[p])&&o.push(p);let a=C._malloc(SIZE_OF_INT*o.length);for(let p=0,b=o.length;p<b;p++)setValue(a+p*SIZE_OF_INT,o[p],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],a,o.length,n.row,n.column,r.row,r.column);let u=getValue(TRANSFER_BUFFER,"i32"),d=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),f=new Array(u);if(u>0){let p=d;for(let b=0;b<u;b++)f[b]=unmarshalNode(this.tree,p),p+=SIZE_OF_NODE}return C._free(d),C._free(a),f}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,n=e){if(typeof e!="number"||typeof n!="number")throw new Error("Arguments must be numbers");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,"i32"),setValue(r+SIZE_OF_INT,n,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,n=e){if(typeof e!="number"||typeof n!="number")throw new Error("Arguments must be numbers");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,"i32"),setValue(r+SIZE_OF_INT,n,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,n=e){if(!isPoint(e)||!isPoint(n))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(r,e),marshalPoint(r+SIZE_OF_POINT,n),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,n=e){if(!isPoint(e)||!isPoint(n))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(r,e),marshalPoint(r+SIZE_OF_POINT,n),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),n=AsciiToString(e);return C._free(e),n}}class TreeCursor{static{i(this,"TreeCursor")}constructor(e,n){assertInternal(e),this.tree=n,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),n=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,n)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{static{i(this,"Language")}constructor(e,n){assertInternal(e),this[0]=n,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let r=0,o=this.types.length;r<o;r++)C._ts_language_symbol_type(this[0],r)<2&&(this.types[r]=UTF8ToString(C._ts_language_symbol_name(this[0],r)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let r=0,o=this.fields.length;r<o;r++){let s=C._ts_language_field_name_for_id(this[0],r);this.fields[r]=s!==0?UTF8ToString(s):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){let n=this.fields.indexOf(e);return n!==-1?n:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,n){let r=lengthBytesUTF8(e),o=C._malloc(r+1);stringToUTF8(e,o,r+1);let s=C._ts_language_symbol_for_name(this[0],o,r,n);return C._free(o),s||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let n=C._ts_language_symbol_name(this[0],e);return n?UTF8ToString(n):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){let n=lengthBytesUTF8(e),r=C._malloc(n+1);stringToUTF8(e,r,n+1);let o=C._ts_query_new(this[0],r,n,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!o){let P=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),j=UTF8ToString(r,getValue(TRANSFER_BUFFER,"i32")).length,O=e.substr(j,100).split(`
`)[0],I,V=O.match(QUERY_WORD_REGEX)[0];switch(P){case 2:I=new RangeError(`Bad node name '${V}'`);break;case 3:I=new RangeError(`Bad field name '${V}'`);break;case 4:I=new RangeError(`Bad capture name @${V}`);break;case 5:I=new TypeError(`Bad pattern structure at offset ${j}: '${O}'...`),V="";break;default:I=new SyntaxError(`Bad syntax at offset ${j}: '${O}'...`),V=""}throw I.index=j,I.length=V.length,C._free(r),I}let s=C._ts_query_string_count(o),a=C._ts_query_capture_count(o),u=C._ts_query_pattern_count(o),d=new Array(a),f=new Array(s);for(let P=0;P<a;P++){let j=C._ts_query_capture_name_for_id(o,P,TRANSFER_BUFFER),O=getValue(TRANSFER_BUFFER,"i32");d[P]=UTF8ToString(j,O)}for(let P=0;P<s;P++){let j=C._ts_query_string_value_for_id(o,P,TRANSFER_BUFFER),O=getValue(TRANSFER_BUFFER,"i32");f[P]=UTF8ToString(j,O)}let p=new Array(u),b=new Array(u),v=new Array(u),T=new Array(u),A=new Array(u);for(let P=0;P<u;P++){let j=C._ts_query_predicates_for_pattern(o,P,TRANSFER_BUFFER),O=getValue(TRANSFER_BUFFER,"i32");T[P]=[],A[P]=[];let I=[],V=j;for(let X=0;X<O;X++){let Y=getValue(V,"i32");V+=SIZE_OF_INT;let fe=getValue(V,"i32");if(V+=SIZE_OF_INT,Y===PREDICATE_STEP_TYPE_CAPTURE)I.push({type:"capture",name:d[fe]});else if(Y===PREDICATE_STEP_TYPE_STRING)I.push({type:"string",value:f[fe]});else if(I.length>0){if(I[0].type!=="string")throw new Error("Predicates must begin with a literal value");let oe=I[0].value,pe=!0;switch(oe){case"not-eq?":pe=!1;case"eq?":if(I.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(I.length-1));if(I[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${I[1].value}"`);if(I[2].type==="capture"){let E=I[1].name,W=I[2].name;A[P].push(function(B){let x,M;for(let N of B)N.name===E&&(x=N.node),N.name===W&&(M=N.node);return x===void 0||M===void 0||x.text===M.text===pe})}else{let E=I[1].name,W=I[2].value;A[P].push(function(B){for(let x of B)if(x.name===E)return x.node.text===W===pe;return!0})}break;case"not-match?":pe=!1;case"match?":if(I.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${I.length-1}.`);if(I[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${I[1].value}".`);if(I[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${I[2].value}.`);let De=I[1].name,Oe=new RegExp(I[2].value);A[P].push(function(E){for(let W of E)if(W.name===De)return Oe.test(W.node.text)===pe;return!0});break;case"set!":if(I.length<2||I.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${I.length-1}.`);if(I.some(E=>E.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');p[P]||(p[P]={}),p[P][I[1].value]=I[2]?I[2].value:null;break;case"is?":case"is-not?":if(I.length<2||I.length>3)throw new Error(`Wrong number of arguments to \`#${oe}\` predicate. Expected 1 or 2. Got ${I.length-1}.`);if(I.some(E=>E.type!=="string"))throw new Error(`Arguments to \`#${oe}\` predicate must be a strings.".`);let D=oe==="is?"?b:v;D[P]||(D[P]={}),D[P][I[1].value]=I[2]?I[2].value:null;break;default:T[P].push({operator:oe,operands:I.slice(1)})}I.length=0}}Object.freeze(p[P]),Object.freeze(b[P]),Object.freeze(v[P])}return C._free(r),new Query(INTERNAL,o,d,A,T,Object.freeze(p),Object.freeze(b),Object.freeze(v))}static load(e){let n;if(e instanceof Uint8Array)n=Promise.resolve(e);else{let o=e;if(typeof process<"u"&&process.versions&&process.versions.node){let s=require("fs");n=Promise.resolve(s.readFileSync(o))}else n=fetch(o).then(s=>s.arrayBuffer().then(a=>{if(s.ok)return new Uint8Array(a);{let u=new TextDecoder("utf-8").decode(a);throw new Error(`Language.load failed with status ${s.status}.

${u}`)}}))}let r=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return n.then(o=>r(o,{loadAsync:!0})).then(o=>{let s=Object.keys(o),a=s.find(d=>LANGUAGE_FUNCTION_REGEX.test(d)&&!d.includes("external_scanner_"));a||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(s,null,2)}`);let u=o[a]();return new Language(INTERNAL,u)})}}class Query{static{i(this,"Query")}constructor(e,n,r,o,s,a,u,d){assertInternal(e),this[0]=n,this.captureNames=r,this.textPredicates=o,this.predicates=s,this.setProperties=a,this.assertedProperties=u,this.refutedProperties=d,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,n,r,o){n||(n=ZERO_POINT),r||(r=ZERO_POINT),o||(o={});let s=o.matchLimit;if(s===void 0)s=0;else if(typeof s!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],n.row,n.column,r.row,r.column,s);let a=getValue(TRANSFER_BUFFER,"i32"),u=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),d=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),f=new Array(a);this.exceededMatchLimit=!!d;let p=0,b=u;for(let v=0;v<a;v++){let T=getValue(b,"i32");b+=SIZE_OF_INT;let A=getValue(b,"i32");b+=SIZE_OF_INT;let P=new Array(A);if(b=unmarshalCaptures(this,e.tree,b,P),this.textPredicates[T].every(j=>j(P))){f[p++]={pattern:T,captures:P};let j=this.setProperties[T];j&&(f[v].setProperties=j);let O=this.assertedProperties[T];O&&(f[v].assertedProperties=O);let I=this.refutedProperties[T];I&&(f[v].refutedProperties=I)}}return f.length=p,C._free(u),f}captures(e,n,r,o){n||(n=ZERO_POINT),r||(r=ZERO_POINT),o||(o={});let s=o.matchLimit;if(s===void 0)s=0;else if(typeof s!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],n.row,n.column,r.row,r.column,s);let a=getValue(TRANSFER_BUFFER,"i32"),u=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),d=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),f=[];this.exceededMatchLimit=!!d;let p=[],b=u;for(let v=0;v<a;v++){let T=getValue(b,"i32");b+=SIZE_OF_INT;let A=getValue(b,"i32");b+=SIZE_OF_INT;let P=getValue(b,"i32");if(b+=SIZE_OF_INT,p.length=A,b=unmarshalCaptures(this,e.tree,b,p),this.textPredicates[T].every(j=>j(p))){let j=p[P],O=this.setProperties[T];O&&(j.setProperties=O);let I=this.assertedProperties[T];I&&(j.assertedProperties=I);let V=this.refutedProperties[T];V&&(j.refutedProperties=V),f.push(j)}}return C._free(u),f}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,n){let r=n-e,o=t.textCallback(e,null,n);for(e+=o.length;e<n;){let s=t.textCallback(e,null,n);if(!(s&&s.length>0))break;e+=s.length,o+=s}return e>n&&(o=o.slice(0,r)),o}i(getText,"getText");function unmarshalCaptures(t,e,n,r){for(let o=0,s=r.length;o<s;o++){let a=getValue(n,"i32"),u=unmarshalNode(e,n+=SIZE_OF_INT);n+=SIZE_OF_NODE,r[o]={name:t.captureNames[a],node:u}}return n}i(unmarshalCaptures,"unmarshalCaptures");function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}i(assertInternal,"assertInternal");function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}i(isPoint,"isPoint");function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}i(marshalNode,"marshalNode");function unmarshalNode(t,e=TRANSFER_BUFFER){let n=getValue(e,"i32");if(n===0)return null;let r=getValue(e+=SIZE_OF_INT,"i32"),o=getValue(e+=SIZE_OF_INT,"i32"),s=getValue(e+=SIZE_OF_INT,"i32"),a=getValue(e+=SIZE_OF_INT,"i32"),u=new Node(INTERNAL,t);return u.id=n,u.startIndex=r,u.startPosition={row:o,column:s},u[0]=a,u}i(unmarshalNode,"unmarshalNode");function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32")}i(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}i(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}i(marshalPoint,"marshalPoint");function unmarshalPoint(t){return{row:getValue(t,"i32"),column:getValue(t+SIZE_OF_INT,"i32")}}i(unmarshalPoint,"unmarshalPoint");function marshalRange(t,e){marshalPoint(t,e.startPosition),marshalPoint(t+=SIZE_OF_POINT,e.endPosition),setValue(t+=SIZE_OF_POINT,e.startIndex,"i32"),setValue(t+=SIZE_OF_INT,e.endIndex,"i32"),t+=SIZE_OF_INT}i(marshalRange,"marshalRange");function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32"),t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32"),e}i(unmarshalRange,"unmarshalRange");function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}i(marshalEdit,"marshalEdit");for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var Tl=$(_s=>{var El="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");_s.encode=function(t){if(0<=t&&t<El.length)return El[t];throw new TypeError("Must be between 0 and 63: "+t)};_s.decode=function(t){var e=65,n=90,r=97,o=122,s=48,a=57,u=43,d=47,f=26,p=52;return e<=t&&t<=n?t-e:r<=t&&t<=o?t-r+f:s<=t&&t<=a?t-s+p:t==u?62:t==d?63:-1}});var vs=$(bs=>{var xl=Tl(),ys=5,kl=1<<ys,Pl=kl-1,Rl=kl;function bg(t){return t<0?(-t<<1)+1:(t<<1)+0}i(bg,"toVLQSigned");function vg(t){var e=(t&1)===1,n=t>>1;return e?-n:n}i(vg,"fromVLQSigned");bs.encode=i(function(e){var n="",r,o=bg(e);do r=o&Pl,o>>>=ys,o>0&&(r|=Rl),n+=xl.encode(r);while(o>0);return n},"base64VLQ_encode");bs.decode=i(function(e,n,r){var o=e.length,s=0,a=0,u,d;do{if(n>=o)throw new Error("Expected more digits in base 64 VLQ value.");if(d=xl.decode(e.charCodeAt(n++)),d===-1)throw new Error("Invalid base64 digit: "+e.charAt(n-1));u=!!(d&Rl),d&=Pl,s=s+(d<<a),a+=ys}while(u);r.value=vg(s),r.rest=n},"base64VLQ_decode")});var Dn=$(Ue=>{function wg(t,e,n){if(e in t)return t[e];if(arguments.length===3)return n;throw new Error('"'+e+'" is a required argument.')}i(wg,"getArg");Ue.getArg=wg;var Il=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,Sg=/^data:.+\,.+$/;function wr(t){var e=t.match(Il);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}i(wr,"urlParse");Ue.urlParse=wr;function Nn(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}i(Nn,"urlGenerate");Ue.urlGenerate=Nn;function ws(t){var e=t,n=wr(t);if(n){if(!n.path)return t;e=n.path}for(var r=Ue.isAbsolute(e),o=e.split(/\/+/),s,a=0,u=o.length-1;u>=0;u--)s=o[u],s==="."?o.splice(u,1):s===".."?a++:a>0&&(s===""?(o.splice(u+1,a),a=0):(o.splice(u,2),a--));return e=o.join("/"),e===""&&(e=r?"/":"."),n?(n.path=e,Nn(n)):e}i(ws,"normalize");Ue.normalize=ws;function Ml(t,e){t===""&&(t="."),e===""&&(e=".");var n=wr(e),r=wr(t);if(r&&(t=r.path||"/"),n&&!n.scheme)return r&&(n.scheme=r.scheme),Nn(n);if(n||e.match(Sg))return e;if(r&&!r.host&&!r.path)return r.host=e,Nn(r);var o=e.charAt(0)==="/"?e:ws(t.replace(/\/+$/,"")+"/"+e);return r?(r.path=o,Nn(r)):o}i(Ml,"join");Ue.join=Ml;Ue.isAbsolute=function(t){return t.charAt(0)==="/"||Il.test(t)};function Eg(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var n=0;e.indexOf(t+"/")!==0;){var r=t.lastIndexOf("/");if(r<0||(t=t.slice(0,r),t.match(/^([^\/]+:\/)?\/*$/)))return e;++n}return Array(n+1).join("../")+e.substr(t.length+1)}i(Eg,"relative");Ue.relative=Eg;var Cl=function(){var t=Object.create(null);return!("__proto__"in t)}();function Ll(t){return t}i(Ll,"identity");function Tg(t){return Nl(t)?"$"+t:t}i(Tg,"toSetString");Ue.toSetString=Cl?Ll:Tg;function xg(t){return Nl(t)?t.slice(1):t}i(xg,"fromSetString");Ue.fromSetString=Cl?Ll:xg;function Nl(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var n=e-10;n>=0;n--)if(t.charCodeAt(n)!==36)return!1;return!0}i(Nl,"isProtoString");function kg(t,e,n){var r=An(t.source,e.source);return r!==0||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0||n)||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=t.generatedLine-e.generatedLine,r!==0)?r:An(t.name,e.name)}i(kg,"compareByOriginalPositions");Ue.compareByOriginalPositions=kg;function Pg(t,e,n){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0||n)||(r=An(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:An(t.name,e.name)}i(Pg,"compareByGeneratedPositionsDeflated");Ue.compareByGeneratedPositionsDeflated=Pg;function An(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}i(An,"strcmp");function Rg(t,e){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=An(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:An(t.name,e.name)}i(Rg,"compareByGeneratedPositionsInflated");Ue.compareByGeneratedPositionsInflated=Rg;function Ig(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}i(Ig,"parseSourceMapInput");Ue.parseSourceMapInput=Ig;function Mg(t,e,n){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),n){var r=wr(n);if(!r)throw new Error("sourceMapURL could not be parsed");if(r.path){var o=r.path.lastIndexOf("/");o>=0&&(r.path=r.path.substring(0,o+1))}e=Ml(Nn(r),e)}return ws(e)}i(Mg,"computeSourceURL");Ue.computeSourceURL=Mg});var Ts=$(Al=>{var Ss=Dn(),Es=Object.prototype.hasOwnProperty,dn=typeof Map<"u";function Dt(){this._array=[],this._set=dn?new Map:Object.create(null)}i(Dt,"ArraySet");Dt.fromArray=i(function(e,n){for(var r=new Dt,o=0,s=e.length;o<s;o++)r.add(e[o],n);return r},"ArraySet_fromArray");Dt.prototype.size=i(function(){return dn?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");Dt.prototype.add=i(function(e,n){var r=dn?e:Ss.toSetString(e),o=dn?this.has(e):Es.call(this._set,r),s=this._array.length;(!o||n)&&this._array.push(e),o||(dn?this._set.set(e,s):this._set[r]=s)},"ArraySet_add");Dt.prototype.has=i(function(e){if(dn)return this._set.has(e);var n=Ss.toSetString(e);return Es.call(this._set,n)},"ArraySet_has");Dt.prototype.indexOf=i(function(e){if(dn){var n=this._set.get(e);if(n>=0)return n}else{var r=Ss.toSetString(e);if(Es.call(this._set,r))return this._set[r]}throw new Error('"'+e+'" is not in the set.')},"ArraySet_indexOf");Dt.prototype.at=i(function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},"ArraySet_at");Dt.prototype.toArray=i(function(){return this._array.slice()},"ArraySet_toArray");Al.ArraySet=Dt});var Fl=$(Ol=>{var Dl=Dn();function Cg(t,e){var n=t.generatedLine,r=e.generatedLine,o=t.generatedColumn,s=e.generatedColumn;return r>n||r==n&&s>=o||Dl.compareByGeneratedPositionsInflated(t,e)<=0}i(Cg,"generatedPositionAfter");function yi(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}i(yi,"MappingList");yi.prototype.unsortedForEach=i(function(e,n){this._array.forEach(e,n)},"MappingList_forEach");yi.prototype.add=i(function(e){Cg(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},"MappingList_add");yi.prototype.toArray=i(function(){return this._sorted||(this._array.sort(Dl.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");Ol.MappingList=yi});var xs=$(jl=>{var Sr=vs(),Me=Dn(),bi=Ts().ArraySet,Lg=Fl().MappingList;function it(t){t||(t={}),this._file=Me.getArg(t,"file",null),this._sourceRoot=Me.getArg(t,"sourceRoot",null),this._skipValidation=Me.getArg(t,"skipValidation",!1),this._sources=new bi,this._names=new bi,this._mappings=new Lg,this._sourcesContents=null}i(it,"SourceMapGenerator");it.prototype._version=3;it.fromSourceMap=i(function(e){var n=e.sourceRoot,r=new it({file:e.file,sourceRoot:n});return e.eachMapping(function(o){var s={generated:{line:o.generatedLine,column:o.generatedColumn}};o.source!=null&&(s.source=o.source,n!=null&&(s.source=Me.relative(n,s.source)),s.original={line:o.originalLine,column:o.originalColumn},o.name!=null&&(s.name=o.name)),r.addMapping(s)}),e.sources.forEach(function(o){var s=o;n!==null&&(s=Me.relative(n,o)),r._sources.has(s)||r._sources.add(s);var a=e.sourceContentFor(o);a!=null&&r.setSourceContent(o,a)}),r},"SourceMapGenerator_fromSourceMap");it.prototype.addMapping=i(function(e){var n=Me.getArg(e,"generated"),r=Me.getArg(e,"original",null),o=Me.getArg(e,"source",null),s=Me.getArg(e,"name",null);this._skipValidation||this._validateMapping(n,r,o,s),o!=null&&(o=String(o),this._sources.has(o)||this._sources.add(o)),s!=null&&(s=String(s),this._names.has(s)||this._names.add(s)),this._mappings.add({generatedLine:n.line,generatedColumn:n.column,originalLine:r!=null&&r.line,originalColumn:r!=null&&r.column,source:o,name:s})},"SourceMapGenerator_addMapping");it.prototype.setSourceContent=i(function(e,n){var r=e;this._sourceRoot!=null&&(r=Me.relative(this._sourceRoot,r)),n!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Me.toSetString(r)]=n):this._sourcesContents&&(delete this._sourcesContents[Me.toSetString(r)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");it.prototype.applySourceMap=i(function(e,n,r){var o=n;if(n==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);o=e.file}var s=this._sourceRoot;s!=null&&(o=Me.relative(s,o));var a=new bi,u=new bi;this._mappings.unsortedForEach(function(d){if(d.source===o&&d.originalLine!=null){var f=e.originalPositionFor({line:d.originalLine,column:d.originalColumn});f.source!=null&&(d.source=f.source,r!=null&&(d.source=Me.join(r,d.source)),s!=null&&(d.source=Me.relative(s,d.source)),d.originalLine=f.line,d.originalColumn=f.column,f.name!=null&&(d.name=f.name))}var p=d.source;p!=null&&!a.has(p)&&a.add(p);var b=d.name;b!=null&&!u.has(b)&&u.add(b)},this),this._sources=a,this._names=u,e.sources.forEach(function(d){var f=e.sourceContentFor(d);f!=null&&(r!=null&&(d=Me.join(r,d)),s!=null&&(d=Me.relative(s,d)),this.setSourceContent(d,f))},this)},"SourceMapGenerator_applySourceMap");it.prototype._validateMapping=i(function(e,n,r,o){if(n&&typeof n.line!="number"&&typeof n.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!n&&!r&&!o)){if(e&&"line"in e&&"column"in e&&n&&"line"in n&&"column"in n&&e.line>0&&e.column>=0&&n.line>0&&n.column>=0&&r)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:n,name:o}))}},"SourceMapGenerator_validateMapping");it.prototype._serializeMappings=i(function(){for(var e=0,n=1,r=0,o=0,s=0,a=0,u="",d,f,p,b,v=this._mappings.toArray(),T=0,A=v.length;T<A;T++){if(f=v[T],d="",f.generatedLine!==n)for(e=0;f.generatedLine!==n;)d+=";",n++;else if(T>0){if(!Me.compareByGeneratedPositionsInflated(f,v[T-1]))continue;d+=","}d+=Sr.encode(f.generatedColumn-e),e=f.generatedColumn,f.source!=null&&(b=this._sources.indexOf(f.source),d+=Sr.encode(b-a),a=b,d+=Sr.encode(f.originalLine-1-o),o=f.originalLine-1,d+=Sr.encode(f.originalColumn-r),r=f.originalColumn,f.name!=null&&(p=this._names.indexOf(f.name),d+=Sr.encode(p-s),s=p)),u+=d}return u},"SourceMapGenerator_serializeMappings");it.prototype._generateSourcesContent=i(function(e,n){return e.map(function(r){if(!this._sourcesContents)return null;n!=null&&(r=Me.relative(n,r));var o=Me.toSetString(r);return Object.prototype.hasOwnProperty.call(this._sourcesContents,o)?this._sourcesContents[o]:null},this)},"SourceMapGenerator_generateSourcesContent");it.prototype.toJSON=i(function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},"SourceMapGenerator_toJSON");it.prototype.toString=i(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");jl.SourceMapGenerator=it});var ql=$(fn=>{fn.GREATEST_LOWER_BOUND=1;fn.LEAST_UPPER_BOUND=2;function ks(t,e,n,r,o,s){var a=Math.floor((e-t)/2)+t,u=o(n,r[a],!0);return u===0?a:u>0?e-a>1?ks(a,e,n,r,o,s):s==fn.LEAST_UPPER_BOUND?e<r.length?e:-1:a:a-t>1?ks(t,a,n,r,o,s):s==fn.LEAST_UPPER_BOUND?a:t<0?-1:t}i(ks,"recursiveSearch");fn.search=i(function(e,n,r,o){if(n.length===0)return-1;var s=ks(-1,n.length,e,n,r,o||fn.GREATEST_LOWER_BOUND);if(s<0)return-1;for(;s-1>=0&&r(n[s],n[s-1],!0)===0;)--s;return s},"search")});var Ul=$(Wl=>{function Ps(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}i(Ps,"swap");function Ng(t,e){return Math.round(t+Math.random()*(e-t))}i(Ng,"randomIntInRange");function Rs(t,e,n,r){if(n<r){var o=Ng(n,r),s=n-1;Ps(t,o,r);for(var a=t[r],u=n;u<r;u++)e(t[u],a)<=0&&(s+=1,Ps(t,s,u));Ps(t,s+1,u);var d=s+1;Rs(t,e,n,d-1),Rs(t,e,d+1,r)}}i(Rs,"doQuickSort");Wl.quickSort=function(t,e){Rs(t,e,0,t.length-1)}});var zl=$(vi=>{var Z=Dn(),Is=ql(),On=Ts().ArraySet,Ag=vs(),Er=Ul().quickSort;function be(t,e){var n=t;return typeof t=="string"&&(n=Z.parseSourceMapInput(t)),n.sections!=null?new ht(n,e):new je(n,e)}i(be,"SourceMapConsumer");be.fromSourceMap=function(t,e){return je.fromSourceMap(t,e)};be.prototype._version=3;be.prototype.__generatedMappings=null;Object.defineProperty(be.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:i(function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings},"get")});be.prototype.__originalMappings=null;Object.defineProperty(be.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:i(function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings},"get")});be.prototype._charIsMappingSeparator=i(function(e,n){var r=e.charAt(n);return r===";"||r===","},"SourceMapConsumer_charIsMappingSeparator");be.prototype._parseMappings=i(function(e,n){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");be.GENERATED_ORDER=1;be.ORIGINAL_ORDER=2;be.GREATEST_LOWER_BOUND=1;be.LEAST_UPPER_BOUND=2;be.prototype.eachMapping=i(function(e,n,r){var o=n||null,s=r||be.GENERATED_ORDER,a;switch(s){case be.GENERATED_ORDER:a=this._generatedMappings;break;case be.ORIGINAL_ORDER:a=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var u=this.sourceRoot;a.map(function(d){var f=d.source===null?null:this._sources.at(d.source);return f=Z.computeSourceURL(u,f,this._sourceMapURL),{source:f,generatedLine:d.generatedLine,generatedColumn:d.generatedColumn,originalLine:d.originalLine,originalColumn:d.originalColumn,name:d.name===null?null:this._names.at(d.name)}},this).forEach(e,o)},"SourceMapConsumer_eachMapping");be.prototype.allGeneratedPositionsFor=i(function(e){var n=Z.getArg(e,"line"),r={source:Z.getArg(e,"source"),originalLine:n,originalColumn:Z.getArg(e,"column",0)};if(r.source=this._findSourceIndex(r.source),r.source<0)return[];var o=[],s=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",Z.compareByOriginalPositions,Is.LEAST_UPPER_BOUND);if(s>=0){var a=this._originalMappings[s];if(e.column===void 0)for(var u=a.originalLine;a&&a.originalLine===u;)o.push({line:Z.getArg(a,"generatedLine",null),column:Z.getArg(a,"generatedColumn",null),lastColumn:Z.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++s];else for(var d=a.originalColumn;a&&a.originalLine===n&&a.originalColumn==d;)o.push({line:Z.getArg(a,"generatedLine",null),column:Z.getArg(a,"generatedColumn",null),lastColumn:Z.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++s]}return o},"SourceMapConsumer_allGeneratedPositionsFor");vi.SourceMapConsumer=be;function je(t,e){var n=t;typeof t=="string"&&(n=Z.parseSourceMapInput(t));var r=Z.getArg(n,"version"),o=Z.getArg(n,"sources"),s=Z.getArg(n,"names",[]),a=Z.getArg(n,"sourceRoot",null),u=Z.getArg(n,"sourcesContent",null),d=Z.getArg(n,"mappings"),f=Z.getArg(n,"file",null);if(r!=this._version)throw new Error("Unsupported version: "+r);a&&(a=Z.normalize(a)),o=o.map(String).map(Z.normalize).map(function(p){return a&&Z.isAbsolute(a)&&Z.isAbsolute(p)?Z.relative(a,p):p}),this._names=On.fromArray(s.map(String),!0),this._sources=On.fromArray(o,!0),this._absoluteSources=this._sources.toArray().map(function(p){return Z.computeSourceURL(a,p,e)}),this.sourceRoot=a,this.sourcesContent=u,this._mappings=d,this._sourceMapURL=e,this.file=f}i(je,"BasicSourceMapConsumer");je.prototype=Object.create(be.prototype);je.prototype.consumer=be;je.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=Z.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var n;for(n=0;n<this._absoluteSources.length;++n)if(this._absoluteSources[n]==t)return n;return-1};je.fromSourceMap=i(function(e,n){var r=Object.create(je.prototype),o=r._names=On.fromArray(e._names.toArray(),!0),s=r._sources=On.fromArray(e._sources.toArray(),!0);r.sourceRoot=e._sourceRoot,r.sourcesContent=e._generateSourcesContent(r._sources.toArray(),r.sourceRoot),r.file=e._file,r._sourceMapURL=n,r._absoluteSources=r._sources.toArray().map(function(T){return Z.computeSourceURL(r.sourceRoot,T,n)});for(var a=e._mappings.toArray().slice(),u=r.__generatedMappings=[],d=r.__originalMappings=[],f=0,p=a.length;f<p;f++){var b=a[f],v=new Bl;v.generatedLine=b.generatedLine,v.generatedColumn=b.generatedColumn,b.source&&(v.source=s.indexOf(b.source),v.originalLine=b.originalLine,v.originalColumn=b.originalColumn,b.name&&(v.name=o.indexOf(b.name)),d.push(v)),u.push(v)}return Er(r.__originalMappings,Z.compareByOriginalPositions),r},"SourceMapConsumer_fromSourceMap");je.prototype._version=3;Object.defineProperty(je.prototype,"sources",{get:i(function(){return this._absoluteSources.slice()},"get")});function Bl(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}i(Bl,"Mapping");je.prototype._parseMappings=i(function(e,n){for(var r=1,o=0,s=0,a=0,u=0,d=0,f=e.length,p=0,b={},v={},T=[],A=[],P,j,O,I,V;p<f;)if(e.charAt(p)===";")r++,p++,o=0;else if(e.charAt(p)===",")p++;else{for(P=new Bl,P.generatedLine=r,I=p;I<f&&!this._charIsMappingSeparator(e,I);I++);if(j=e.slice(p,I),O=b[j],O)p+=j.length;else{for(O=[];p<I;)Ag.decode(e,p,v),V=v.value,p=v.rest,O.push(V);if(O.length===2)throw new Error("Found a source, but no line and column");if(O.length===3)throw new Error("Found a source and line, but no column");b[j]=O}P.generatedColumn=o+O[0],o=P.generatedColumn,O.length>1&&(P.source=u+O[1],u+=O[1],P.originalLine=s+O[2],s=P.originalLine,P.originalLine+=1,P.originalColumn=a+O[3],a=P.originalColumn,O.length>4&&(P.name=d+O[4],d+=O[4])),A.push(P),typeof P.originalLine=="number"&&T.push(P)}Er(A,Z.compareByGeneratedPositionsDeflated),this.__generatedMappings=A,Er(T,Z.compareByOriginalPositions),this.__originalMappings=T},"SourceMapConsumer_parseMappings");je.prototype._findMapping=i(function(e,n,r,o,s,a){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[o]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[o]);return Is.search(e,n,s,a)},"SourceMapConsumer_findMapping");je.prototype.computeColumnSpans=i(function(){for(var e=0;e<this._generatedMappings.length;++e){var n=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(n.generatedLine===r.generatedLine){n.lastGeneratedColumn=r.generatedColumn-1;continue}}n.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");je.prototype.originalPositionFor=i(function(e){var n={generatedLine:Z.getArg(e,"line"),generatedColumn:Z.getArg(e,"column")},r=this._findMapping(n,this._generatedMappings,"generatedLine","generatedColumn",Z.compareByGeneratedPositionsDeflated,Z.getArg(e,"bias",be.GREATEST_LOWER_BOUND));if(r>=0){var o=this._generatedMappings[r];if(o.generatedLine===n.generatedLine){var s=Z.getArg(o,"source",null);s!==null&&(s=this._sources.at(s),s=Z.computeSourceURL(this.sourceRoot,s,this._sourceMapURL));var a=Z.getArg(o,"name",null);return a!==null&&(a=this._names.at(a)),{source:s,line:Z.getArg(o,"originalLine",null),column:Z.getArg(o,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");je.prototype.hasContentsOfAllSources=i(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");je.prototype.sourceContentFor=i(function(e,n){if(!this.sourcesContent)return null;var r=this._findSourceIndex(e);if(r>=0)return this.sourcesContent[r];var o=e;this.sourceRoot!=null&&(o=Z.relative(this.sourceRoot,o));var s;if(this.sourceRoot!=null&&(s=Z.urlParse(this.sourceRoot))){var a=o.replace(/^file:\/\//,"");if(s.scheme=="file"&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!s.path||s.path=="/")&&this._sources.has("/"+o))return this.sourcesContent[this._sources.indexOf("/"+o)]}if(n)return null;throw new Error('"'+o+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");je.prototype.generatedPositionFor=i(function(e){var n=Z.getArg(e,"source");if(n=this._findSourceIndex(n),n<0)return{line:null,column:null,lastColumn:null};var r={source:n,originalLine:Z.getArg(e,"line"),originalColumn:Z.getArg(e,"column")},o=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",Z.compareByOriginalPositions,Z.getArg(e,"bias",be.GREATEST_LOWER_BOUND));if(o>=0){var s=this._originalMappings[o];if(s.source===r.source)return{line:Z.getArg(s,"generatedLine",null),column:Z.getArg(s,"generatedColumn",null),lastColumn:Z.getArg(s,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");vi.BasicSourceMapConsumer=je;function ht(t,e){var n=t;typeof t=="string"&&(n=Z.parseSourceMapInput(t));var r=Z.getArg(n,"version"),o=Z.getArg(n,"sections");if(r!=this._version)throw new Error("Unsupported version: "+r);this._sources=new On,this._names=new On;var s={line:-1,column:0};this._sections=o.map(function(a){if(a.url)throw new Error("Support for url field in sections not implemented.");var u=Z.getArg(a,"offset"),d=Z.getArg(u,"line"),f=Z.getArg(u,"column");if(d<s.line||d===s.line&&f<s.column)throw new Error("Section offsets must be ordered and non-overlapping.");return s=u,{generatedOffset:{generatedLine:d+1,generatedColumn:f+1},consumer:new be(Z.getArg(a,"map"),e)}})}i(ht,"IndexedSourceMapConsumer");ht.prototype=Object.create(be.prototype);ht.prototype.constructor=be;ht.prototype._version=3;Object.defineProperty(ht.prototype,"sources",{get:i(function(){for(var t=[],e=0;e<this._sections.length;e++)for(var n=0;n<this._sections[e].consumer.sources.length;n++)t.push(this._sections[e].consumer.sources[n]);return t},"get")});ht.prototype.originalPositionFor=i(function(e){var n={generatedLine:Z.getArg(e,"line"),generatedColumn:Z.getArg(e,"column")},r=Is.search(n,this._sections,function(s,a){var u=s.generatedLine-a.generatedOffset.generatedLine;return u||s.generatedColumn-a.generatedOffset.generatedColumn}),o=this._sections[r];return o?o.consumer.originalPositionFor({line:n.generatedLine-(o.generatedOffset.generatedLine-1),column:n.generatedColumn-(o.generatedOffset.generatedLine===n.generatedLine?o.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");ht.prototype.hasContentsOfAllSources=i(function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");ht.prototype.sourceContentFor=i(function(e,n){for(var r=0;r<this._sections.length;r++){var o=this._sections[r],s=o.consumer.sourceContentFor(e,!0);if(s)return s}if(n)return null;throw new Error('"'+e+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");ht.prototype.generatedPositionFor=i(function(e){for(var n=0;n<this._sections.length;n++){var r=this._sections[n];if(r.consumer._findSourceIndex(Z.getArg(e,"source"))!==-1){var o=r.consumer.generatedPositionFor(e);if(o){var s={line:o.line+(r.generatedOffset.generatedLine-1),column:o.column+(r.generatedOffset.generatedLine===o.line?r.generatedOffset.generatedColumn-1:0)};return s}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");ht.prototype._parseMappings=i(function(e,n){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var o=this._sections[r],s=o.consumer._generatedMappings,a=0;a<s.length;a++){var u=s[a],d=o.consumer._sources.at(u.source);d=Z.computeSourceURL(o.consumer.sourceRoot,d,this._sourceMapURL),this._sources.add(d),d=this._sources.indexOf(d);var f=null;u.name&&(f=o.consumer._names.at(u.name),this._names.add(f),f=this._names.indexOf(f));var p={source:d,generatedLine:u.generatedLine+(o.generatedOffset.generatedLine-1),generatedColumn:u.generatedColumn+(o.generatedOffset.generatedLine===u.generatedLine?o.generatedOffset.generatedColumn-1:0),originalLine:u.originalLine,originalColumn:u.originalColumn,name:f};this.__generatedMappings.push(p),typeof p.originalLine=="number"&&this.__originalMappings.push(p)}Er(this.__generatedMappings,Z.compareByGeneratedPositionsDeflated),Er(this.__originalMappings,Z.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");vi.IndexedSourceMapConsumer=ht});var Vl=$($l=>{var Dg=xs().SourceMapGenerator,wi=Dn(),Og=/(\r?\n)/,Fg=10,Fn="$$$isSourceNode$$$";function et(t,e,n,r,o){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=n??null,this.name=o??null,this[Fn]=!0,r!=null&&this.add(r)}i(et,"SourceNode");et.fromStringWithSourceMap=i(function(e,n,r){var o=new et,s=e.split(Og),a=0,u=i(function(){var v=A(),T=A()||"";return v+T;function A(){return a<s.length?s[a++]:void 0}},"shiftNextLine"),d=1,f=0,p=null;return n.eachMapping(function(v){if(p!==null)if(d<v.generatedLine)b(p,u()),d++,f=0;else{var T=s[a]||"",A=T.substr(0,v.generatedColumn-f);s[a]=T.substr(v.generatedColumn-f),f=v.generatedColumn,b(p,A),p=v;return}for(;d<v.generatedLine;)o.add(u()),d++;if(f<v.generatedColumn){var T=s[a]||"";o.add(T.substr(0,v.generatedColumn)),s[a]=T.substr(v.generatedColumn),f=v.generatedColumn}p=v},this),a<s.length&&(p&&b(p,u()),o.add(s.splice(a).join(""))),n.sources.forEach(function(v){var T=n.sourceContentFor(v);T!=null&&(r!=null&&(v=wi.join(r,v)),o.setSourceContent(v,T))}),o;function b(v,T){if(v===null||v.source===void 0)o.add(T);else{var A=r?wi.join(r,v.source):v.source;o.add(new et(v.originalLine,v.originalColumn,A,T,v.name))}}i(b,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");et.prototype.add=i(function(e){if(Array.isArray(e))e.forEach(function(n){this.add(n)},this);else if(e[Fn]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_add");et.prototype.prepend=i(function(e){if(Array.isArray(e))for(var n=e.length-1;n>=0;n--)this.prepend(e[n]);else if(e[Fn]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_prepend");et.prototype.walk=i(function(e){for(var n,r=0,o=this.children.length;r<o;r++)n=this.children[r],n[Fn]?n.walk(e):n!==""&&e(n,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");et.prototype.join=i(function(e){var n,r,o=this.children.length;if(o>0){for(n=[],r=0;r<o-1;r++)n.push(this.children[r]),n.push(e);n.push(this.children[r]),this.children=n}return this},"SourceNode_join");et.prototype.replaceRight=i(function(e,n){var r=this.children[this.children.length-1];return r[Fn]?r.replaceRight(e,n):typeof r=="string"?this.children[this.children.length-1]=r.replace(e,n):this.children.push("".replace(e,n)),this},"SourceNode_replaceRight");et.prototype.setSourceContent=i(function(e,n){this.sourceContents[wi.toSetString(e)]=n},"SourceNode_setSourceContent");et.prototype.walkSourceContents=i(function(e){for(var n=0,r=this.children.length;n<r;n++)this.children[n][Fn]&&this.children[n].walkSourceContents(e);for(var o=Object.keys(this.sourceContents),n=0,r=o.length;n<r;n++)e(wi.fromSetString(o[n]),this.sourceContents[o[n]])},"SourceNode_walkSourceContents");et.prototype.toString=i(function(){var e="";return this.walk(function(n){e+=n}),e},"SourceNode_toString");et.prototype.toStringWithSourceMap=i(function(e){var n={code:"",line:1,column:0},r=new Dg(e),o=!1,s=null,a=null,u=null,d=null;return this.walk(function(f,p){n.code+=f,p.source!==null&&p.line!==null&&p.column!==null?((s!==p.source||a!==p.line||u!==p.column||d!==p.name)&&r.addMapping({source:p.source,original:{line:p.line,column:p.column},generated:{line:n.line,column:n.column},name:p.name}),s=p.source,a=p.line,u=p.column,d=p.name,o=!0):o&&(r.addMapping({generated:{line:n.line,column:n.column}}),s=null,o=!1);for(var b=0,v=f.length;b<v;b++)f.charCodeAt(b)===Fg?(n.line++,n.column=0,b+1===v?(s=null,o=!1):o&&r.addMapping({source:p.source,original:{line:p.line,column:p.column},generated:{line:n.line,column:n.column},name:p.name})):n.column++}),this.walkSourceContents(function(f,p){r.setSourceContent(f,p)}),{code:n.code,map:r}},"SourceNode_toStringWithSourceMap");$l.SourceNode=et});var Hl=$(Si=>{Si.SourceMapGenerator=xs().SourceMapGenerator;Si.SourceMapConsumer=zl().SourceMapConsumer;Si.SourceNode=Vl().SourceNode});var Zl=$((DS,Gl)=>{var jg=Object.prototype.toString,Ms=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function qg(t){return jg.call(t).slice(8,-1)==="ArrayBuffer"}i(qg,"isArrayBuffer");function Wg(t,e,n){e>>>=0;var r=t.byteLength-e;if(r<0)throw new RangeError("'offset' is out of bounds");if(n===void 0)n=r;else if(n>>>=0,n>r)throw new RangeError("'length' is out of bounds");return Ms?Buffer.from(t.slice(e,e+n)):new Buffer(new Uint8Array(t.slice(e,e+n)))}i(Wg,"fromArrayBuffer");function Ug(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return Ms?Buffer.from(t,e):new Buffer(t,e)}i(Ug,"fromString");function Bg(t,e,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return qg(t)?Wg(t,e,n):typeof t=="string"?Ug(t,e):Ms?Buffer.from(t):new Buffer(t)}i(Bg,"bufferFrom");Gl.exports=Bg});var nc=$((pn,As)=>{var zg=Hl().SourceMapConsumer,Cs=require("path"),Tt;try{Tt=require("fs"),(!Tt.existsSync||!Tt.readFileSync)&&(Tt=null)}catch{}var $g=Zl();function Ql(t,e){return t.require(e)}i(Ql,"dynamicRequire");var Jl=!1,Kl=!1,Ls=!1,Tr="auto",mn={},xr={},Vg=/^data:application\/json[^,]+base64,/,zt=[],$t=[];function Ds(){return Tr==="browser"?!0:Tr==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}i(Ds,"isInBrowser");function Hg(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}i(Hg,"hasGlobalProcessEventEmitter");function Gg(){return typeof process=="object"&&process!==null?process.version:""}i(Gg,"globalProcessVersion");function Zg(){if(typeof process=="object"&&process!==null)return process.stderr}i(Zg,"globalProcessStderr");function Qg(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}i(Qg,"globalProcessExit");function Ei(t){return function(e){for(var n=0;n<t.length;n++){var r=t[n](e);if(r)return r}return null}}i(Ei,"handlerExec");var Os=Ei(zt);zt.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(r,o){return o?"":"/"})),t in mn)return mn[t];var e="";try{if(Tt)Tt.existsSync(t)&&(e=Tt.readFileSync(t,"utf8"));else{var n=new XMLHttpRequest;n.open("GET",t,!1),n.send(null),n.readyState===4&&n.status===200&&(e=n.responseText)}}catch{}return mn[t]=e});function Ns(t,e){if(!t)return e;var n=Cs.dirname(t),r=/^\w+:\/\/[^\/]*/.exec(n),o=r?r[0]:"",s=n.slice(o.length);return o&&/^\/\w\:/.test(s)?(o+="/",o+Cs.resolve(n.slice(o.length),e).replace(/\\/g,"/")):o+Cs.resolve(n.slice(o.length),e)}i(Ns,"supportRelativeURL");function Jg(t){var e;if(Ds())try{var n=new XMLHttpRequest;n.open("GET",t,!1),n.send(null),e=n.readyState===4?n.responseText:null;var r=n.getResponseHeader("SourceMap")||n.getResponseHeader("X-SourceMap");if(r)return r}catch{}e=Os(t);for(var o=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,s,a;a=o.exec(e);)s=a;return s?s[1]:null}i(Jg,"retrieveSourceMapURL");var Fs=Ei($t);$t.push(function(t){var e=Jg(t);if(!e)return null;var n;if(Vg.test(e)){var r=e.slice(e.indexOf(",")+1);n=$g(r,"base64").toString(),e=t}else e=Ns(t,e),n=Os(e);return n?{url:e,map:n}:null});function js(t){var e=xr[t.source];if(!e){var n=Fs(t.source);n?(e=xr[t.source]={url:n.url,map:new zg(n.map)},e.map.sourcesContent&&e.map.sources.forEach(function(o,s){var a=e.map.sourcesContent[s];if(a){var u=Ns(e.url,o);mn[u]=a}})):e=xr[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var r=e.map.originalPositionFor(t);if(r.source!==null)return r.source=Ns(e.url,r.source),r}return t}i(js,"mapSourcePosition");function Yl(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var n=js({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+n.source+":"+n.line+":"+(n.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+Yl(e[2])+")":t}i(Yl,"mapEvalOrigin");function Kg(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var n=this.getLineNumber();if(n!=null){e+=":"+n;var r=this.getColumnNumber();r&&(e+=":"+r)}}var o="",s=this.getFunctionName(),a=!0,u=this.isConstructor(),d=!(this.isToplevel()||u);if(d){var f=this.getTypeName();f==="[object Object]"&&(f="null");var p=this.getMethodName();s?(f&&s.indexOf(f)!=0&&(o+=f+"."),o+=s,p&&s.indexOf("."+p)!=s.length-p.length-1&&(o+=" [as "+p+"]")):o+=f+"."+(p||"<anonymous>")}else u?o+="new "+(s||"<anonymous>"):s?o+=s:(o+=e,a=!1);return a&&(o+=" ("+e+")"),o}i(Kg,"CallSiteToString");function Xl(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(n){e[n]=/^(?:is|get)/.test(n)?function(){return t[n].call(t)}:t[n]}),e.toString=Kg,e}i(Xl,"cloneCallSite");function ec(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var n=t.getFileName()||t.getScriptNameOrSourceURL();if(n){var r=t.getLineNumber(),o=t.getColumnNumber()-1,s=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,a=s.test(Gg())?0:62;r===1&&o>a&&!Ds()&&!t.isEval()&&(o-=a);var u=js({source:n,line:r,column:o});e.curPosition=u,t=Xl(t);var d=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?d():e.nextPosition.name||d()},t.getFileName=function(){return u.source},t.getLineNumber=function(){return u.line},t.getColumnNumber=function(){return u.column+1},t.getScriptNameOrSourceURL=function(){return u.source},t}var f=t.isEval()&&t.getEvalOrigin();return f&&(f=Yl(f),t=Xl(t),t.getEvalOrigin=function(){return f}),t}i(ec,"wrapCallSite");function Xg(t,e){Ls&&(mn={},xr={});for(var n=t.name||"Error",r=t.message||"",o=n+": "+r,s={nextPosition:null,curPosition:null},a=[],u=e.length-1;u>=0;u--)a.push(`
    at `+ec(e[u],s)),s.nextPosition=s.curPosition;return s.curPosition=s.nextPosition=null,o+a.reverse().join("")}i(Xg,"prepareStackTrace");function tc(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var n=e[1],r=+e[2],o=+e[3],s=mn[n];if(!s&&Tt&&Tt.existsSync(n))try{s=Tt.readFileSync(n,"utf8")}catch{s=""}if(s){var a=s.split(/(?:\r\n|\r|\n)/)[r-1];if(a)return n+":"+r+`
`+a+`
`+new Array(o).join(" ")+"^"}}return null}i(tc,"getErrorSource");function Yg(t){var e=tc(t),n=Zg();n&&n._handle&&n._handle.setBlocking&&n._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),Qg(1)}i(Yg,"printErrorAndExit");function eh(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var n=arguments[1]&&arguments[1].stack,r=this.listeners(e).length>0;if(n&&!r)return Yg(arguments[1])}return t.apply(this,arguments)}}i(eh,"shimEmitUncaughtException");var th=zt.slice(0),nh=$t.slice(0);pn.wrapCallSite=ec;pn.getErrorSource=tc;pn.mapSourcePosition=js;pn.retrieveSourceMap=Fs;pn.install=function(t){if(t=t||{},t.environment&&(Tr=t.environment,["node","browser","auto"].indexOf(Tr)===-1))throw new Error("environment "+Tr+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(zt.length=0),zt.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&($t.length=0),$t.unshift(t.retrieveSourceMap)),t.hookRequire&&!Ds()){var e=Ql(As,"module"),n=e.prototype._compile;n.__sourceMapSupport||(e.prototype._compile=function(s,a){return mn[a]=s,xr[a]=void 0,n.call(this,s,a)},e.prototype._compile.__sourceMapSupport=!0)}if(Ls||(Ls="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),Jl||(Jl=!0,Error.prepareStackTrace=Xg),!Kl){var r="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var o=Ql(As,"worker_threads");o.isMainThread===!1&&(r=!1)}catch{}r&&Hg()&&(Kl=!0,eh())}};pn.resetRetrieveHandlers=function(){zt.length=0,$t.length=0,zt=th.slice(0),$t=nh.slice(0),Fs=Ei($t),Os=Ei(zt)}});var rc=$(()=>{nc().install()});var yc=$((VT,_c)=>{var Vs=require("fs"),Oi=require("path"),Cr=Oi.join,bh=Oi.dirname,gc=Vs.accessSync&&function(t){try{Vs.accessSync(t)}catch{return!1}return!0}||Vs.existsSync||Oi.existsSync,hc={arrow:process.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","compiled","platform","arch","bindings"]]};function vh(t){typeof t=="string"?t={bindings:t}:t||(t={}),Object.keys(hc).map(function(d){d in t||(t[d]=hc[d])}),t.module_root||(t.module_root=wh(__filename)),Oi.extname(t.bindings)!=".node"&&(t.bindings+=".node");for(var e=typeof __webpack_require__=="function"?__non_webpack_require__:require,n=[],r=0,o=t.try.length,s,a,u;r<o;r++){s=Cr.apply(null,t.try[r].map(function(d){return t[d]||d})),n.push(s);try{return a=t.path?e.resolve(s):e(s),t.path||(a.path=s),a}catch(d){if(d.code!=="MODULE_NOT_FOUND"&&d.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(d.message))throw d}}throw u=new Error(`Could not locate the bindings file. Tried:
`+n.map(function(d){return t.arrow+d}).join(`
`)),u.tries=n,u}i(vh,"bindings");_c.exports=vh;function wh(t){for(var e=bh(t),n;;){if(e==="."&&(e=process.cwd()),gc(Cr(e,"dist")))return Cr(e,"dist");if(gc(Cr(e,"compiled")))return e;if(n===e)throw new Error('Could not find module root given file: "'+t+'". Do you have a `dist` or `compiled` directory? ');n=e,e=Cr(e,"..")}}i(wh,"getRoot")});var vc=$((GT,bc)=>{bc.exports=yc()("node_sqlite3.node")});var Ec=$(Sc=>{var Sh=require("util");function Eh(t,e,n){let r=t[e];t[e]=function(){let o=new Error,s=t.constructor.name+"#"+e+"("+Array.prototype.slice.call(arguments).map(function(u){return Sh.inspect(u,!1,0)}).join(", ")+")";typeof n>"u"&&(n=-1),n<0&&(n+=arguments.length);let a=arguments[n];return typeof arguments[n]=="function"&&(arguments[n]=i(function(){let d=arguments[0];return d&&d.stack&&!d.__augmented&&(d.stack=wc(d).join(`
`),d.stack+=`
--> in `+s,d.stack+=`
`+wc(o).slice(1).join(`
`),d.__augmented=!0),a.apply(this,arguments)},"replacement")),r.apply(this,arguments)}}i(Eh,"extendTrace");Sc.extendTrace=Eh;function wc(t){return t.stack.split(`
`).filter(function(e){return e.indexOf(__filename)<0})}i(wc,"filter")});var Pc=$((xc,kc)=>{var Th=require("path"),at=vc(),qn=require("events").EventEmitter;kc.exports=xc=at;function Wn(t){return function(e){let n,r=Array.prototype.slice.call(arguments,1);if(typeof r[r.length-1]=="function"){let s=r[r.length-1];n=i(function(a){a&&s(a)},"errBack")}let o=new Fi(this,e,n);return t.call(this,o,r)}}i(Wn,"normalizeMethod");function Gs(t,e){for(let n in e.prototype)t.prototype[n]=e.prototype[n]}i(Gs,"inherits");at.cached={Database:i(function(t,e,n){if(t===""||t===":memory:")return new He(t,e,n);let r;if(t=Th.resolve(t),!at.cached.objects[t])r=at.cached.objects[t]=new He(t,e,n);else{r=at.cached.objects[t];let s=typeof e=="number"?n:e;if(typeof s=="function"){let a=function(){s.call(r,null)};var o=a;i(a,"cb"),r.open?process.nextTick(a):r.once("open",a)}}return r},"Database"),objects:{}};var He=at.Database,Fi=at.Statement,Hs=at.Backup;Gs(He,qn);Gs(Fi,qn);Gs(Hs,qn);He.prototype.prepare=Wn(function(t,e){return e.length?t.bind.apply(t,e):t});He.prototype.run=Wn(function(t,e){return t.run.apply(t,e).finalize(),this});He.prototype.get=Wn(function(t,e){return t.get.apply(t,e).finalize(),this});He.prototype.all=Wn(function(t,e){return t.all.apply(t,e).finalize(),this});He.prototype.each=Wn(function(t,e){return t.each.apply(t,e).finalize(),this});He.prototype.map=Wn(function(t,e){return t.map.apply(t,e).finalize(),this});He.prototype.backup=function(){let t;return arguments.length<=2?t=new Hs(this,arguments[0],"main","main",!0,arguments[1]):t=new Hs(this,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),t.retryErrors=[at.BUSY,at.LOCKED],t};Fi.prototype.map=function(){let t=Array.prototype.slice.call(arguments),e=t.pop();return t.push(function(n,r){if(n)return e(n);let o={};if(r.length){let s=Object.keys(r[0]),a=s[0];if(s.length>2)for(let u=0;u<r.length;u++)o[r[u][a]]=r[u];else{let u=s[1];for(let d=0;d<r.length;d++)o[r[d][a]]=r[d][u]}}e(n,o)}),this.all.apply(this,t)};var Tc=!1,Zs=["trace","profile","change"];He.prototype.addListener=He.prototype.on=function(t){let e=qn.prototype.addListener.apply(this,arguments);return Zs.indexOf(t)>=0&&this.configure(t,!0),e};He.prototype.removeListener=function(t){let e=qn.prototype.removeListener.apply(this,arguments);return Zs.indexOf(t)>=0&&!this._events[t]&&this.configure(t,!1),e};He.prototype.removeAllListeners=function(t){let e=qn.prototype.removeAllListeners.apply(this,arguments);return Zs.indexOf(t)>=0&&this.configure(t,!1),e};at.verbose=function(){if(!Tc){let t=Ec();["prepare","get","run","all","each","map","close","exec"].forEach(function(e){t.extendTrace(He.prototype,e)}),["bind","get","run","all","each","map","reset","finalize"].forEach(function(e){t.extendTrace(Fi.prototype,e)}),Tc=!0}return at}});var Bn=$(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.stringArray=Be.array=Be.func=Be.error=Be.number=Be.string=Be.boolean=void 0;function kh(t){return t===!0||t===!1}i(kh,"boolean");Be.boolean=kh;function Mc(t){return typeof t=="string"||t instanceof String}i(Mc,"string");Be.string=Mc;function Ph(t){return typeof t=="number"||t instanceof Number}i(Ph,"number");Be.number=Ph;function Rh(t){return t instanceof Error}i(Rh,"error");Be.error=Rh;function Ih(t){return typeof t=="function"}i(Ih,"func");Be.func=Ih;function Cc(t){return Array.isArray(t)}i(Cc,"array");Be.array=Cc;function Mh(t){return Cc(t)&&t.every(e=>Mc(e))}i(Mh,"stringArray");Be.stringArray=Mh});var va=$(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});Q.Message=Q.NotificationType9=Q.NotificationType8=Q.NotificationType7=Q.NotificationType6=Q.NotificationType5=Q.NotificationType4=Q.NotificationType3=Q.NotificationType2=Q.NotificationType1=Q.NotificationType0=Q.NotificationType=Q.RequestType9=Q.RequestType8=Q.RequestType7=Q.RequestType6=Q.RequestType5=Q.RequestType4=Q.RequestType3=Q.RequestType2=Q.RequestType1=Q.RequestType=Q.RequestType0=Q.AbstractMessageSignature=Q.ParameterStructures=Q.ResponseError=Q.ErrorCodes=void 0;var _n=Bn(),Js;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(Js||(Q.ErrorCodes=Js={}));var Ks=class t extends Error{static{i(this,"ResponseError")}constructor(e,n,r){super(n),this.code=_n.number(e)?e:Js.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};Q.ResponseError=Ks;var Qe=class t{static{i(this,"ParameterStructures")}constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};Q.ParameterStructures=Qe;Qe.auto=new Qe("auto");Qe.byPosition=new Qe("byPosition");Qe.byName=new Qe("byName");var ve=class{static{i(this,"AbstractMessageSignature")}constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return Qe.auto}};Q.AbstractMessageSignature=ve;var Xs=class extends ve{static{i(this,"RequestType0")}constructor(e){super(e,0)}};Q.RequestType0=Xs;var Ys=class extends ve{static{i(this,"RequestType")}constructor(e,n=Qe.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};Q.RequestType=Ys;var ea=class extends ve{static{i(this,"RequestType1")}constructor(e,n=Qe.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};Q.RequestType1=ea;var ta=class extends ve{static{i(this,"RequestType2")}constructor(e){super(e,2)}};Q.RequestType2=ta;var na=class extends ve{static{i(this,"RequestType3")}constructor(e){super(e,3)}};Q.RequestType3=na;var ra=class extends ve{static{i(this,"RequestType4")}constructor(e){super(e,4)}};Q.RequestType4=ra;var ia=class extends ve{static{i(this,"RequestType5")}constructor(e){super(e,5)}};Q.RequestType5=ia;var oa=class extends ve{static{i(this,"RequestType6")}constructor(e){super(e,6)}};Q.RequestType6=oa;var sa=class extends ve{static{i(this,"RequestType7")}constructor(e){super(e,7)}};Q.RequestType7=sa;var aa=class extends ve{static{i(this,"RequestType8")}constructor(e){super(e,8)}};Q.RequestType8=aa;var ua=class extends ve{static{i(this,"RequestType9")}constructor(e){super(e,9)}};Q.RequestType9=ua;var la=class extends ve{static{i(this,"NotificationType")}constructor(e,n=Qe.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};Q.NotificationType=la;var ca=class extends ve{static{i(this,"NotificationType0")}constructor(e){super(e,0)}};Q.NotificationType0=ca;var da=class extends ve{static{i(this,"NotificationType1")}constructor(e,n=Qe.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};Q.NotificationType1=da;var fa=class extends ve{static{i(this,"NotificationType2")}constructor(e){super(e,2)}};Q.NotificationType2=fa;var ma=class extends ve{static{i(this,"NotificationType3")}constructor(e){super(e,3)}};Q.NotificationType3=ma;var pa=class extends ve{static{i(this,"NotificationType4")}constructor(e){super(e,4)}};Q.NotificationType4=pa;var ga=class extends ve{static{i(this,"NotificationType5")}constructor(e){super(e,5)}};Q.NotificationType5=ga;var ha=class extends ve{static{i(this,"NotificationType6")}constructor(e){super(e,6)}};Q.NotificationType6=ha;var _a=class extends ve{static{i(this,"NotificationType7")}constructor(e){super(e,7)}};Q.NotificationType7=_a;var ya=class extends ve{static{i(this,"NotificationType8")}constructor(e){super(e,8)}};Q.NotificationType8=ya;var ba=class extends ve{static{i(this,"NotificationType9")}constructor(e){super(e,9)}};Q.NotificationType9=ba;var Lc;(function(t){function e(o){let s=o;return s&&_n.string(s.method)&&(_n.string(s.id)||_n.number(s.id))}i(e,"isRequest"),t.isRequest=e;function n(o){let s=o;return s&&_n.string(s.method)&&o.id===void 0}i(n,"isNotification"),t.isNotification=n;function r(o){let s=o;return s&&(s.result!==void 0||!!s.error)&&(_n.string(s.id)||_n.number(s.id)||s.id===null)}i(r,"isResponse"),t.isResponse=r})(Lc||(Q.Message=Lc={}))});var Sa=$(Ht=>{"use strict";var Nc;Object.defineProperty(Ht,"__esModule",{value:!0});Ht.LRUCache=Ht.LinkedMap=Ht.Touch=void 0;var ze;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(ze||(Ht.Touch=ze={}));var Bi=class{static{i(this,"LinkedMap")}constructor(){this[Nc]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,n=ze.None){let r=this._map.get(e);if(r)return n!==ze.None&&this.touch(r,n),r.value}set(e,n,r=ze.None){let o=this._map.get(e);if(o)o.value=n,r!==ze.None&&this.touch(o,r);else{switch(o={key:e,value:n,next:void 0,previous:void 0},r){case ze.None:this.addItemLast(o);break;case ze.First:this.addItemFirst(o);break;case ze.Last:this.addItemLast(o);break;default:this.addItemLast(o);break}this._map.set(e,o),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,o=this._head;for(;o;){if(n?e.bind(n)(o.value,o.key,this):e(o.value,o.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");o=o.next}}keys(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:i(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}},"next")};return r}values(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:i(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}},"next")};return r}entries(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:i(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}},"next")};return r}[(Nc=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==ze.First&&n!==ze.Last)){if(n===ze.First){if(e===this._head)return;let r=e.next,o=e.previous;e===this._tail?(o.next=void 0,this._tail=o):(r.previous=o,o.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===ze.Last){if(e===this._tail)return;let r=e.next,o=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=o,o.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}};Ht.LinkedMap=Bi;var wa=class extends Bi{static{i(this,"LRUCache")}constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=ze.AsNew){return super.get(e,n)}peek(e){return super.get(e,ze.None)}set(e,n){return super.set(e,n,ze.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Ht.LRUCache=wa});var Dc=$(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});zi.Disposable=void 0;var Ac;(function(t){function e(n){return{dispose:n}}i(e,"create"),t.create=e})(Ac||(zi.Disposable=Ac={}))});var Gt=$(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});var Ea;function Ta(){if(Ea===void 0)throw new Error("No runtime abstraction layer installed");return Ea}i(Ta,"RAL");(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");Ea=n}i(e,"install"),t.install=e})(Ta||(Ta={}));xa.default=Ta});var $n=$(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.Emitter=zn.Event=void 0;var Ch=Gt(),Oc;(function(t){let e={dispose(){}};t.None=function(){return e}})(Oc||(zn.Event=Oc={}));var ka=class{static{i(this,"CallbackList")}add(e,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:i(()=>this.remove(e,n),"dispose")})}remove(e,n=null){if(!this._callbacks)return;let r=!1;for(let o=0,s=this._callbacks.length;o<s;o++)if(this._callbacks[o]===e)if(this._contexts[o]===n){this._callbacks.splice(o,1),this._contexts.splice(o,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),o=this._contexts.slice(0);for(let s=0,a=r.length;s<a;s++)try{n.push(r[s].apply(o[s],e))}catch(u){(0,Ch.default)().console.error(u)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},$i=class t{static{i(this,"Emitter")}constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,r)=>{this._callbacks||(this._callbacks=new ka),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let o={dispose:i(()=>{this._callbacks&&(this._callbacks.remove(e,n),o.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))},"dispose")};return Array.isArray(r)&&r.push(o),o}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};zn.Emitter=$i;$i._noop=function(){}});var Gi=$(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.CancellationTokenSource=Vn.CancellationToken=void 0;var Lh=Gt(),Nh=Bn(),Pa=$n(),Vi;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Pa.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Pa.Event.None});function e(n){let r=n;return r&&(r===t.None||r===t.Cancelled||Nh.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}i(e,"is"),t.is=e})(Vi||(Vn.CancellationToken=Vi={}));var Ah=Object.freeze(function(t,e){let n=(0,Lh.default)().timer.setTimeout(t.bind(e),0);return{dispose(){n.dispose()}}}),Hi=class{static{i(this,"MutableToken")}constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Ah:(this._emitter||(this._emitter=new Pa.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Ra=class{static{i(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new Hi),this._token}cancel(){this._token?this._token.cancel():this._token=Vi.Cancelled}dispose(){this._token?this._token instanceof Hi&&this._token.dispose():this._token=Vi.None}};Vn.CancellationTokenSource=Ra});var Fc=$(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.SharedArrayReceiverStrategy=Hn.SharedArraySenderStrategy=void 0;var Dh=Gi(),Lr;(function(t){t.Continue=0,t.Cancelled=1})(Lr||(Lr={}));var Ia=class{static{i(this,"SharedArraySenderStrategy")}constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let n=new SharedArrayBuffer(4),r=new Int32Array(n,0,1);r[0]=Lr.Continue,this.buffers.set(e.id,n),e.$cancellationData=n}async sendCancellation(e,n){let r=this.buffers.get(n);if(r===void 0)return;let o=new Int32Array(r,0,1);Atomics.store(o,0,Lr.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};Hn.SharedArraySenderStrategy=Ia;var Ma=class{static{i(this,"SharedArrayBufferCancellationToken")}constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===Lr.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},Ca=class{static{i(this,"SharedArrayBufferCancellationTokenSource")}constructor(e){this.token=new Ma(e)}cancel(){}dispose(){}},La=class{static{i(this,"SharedArrayReceiverStrategy")}constructor(){this.kind="request"}createCancellationTokenSource(e){let n=e.$cancellationData;return n===void 0?new Dh.CancellationTokenSource:new Ca(n)}};Hn.SharedArrayReceiverStrategy=La});var Aa=$(Zi=>{"use strict";Object.defineProperty(Zi,"__esModule",{value:!0});Zi.Semaphore=void 0;var Oh=Gt(),Na=class{static{i(this,"Semaphore")}constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Oh.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};Zi.Semaphore=Na});var qc=$(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.ReadableStreamMessageReader=Zt.AbstractMessageReader=Zt.MessageReader=void 0;var Oa=Gt(),Gn=Bn(),Da=$n(),Fh=Aa(),jc;(function(t){function e(n){let r=n;return r&&Gn.func(r.listen)&&Gn.func(r.dispose)&&Gn.func(r.onError)&&Gn.func(r.onClose)&&Gn.func(r.onPartialMessage)}i(e,"is"),t.is=e})(jc||(Zt.MessageReader=jc={}));var Qi=class{static{i(this,"AbstractMessageReader")}constructor(){this.errorEmitter=new Da.Emitter,this.closeEmitter=new Da.Emitter,this.partialMessageEmitter=new Da.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Gn.string(e.message)?e.message:"unknown"}`)}};Zt.AbstractMessageReader=Qi;var Fa;(function(t){function e(n){let r,o,s,a=new Map,u,d=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(s=n.contentDecoder,a.set(s.name,s)),n.contentDecoders!==void 0)for(let f of n.contentDecoders)a.set(f.name,f);if(n.contentTypeDecoder!==void 0&&(u=n.contentTypeDecoder,d.set(u.name,u)),n.contentTypeDecoders!==void 0)for(let f of n.contentTypeDecoders)d.set(f.name,f)}return u===void 0&&(u=(0,Oa.default)().applicationJson.decoder,d.set(u.name,u)),{charset:r,contentDecoder:s,contentDecoders:a,contentTypeDecoder:u,contentTypeDecoders:d}}i(e,"fromOptions"),t.fromOptions=e})(Fa||(Fa={}));var ja=class extends Qi{static{i(this,"ReadableStreamMessageReader")}constructor(e,n){super(),this.readable=e,this.options=Fa.fromOptions(n),this.buffer=(0,Oa.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new Fh.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let o=r.get("content-length");if(!o){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(r))}`));return}let s=parseInt(o);if(isNaN(s)){this.fireError(new Error(`Content-Length value must be a number. Got ${o}`));return}this.nextMessageLength=s}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(n):n,o=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(o)}).catch(r=>{this.fireError(r)})}}catch(n){this.fireError(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,Oa.default)().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Zt.ReadableStreamMessageReader=ja});var $c=$(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.WriteableStreamMessageWriter=Qt.AbstractMessageWriter=Qt.MessageWriter=void 0;var Wc=Gt(),Nr=Bn(),jh=Aa(),Uc=$n(),qh="Content-Length: ",Bc=`\r
`,zc;(function(t){function e(n){let r=n;return r&&Nr.func(r.dispose)&&Nr.func(r.onClose)&&Nr.func(r.onError)&&Nr.func(r.write)}i(e,"is"),t.is=e})(zc||(Qt.MessageWriter=zc={}));var Ji=class{static{i(this,"AbstractMessageWriter")}constructor(){this.errorEmitter=new Uc.Emitter,this.closeEmitter=new Uc.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,r){this.errorEmitter.fire([this.asError(e),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${Nr.string(e.message)?e.message:"unknown"}`)}};Qt.AbstractMessageWriter=Ji;var qa;(function(t){function e(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,Wc.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,Wc.default)().applicationJson.encoder}}i(e,"fromOptions"),t.fromOptions=e})(qa||(qa={}));var Wa=class extends Ji{static{i(this,"WriteableStreamMessageWriter")}constructor(e,n){super(),this.writable=e,this.options=qa.fromOptions(n),this.errorCount=0,this.writeSemaphore=new jh.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let o=[];return o.push(qh,r.byteLength.toString(),Bc),o.push(Bc),this.doWrite(e,o,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(o){return this.handleError(o,e),Promise.reject(o)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};Qt.WriteableStreamMessageWriter=Wa});var Vc=$(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});Ki.AbstractMessageBuffer=void 0;var Wh=13,Uh=10,Bh=`\r
`,Ua=class{static{i(this,"AbstractMessageBuffer")}constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let n=0,r=0,o=0,s=0;e:for(;r<this._chunks.length;){let f=this._chunks[r];for(o=0;o<f.length;){switch(f[o]){case Wh:switch(n){case 0:n=1;break;case 2:n=3;break;default:n=0}break;case Uh:switch(n){case 1:n=2;break;case 3:n=4,o++;break e;default:n=0}break;default:n=0}o++}s+=f.byteLength,r++}if(n!==4)return;let a=this._read(s+o),u=new Map,d=this.toString(a,"ascii").split(Bh);if(d.length<2)return u;for(let f=0;f<d.length-2;f++){let p=d[f],b=p.indexOf(":");if(b===-1)throw new Error(`Message header must separate key and value using ':'
${p}`);let v=p.substr(0,b),T=p.substr(b+1).trim();u.set(e?v.toLowerCase():v,T)}return u}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],a=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,a}let n=this.allocNative(e),r=0,o=0;for(;e>0;){let s=this._chunks[o];if(s.byteLength>e){let a=s.slice(0,e);n.set(a,r),r+=e,this._chunks[o]=s.slice(e),this._totalLength-=e,e-=e}else n.set(s,r),r+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return n}};Ki.AbstractMessageBuffer=Ua});var Jc=$(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.createMessageConnection=ne.ConnectionOptions=ne.MessageStrategy=ne.CancellationStrategy=ne.CancellationSenderStrategy=ne.CancellationReceiverStrategy=ne.RequestCancellationReceiverStrategy=ne.IdCancellationReceiverStrategy=ne.ConnectionStrategy=ne.ConnectionError=ne.ConnectionErrors=ne.LogTraceNotification=ne.SetTraceNotification=ne.TraceFormat=ne.TraceValues=ne.Trace=ne.NullLogger=ne.ProgressType=ne.ProgressToken=void 0;var Hc=Gt(),Ee=Bn(),J=va(),Gc=Sa(),Ar=$n(),Ba=Gi(),Fr;(function(t){t.type=new J.NotificationType("$/cancelRequest")})(Fr||(Fr={}));var za;(function(t){function e(n){return typeof n=="string"||typeof n=="number"}i(e,"is"),t.is=e})(za||(ne.ProgressToken=za={}));var Dr;(function(t){t.type=new J.NotificationType("$/progress")})(Dr||(Dr={}));var $a=class{static{i(this,"ProgressType")}constructor(){}};ne.ProgressType=$a;var Va;(function(t){function e(n){return Ee.func(n)}i(e,"is"),t.is=e})(Va||(Va={}));ne.NullLogger=Object.freeze({error:i(()=>{},"error"),warn:i(()=>{},"warn"),info:i(()=>{},"info"),log:i(()=>{},"log")});var ce;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(ce||(ne.Trace=ce={}));var Zc;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(Zc||(ne.TraceValues=Zc={}));(function(t){function e(r){if(!Ee.string(r))return t.Off;switch(r=r.toLowerCase(),r){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}i(e,"fromString"),t.fromString=e;function n(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}i(n,"toString"),t.toString=n})(ce||(ne.Trace=ce={}));var nt;(function(t){t.Text="text",t.JSON="json"})(nt||(ne.TraceFormat=nt={}));(function(t){function e(n){return Ee.string(n)?(n=n.toLowerCase(),n==="json"?t.JSON:t.Text):t.Text}i(e,"fromString"),t.fromString=e})(nt||(ne.TraceFormat=nt={}));var Ha;(function(t){t.type=new J.NotificationType("$/setTrace")})(Ha||(ne.SetTraceNotification=Ha={}));var Xi;(function(t){t.type=new J.NotificationType("$/logTrace")})(Xi||(ne.LogTraceNotification=Xi={}));var Or;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(Or||(ne.ConnectionErrors=Or={}));var Zn=class t extends Error{static{i(this,"ConnectionError")}constructor(e,n){super(n),this.code=e,Object.setPrototypeOf(this,t.prototype)}};ne.ConnectionError=Zn;var Ga;(function(t){function e(n){let r=n;return r&&Ee.func(r.cancelUndispatched)}i(e,"is"),t.is=e})(Ga||(ne.ConnectionStrategy=Ga={}));var Yi;(function(t){function e(n){let r=n;return r&&(r.kind===void 0||r.kind==="id")&&Ee.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Ee.func(r.dispose))}i(e,"is"),t.is=e})(Yi||(ne.IdCancellationReceiverStrategy=Yi={}));var Za;(function(t){function e(n){let r=n;return r&&r.kind==="request"&&Ee.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Ee.func(r.dispose))}i(e,"is"),t.is=e})(Za||(ne.RequestCancellationReceiverStrategy=Za={}));var eo;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new Ba.CancellationTokenSource}});function e(n){return Yi.is(n)||Za.is(n)}i(e,"is"),t.is=e})(eo||(ne.CancellationReceiverStrategy=eo={}));var to;(function(t){t.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(Fr.type,{id:r})},cleanup(n){}});function e(n){let r=n;return r&&Ee.func(r.sendCancellation)&&Ee.func(r.cleanup)}i(e,"is"),t.is=e})(to||(ne.CancellationSenderStrategy=to={}));var no;(function(t){t.Message=Object.freeze({receiver:eo.Message,sender:to.Message});function e(n){let r=n;return r&&eo.is(r.receiver)&&to.is(r.sender)}i(e,"is"),t.is=e})(no||(ne.CancellationStrategy=no={}));var ro;(function(t){function e(n){let r=n;return r&&Ee.func(r.handleMessage)}i(e,"is"),t.is=e})(ro||(ne.MessageStrategy=ro={}));var Qc;(function(t){function e(n){let r=n;return r&&(no.is(r.cancellationStrategy)||Ga.is(r.connectionStrategy)||ro.is(r.messageStrategy))}i(e,"is"),t.is=e})(Qc||(ne.ConnectionOptions=Qc={}));var yt;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(yt||(yt={}));function zh(t,e,n,r){let o=n!==void 0?n:ne.NullLogger,s=0,a=0,u=0,d="2.0",f,p=new Map,b,v=new Map,T=new Map,A,P=new Gc.LinkedMap,j=new Map,O=new Set,I=new Map,V=ce.Off,X=nt.Text,Y,fe=yt.New,oe=new Ar.Emitter,pe=new Ar.Emitter,De=new Ar.Emitter,Oe=new Ar.Emitter,D=new Ar.Emitter,E=r&&r.cancellationStrategy?r.cancellationStrategy:no.Message;function W(h){if(h===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+h.toString()}i(W,"createRequestQueueKey");function B(h){return h===null?"res-unknown-"+(++u).toString():"res-"+h.toString()}i(B,"createResponseQueueKey");function x(){return"not-"+(++a).toString()}i(x,"createNotificationQueueKey");function M(h,R){J.Message.isRequest(R)?h.set(W(R.id),R):J.Message.isResponse(R)?h.set(B(R.id),R):h.set(x(),R)}i(M,"addMessageToQueue");function N(h){}i(N,"cancelUndispatched");function z(){return fe===yt.Listening}i(z,"isListening");function H(){return fe===yt.Closed}i(H,"isClosed");function U(){return fe===yt.Disposed}i(U,"isDisposed");function K(){(fe===yt.New||fe===yt.Listening)&&(fe=yt.Closed,pe.fire(void 0))}i(K,"closeHandler");function ee(h){oe.fire([h,void 0,void 0])}i(ee,"readErrorHandler");function Pe(h){oe.fire(h)}i(Pe,"writeErrorHandler"),t.onClose(K),t.onError(ee),e.onClose(K),e.onError(Pe);function le(){A||P.size===0||(A=(0,Hc.default)().timer.setImmediate(()=>{A=void 0,vt()}))}i(le,"triggerMessageQueue");function Ge(h){J.Message.isRequest(h)?Br(h):J.Message.isNotification(h)?$r(h):J.Message.isResponse(h)?zr(h):Tn(h)}i(Ge,"handleMessage");function vt(){if(P.size===0)return;let h=P.shift();try{let R=r?.messageStrategy;ro.is(R)?R.handleMessage(h,Ge):Ge(h)}finally{le()}}i(vt,"processMessageQueue");let Ur=i(h=>{try{if(J.Message.isNotification(h)&&h.method===Fr.type.method){let R=h.params.id,q=W(R),G=P.get(q);if(J.Message.isRequest(G)){let de=r?.connectionStrategy,ye=de&&de.cancelUndispatched?de.cancelUndispatched(G,N):void 0;if(ye&&(ye.error!==void 0||ye.result!==void 0)){P.delete(q),I.delete(R),ye.id=G.id,tn(ye,h.method,Date.now()),e.write(ye).catch(()=>o.error("Sending response for canceled message failed."));return}}let me=I.get(R);if(me!==void 0){me.cancel(),xn(h);return}else O.add(R)}M(P,h)}finally{le()}},"callback");function Br(h){if(U())return;function R(re,ge,ue){let Te={jsonrpc:d,id:h.id};re instanceof J.ResponseError?Te.error=re.toJson():Te.result=re===void 0?null:re,tn(Te,ge,ue),e.write(Te).catch(()=>o.error("Sending response failed."))}i(R,"reply");function q(re,ge,ue){let Te={jsonrpc:d,id:h.id,error:re.toJson()};tn(Te,ge,ue),e.write(Te).catch(()=>o.error("Sending response failed."))}i(q,"replyError");function G(re,ge,ue){re===void 0&&(re=null);let Te={jsonrpc:d,id:h.id,result:re};tn(Te,ge,ue),e.write(Te).catch(()=>o.error("Sending response failed."))}i(G,"replySuccess"),Gr(h);let me=p.get(h.method),de,ye;me&&(de=me.type,ye=me.handler);let we=Date.now();if(ye||f){let re=h.id??String(Date.now()),ge=Yi.is(E.receiver)?E.receiver.createCancellationTokenSource(re):E.receiver.createCancellationTokenSource(h);h.id!==null&&O.has(h.id)&&ge.cancel(),h.id!==null&&I.set(re,ge);try{let ue;if(ye)if(h.params===void 0){if(de!==void 0&&de.numberOfParams!==0){q(new J.ResponseError(J.ErrorCodes.InvalidParams,`Request ${h.method} defines ${de.numberOfParams} params but received none.`),h.method,we);return}ue=ye(ge.token)}else if(Array.isArray(h.params)){if(de!==void 0&&de.parameterStructures===J.ParameterStructures.byName){q(new J.ResponseError(J.ErrorCodes.InvalidParams,`Request ${h.method} defines parameters by name but received parameters by position`),h.method,we);return}ue=ye(...h.params,ge.token)}else{if(de!==void 0&&de.parameterStructures===J.ParameterStructures.byPosition){q(new J.ResponseError(J.ErrorCodes.InvalidParams,`Request ${h.method} defines parameters by position but received parameters by name`),h.method,we);return}ue=ye(h.params,ge.token)}else f&&(ue=f(h.method,h.params,ge.token));let Te=ue;ue?Te.then?Te.then(Ne=>{I.delete(re),R(Ne,h.method,we)},Ne=>{I.delete(re),Ne instanceof J.ResponseError?q(Ne,h.method,we):Ne&&Ee.string(Ne.message)?q(new J.ResponseError(J.ErrorCodes.InternalError,`Request ${h.method} failed with message: ${Ne.message}`),h.method,we):q(new J.ResponseError(J.ErrorCodes.InternalError,`Request ${h.method} failed unexpectedly without providing any details.`),h.method,we)}):(I.delete(re),R(ue,h.method,we)):(I.delete(re),G(ue,h.method,we))}catch(ue){I.delete(re),ue instanceof J.ResponseError?R(ue,h.method,we):ue&&Ee.string(ue.message)?q(new J.ResponseError(J.ErrorCodes.InternalError,`Request ${h.method} failed with message: ${ue.message}`),h.method,we):q(new J.ResponseError(J.ErrorCodes.InternalError,`Request ${h.method} failed unexpectedly without providing any details.`),h.method,we)}}else q(new J.ResponseError(J.ErrorCodes.MethodNotFound,`Unhandled method ${h.method}`),h.method,we)}i(Br,"handleRequest");function zr(h){if(!U())if(h.id===null)h.error?o.error(`Received response message without id: Error is: 
${JSON.stringify(h.error,void 0,4)}`):o.error("Received response message without id. No further error information provided.");else{let R=h.id,q=j.get(R);if(Zr(h,q),q!==void 0){j.delete(R);try{if(h.error){let G=h.error;q.reject(new J.ResponseError(G.code,G.message,G.data))}else if(h.result!==void 0)q.resolve(h.result);else throw new Error("Should never happen.")}catch(G){G.message?o.error(`Response handler '${q.method}' failed with message: ${G.message}`):o.error(`Response handler '${q.method}' failed unexpectedly.`)}}}}i(zr,"handleResponse");function $r(h){if(U())return;let R,q;if(h.method===Fr.type.method){let G=h.params.id;O.delete(G),xn(h);return}else{let G=v.get(h.method);G&&(q=G.handler,R=G.type)}if(q||b)try{if(xn(h),q)if(h.params===void 0)R!==void 0&&R.numberOfParams!==0&&R.parameterStructures!==J.ParameterStructures.byName&&o.error(`Notification ${h.method} defines ${R.numberOfParams} params but received none.`),q();else if(Array.isArray(h.params)){let G=h.params;h.method===Dr.type.method&&G.length===2&&za.is(G[0])?q({token:G[0],value:G[1]}):(R!==void 0&&(R.parameterStructures===J.ParameterStructures.byName&&o.error(`Notification ${h.method} defines parameters by name but received parameters by position`),R.numberOfParams!==h.params.length&&o.error(`Notification ${h.method} defines ${R.numberOfParams} params but received ${G.length} arguments`)),q(...G))}else R!==void 0&&R.parameterStructures===J.ParameterStructures.byPosition&&o.error(`Notification ${h.method} defines parameters by position but received parameters by name`),q(h.params);else b&&b(h.method,h.params)}catch(G){G.message?o.error(`Notification handler '${h.method}' failed with message: ${G.message}`):o.error(`Notification handler '${h.method}' failed unexpectedly.`)}else De.fire(h)}i($r,"handleNotification");function Tn(h){if(!h){o.error("Received empty message.");return}o.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(h,null,4)}`);let R=h;if(Ee.string(R.id)||Ee.number(R.id)){let q=R.id,G=j.get(q);G&&G.reject(new Error("The received response has neither a result nor an error property."))}}i(Tn,"handleInvalidMessage");function dt(h){if(h!=null)switch(V){case ce.Verbose:return JSON.stringify(h,null,4);case ce.Compact:return JSON.stringify(h);default:return}}i(dt,"stringifyTrace");function Vr(h){if(!(V===ce.Off||!Y))if(X===nt.Text){let R;(V===ce.Verbose||V===ce.Compact)&&h.params&&(R=`Params: ${dt(h.params)}

`),Y.log(`Sending request '${h.method} - (${h.id})'.`,R)}else It("send-request",h)}i(Vr,"traceSendingRequest");function Hr(h){if(!(V===ce.Off||!Y))if(X===nt.Text){let R;(V===ce.Verbose||V===ce.Compact)&&(h.params?R=`Params: ${dt(h.params)}

`:R=`No parameters provided.

`),Y.log(`Sending notification '${h.method}'.`,R)}else It("send-notification",h)}i(Hr,"traceSendingNotification");function tn(h,R,q){if(!(V===ce.Off||!Y))if(X===nt.Text){let G;(V===ce.Verbose||V===ce.Compact)&&(h.error&&h.error.data?G=`Error data: ${dt(h.error.data)}

`:h.result?G=`Result: ${dt(h.result)}

`:h.error===void 0&&(G=`No result returned.

`)),Y.log(`Sending response '${R} - (${h.id})'. Processing request took ${Date.now()-q}ms`,G)}else It("send-response",h)}i(tn,"traceSendingResponse");function Gr(h){if(!(V===ce.Off||!Y))if(X===nt.Text){let R;(V===ce.Verbose||V===ce.Compact)&&h.params&&(R=`Params: ${dt(h.params)}

`),Y.log(`Received request '${h.method} - (${h.id})'.`,R)}else It("receive-request",h)}i(Gr,"traceReceivedRequest");function xn(h){if(!(V===ce.Off||!Y||h.method===Xi.type.method))if(X===nt.Text){let R;(V===ce.Verbose||V===ce.Compact)&&(h.params?R=`Params: ${dt(h.params)}

`:R=`No parameters provided.

`),Y.log(`Received notification '${h.method}'.`,R)}else It("receive-notification",h)}i(xn,"traceReceivedNotification");function Zr(h,R){if(!(V===ce.Off||!Y))if(X===nt.Text){let q;if((V===ce.Verbose||V===ce.Compact)&&(h.error&&h.error.data?q=`Error data: ${dt(h.error.data)}

`:h.result?q=`Result: ${dt(h.result)}

`:h.error===void 0&&(q=`No result returned.

`)),R){let G=h.error?` Request failed: ${h.error.message} (${h.error.code}).`:"";Y.log(`Received response '${R.method} - (${h.id})' in ${Date.now()-R.timerStart}ms.${G}`,q)}else Y.log(`Received response ${h.id} without active response promise.`,q)}else It("receive-response",h)}i(Zr,"traceReceivedResponse");function It(h,R){if(!Y||V===ce.Off)return;let q={isLSPMessage:!0,type:h,message:R,timestamp:Date.now()};Y.log(q)}i(It,"logLSPMessage");function Wt(){if(H())throw new Zn(Or.Closed,"Connection is closed.");if(U())throw new Zn(Or.Disposed,"Connection is disposed.")}i(Wt,"throwIfClosedOrDisposed");function Qr(){if(z())throw new Zn(Or.AlreadyListening,"Connection is already listening")}i(Qr,"throwIfListening");function Jr(){if(!z())throw new Error("Call listen() first.")}i(Jr,"throwIfNotListening");function wt(h){return h===void 0?null:h}i(wt,"undefinedToNull");function ur(h){if(h!==null)return h}i(ur,"nullToUndefined");function lr(h){return h!=null&&!Array.isArray(h)&&typeof h=="object"}i(lr,"isNamedParam");function kn(h,R){switch(h){case J.ParameterStructures.auto:return lr(R)?ur(R):[wt(R)];case J.ParameterStructures.byName:if(!lr(R))throw new Error("Received parameters by name but param is not an object literal.");return ur(R);case J.ParameterStructures.byPosition:return[wt(R)];default:throw new Error(`Unknown parameter structure ${h.toString()}`)}}i(kn,"computeSingleParam");function cr(h,R){let q,G=h.numberOfParams;switch(G){case 0:q=void 0;break;case 1:q=kn(h.parameterStructures,R[0]);break;default:q=[];for(let me=0;me<R.length&&me<G;me++)q.push(wt(R[me]));if(R.length<G)for(let me=R.length;me<G;me++)q.push(null);break}return q}i(cr,"computeMessageParams");let Mt={sendNotification:i((h,...R)=>{Wt();let q,G;if(Ee.string(h)){q=h;let de=R[0],ye=0,we=J.ParameterStructures.auto;J.ParameterStructures.is(de)&&(ye=1,we=de);let re=R.length,ge=re-ye;switch(ge){case 0:G=void 0;break;case 1:G=kn(we,R[ye]);break;default:if(we===J.ParameterStructures.byName)throw new Error(`Received ${ge} parameters for 'by Name' notification parameter structure.`);G=R.slice(ye,re).map(ue=>wt(ue));break}}else{let de=R;q=h.method,G=cr(h,de)}let me={jsonrpc:d,method:q,params:G};return Hr(me),e.write(me).catch(de=>{throw o.error("Sending notification failed."),de})},"sendNotification"),onNotification:i((h,R)=>{Wt();let q;return Ee.func(h)?b=h:R&&(Ee.string(h)?(q=h,v.set(h,{type:void 0,handler:R})):(q=h.method,v.set(h.method,{type:h,handler:R}))),{dispose:i(()=>{q!==void 0?v.delete(q):b=void 0},"dispose")}},"onNotification"),onProgress:i((h,R,q)=>{if(T.has(R))throw new Error(`Progress handler for token ${R} already registered`);return T.set(R,q),{dispose:i(()=>{T.delete(R)},"dispose")}},"onProgress"),sendProgress:i((h,R,q)=>Mt.sendNotification(Dr.type,{token:R,value:q}),"sendProgress"),onUnhandledProgress:Oe.event,sendRequest:i((h,...R)=>{Wt(),Jr();let q,G,me;if(Ee.string(h)){q=h;let re=R[0],ge=R[R.length-1],ue=0,Te=J.ParameterStructures.auto;J.ParameterStructures.is(re)&&(ue=1,Te=re);let Ne=R.length;Ba.CancellationToken.is(ge)&&(Ne=Ne-1,me=ge);let Ye=Ne-ue;switch(Ye){case 0:G=void 0;break;case 1:G=kn(Te,R[ue]);break;default:if(Te===J.ParameterStructures.byName)throw new Error(`Received ${Ye} parameters for 'by Name' request parameter structure.`);G=R.slice(ue,Ne).map(Kr=>wt(Kr));break}}else{let re=R;q=h.method,G=cr(h,re);let ge=h.numberOfParams;me=Ba.CancellationToken.is(re[ge])?re[ge]:void 0}let de=s++,ye;me&&(ye=me.onCancellationRequested(()=>{let re=E.sender.sendCancellation(Mt,de);return re===void 0?(o.log(`Received no promise from cancellation strategy when cancelling id ${de}`),Promise.resolve()):re.catch(()=>{o.log(`Sending cancellation messages for id ${de} failed`)})}));let we={jsonrpc:d,id:de,method:q,params:G};return Vr(we),typeof E.sender.enableCancellation=="function"&&E.sender.enableCancellation(we),new Promise(async(re,ge)=>{let ue=i(Ye=>{re(Ye),E.sender.cleanup(de),ye?.dispose()},"resolveWithCleanup"),Te=i(Ye=>{ge(Ye),E.sender.cleanup(de),ye?.dispose()},"rejectWithCleanup"),Ne={method:q,timerStart:Date.now(),resolve:ue,reject:Te};try{await e.write(we),j.set(de,Ne)}catch(Ye){throw o.error("Sending request failed."),Ne.reject(new J.ResponseError(J.ErrorCodes.MessageWriteError,Ye.message?Ye.message:"Unknown reason")),Ye}})},"sendRequest"),onRequest:i((h,R)=>{Wt();let q=null;return Va.is(h)?(q=void 0,f=h):Ee.string(h)?(q=null,R!==void 0&&(q=h,p.set(h,{handler:R,type:void 0}))):R!==void 0&&(q=h.method,p.set(h.method,{type:h,handler:R})),{dispose:i(()=>{q!==null&&(q!==void 0?p.delete(q):f=void 0)},"dispose")}},"onRequest"),hasPendingResponse:i(()=>j.size>0,"hasPendingResponse"),trace:i(async(h,R,q)=>{let G=!1,me=nt.Text;q!==void 0&&(Ee.boolean(q)?G=q:(G=q.sendNotification||!1,me=q.traceFormat||nt.Text)),V=h,X=me,V===ce.Off?Y=void 0:Y=R,G&&!H()&&!U()&&await Mt.sendNotification(Ha.type,{value:ce.toString(h)})},"trace"),onError:oe.event,onClose:pe.event,onUnhandledNotification:De.event,onDispose:D.event,end:i(()=>{e.end()},"end"),dispose:i(()=>{if(U())return;fe=yt.Disposed,D.fire(void 0);let h=new J.ResponseError(J.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let R of j.values())R.reject(h);j=new Map,I=new Map,O=new Set,P=new Gc.LinkedMap,Ee.func(e.dispose)&&e.dispose(),Ee.func(t.dispose)&&t.dispose()},"dispose"),listen:i(()=>{Wt(),Qr(),fe=yt.Listening,t.listen(Ur)},"listen"),inspect:i(()=>{(0,Hc.default)().console.log("inspect")},"inspect")};return Mt.onNotification(Xi.type,h=>{if(V===ce.Off||!Y)return;let R=V===ce.Verbose||V===ce.Compact;Y.log(h.message,R?h.verbose:void 0)}),Mt.onNotification(Dr.type,h=>{let R=T.get(h.token);R?R(h.value):Oe.fire(h)}),Mt}i(zh,"createMessageConnection");ne.createMessageConnection=zh});var io=$(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.ProgressType=k.ProgressToken=k.createMessageConnection=k.NullLogger=k.ConnectionOptions=k.ConnectionStrategy=k.AbstractMessageBuffer=k.WriteableStreamMessageWriter=k.AbstractMessageWriter=k.MessageWriter=k.ReadableStreamMessageReader=k.AbstractMessageReader=k.MessageReader=k.SharedArrayReceiverStrategy=k.SharedArraySenderStrategy=k.CancellationToken=k.CancellationTokenSource=k.Emitter=k.Event=k.Disposable=k.LRUCache=k.Touch=k.LinkedMap=k.ParameterStructures=k.NotificationType9=k.NotificationType8=k.NotificationType7=k.NotificationType6=k.NotificationType5=k.NotificationType4=k.NotificationType3=k.NotificationType2=k.NotificationType1=k.NotificationType0=k.NotificationType=k.ErrorCodes=k.ResponseError=k.RequestType9=k.RequestType8=k.RequestType7=k.RequestType6=k.RequestType5=k.RequestType4=k.RequestType3=k.RequestType2=k.RequestType1=k.RequestType0=k.RequestType=k.Message=k.RAL=void 0;k.MessageStrategy=k.CancellationStrategy=k.CancellationSenderStrategy=k.CancellationReceiverStrategy=k.ConnectionError=k.ConnectionErrors=k.LogTraceNotification=k.SetTraceNotification=k.TraceFormat=k.TraceValues=k.Trace=void 0;var _e=va();Object.defineProperty(k,"Message",{enumerable:!0,get:i(function(){return _e.Message},"get")});Object.defineProperty(k,"RequestType",{enumerable:!0,get:i(function(){return _e.RequestType},"get")});Object.defineProperty(k,"RequestType0",{enumerable:!0,get:i(function(){return _e.RequestType0},"get")});Object.defineProperty(k,"RequestType1",{enumerable:!0,get:i(function(){return _e.RequestType1},"get")});Object.defineProperty(k,"RequestType2",{enumerable:!0,get:i(function(){return _e.RequestType2},"get")});Object.defineProperty(k,"RequestType3",{enumerable:!0,get:i(function(){return _e.RequestType3},"get")});Object.defineProperty(k,"RequestType4",{enumerable:!0,get:i(function(){return _e.RequestType4},"get")});Object.defineProperty(k,"RequestType5",{enumerable:!0,get:i(function(){return _e.RequestType5},"get")});Object.defineProperty(k,"RequestType6",{enumerable:!0,get:i(function(){return _e.RequestType6},"get")});Object.defineProperty(k,"RequestType7",{enumerable:!0,get:i(function(){return _e.RequestType7},"get")});Object.defineProperty(k,"RequestType8",{enumerable:!0,get:i(function(){return _e.RequestType8},"get")});Object.defineProperty(k,"RequestType9",{enumerable:!0,get:i(function(){return _e.RequestType9},"get")});Object.defineProperty(k,"ResponseError",{enumerable:!0,get:i(function(){return _e.ResponseError},"get")});Object.defineProperty(k,"ErrorCodes",{enumerable:!0,get:i(function(){return _e.ErrorCodes},"get")});Object.defineProperty(k,"NotificationType",{enumerable:!0,get:i(function(){return _e.NotificationType},"get")});Object.defineProperty(k,"NotificationType0",{enumerable:!0,get:i(function(){return _e.NotificationType0},"get")});Object.defineProperty(k,"NotificationType1",{enumerable:!0,get:i(function(){return _e.NotificationType1},"get")});Object.defineProperty(k,"NotificationType2",{enumerable:!0,get:i(function(){return _e.NotificationType2},"get")});Object.defineProperty(k,"NotificationType3",{enumerable:!0,get:i(function(){return _e.NotificationType3},"get")});Object.defineProperty(k,"NotificationType4",{enumerable:!0,get:i(function(){return _e.NotificationType4},"get")});Object.defineProperty(k,"NotificationType5",{enumerable:!0,get:i(function(){return _e.NotificationType5},"get")});Object.defineProperty(k,"NotificationType6",{enumerable:!0,get:i(function(){return _e.NotificationType6},"get")});Object.defineProperty(k,"NotificationType7",{enumerable:!0,get:i(function(){return _e.NotificationType7},"get")});Object.defineProperty(k,"NotificationType8",{enumerable:!0,get:i(function(){return _e.NotificationType8},"get")});Object.defineProperty(k,"NotificationType9",{enumerable:!0,get:i(function(){return _e.NotificationType9},"get")});Object.defineProperty(k,"ParameterStructures",{enumerable:!0,get:i(function(){return _e.ParameterStructures},"get")});var Qa=Sa();Object.defineProperty(k,"LinkedMap",{enumerable:!0,get:i(function(){return Qa.LinkedMap},"get")});Object.defineProperty(k,"LRUCache",{enumerable:!0,get:i(function(){return Qa.LRUCache},"get")});Object.defineProperty(k,"Touch",{enumerable:!0,get:i(function(){return Qa.Touch},"get")});var $h=Dc();Object.defineProperty(k,"Disposable",{enumerable:!0,get:i(function(){return $h.Disposable},"get")});var Kc=$n();Object.defineProperty(k,"Event",{enumerable:!0,get:i(function(){return Kc.Event},"get")});Object.defineProperty(k,"Emitter",{enumerable:!0,get:i(function(){return Kc.Emitter},"get")});var Xc=Gi();Object.defineProperty(k,"CancellationTokenSource",{enumerable:!0,get:i(function(){return Xc.CancellationTokenSource},"get")});Object.defineProperty(k,"CancellationToken",{enumerable:!0,get:i(function(){return Xc.CancellationToken},"get")});var Yc=Fc();Object.defineProperty(k,"SharedArraySenderStrategy",{enumerable:!0,get:i(function(){return Yc.SharedArraySenderStrategy},"get")});Object.defineProperty(k,"SharedArrayReceiverStrategy",{enumerable:!0,get:i(function(){return Yc.SharedArrayReceiverStrategy},"get")});var Ja=qc();Object.defineProperty(k,"MessageReader",{enumerable:!0,get:i(function(){return Ja.MessageReader},"get")});Object.defineProperty(k,"AbstractMessageReader",{enumerable:!0,get:i(function(){return Ja.AbstractMessageReader},"get")});Object.defineProperty(k,"ReadableStreamMessageReader",{enumerable:!0,get:i(function(){return Ja.ReadableStreamMessageReader},"get")});var Ka=$c();Object.defineProperty(k,"MessageWriter",{enumerable:!0,get:i(function(){return Ka.MessageWriter},"get")});Object.defineProperty(k,"AbstractMessageWriter",{enumerable:!0,get:i(function(){return Ka.AbstractMessageWriter},"get")});Object.defineProperty(k,"WriteableStreamMessageWriter",{enumerable:!0,get:i(function(){return Ka.WriteableStreamMessageWriter},"get")});var Vh=Vc();Object.defineProperty(k,"AbstractMessageBuffer",{enumerable:!0,get:i(function(){return Vh.AbstractMessageBuffer},"get")});var qe=Jc();Object.defineProperty(k,"ConnectionStrategy",{enumerable:!0,get:i(function(){return qe.ConnectionStrategy},"get")});Object.defineProperty(k,"ConnectionOptions",{enumerable:!0,get:i(function(){return qe.ConnectionOptions},"get")});Object.defineProperty(k,"NullLogger",{enumerable:!0,get:i(function(){return qe.NullLogger},"get")});Object.defineProperty(k,"createMessageConnection",{enumerable:!0,get:i(function(){return qe.createMessageConnection},"get")});Object.defineProperty(k,"ProgressToken",{enumerable:!0,get:i(function(){return qe.ProgressToken},"get")});Object.defineProperty(k,"ProgressType",{enumerable:!0,get:i(function(){return qe.ProgressType},"get")});Object.defineProperty(k,"Trace",{enumerable:!0,get:i(function(){return qe.Trace},"get")});Object.defineProperty(k,"TraceValues",{enumerable:!0,get:i(function(){return qe.TraceValues},"get")});Object.defineProperty(k,"TraceFormat",{enumerable:!0,get:i(function(){return qe.TraceFormat},"get")});Object.defineProperty(k,"SetTraceNotification",{enumerable:!0,get:i(function(){return qe.SetTraceNotification},"get")});Object.defineProperty(k,"LogTraceNotification",{enumerable:!0,get:i(function(){return qe.LogTraceNotification},"get")});Object.defineProperty(k,"ConnectionErrors",{enumerable:!0,get:i(function(){return qe.ConnectionErrors},"get")});Object.defineProperty(k,"ConnectionError",{enumerable:!0,get:i(function(){return qe.ConnectionError},"get")});Object.defineProperty(k,"CancellationReceiverStrategy",{enumerable:!0,get:i(function(){return qe.CancellationReceiverStrategy},"get")});Object.defineProperty(k,"CancellationSenderStrategy",{enumerable:!0,get:i(function(){return qe.CancellationSenderStrategy},"get")});Object.defineProperty(k,"CancellationStrategy",{enumerable:!0,get:i(function(){return qe.CancellationStrategy},"get")});Object.defineProperty(k,"MessageStrategy",{enumerable:!0,get:i(function(){return qe.MessageStrategy},"get")});var Hh=Gt();k.RAL=Hh.default});var nd=$(tu=>{"use strict";Object.defineProperty(tu,"__esModule",{value:!0});var ed=require("util"),jt=io(),oo=class t extends jt.AbstractMessageBuffer{static{i(this,"MessageBuffer")}constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new ed.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};oo.emptyBuffer=Buffer.allocUnsafe(0);var Xa=class{static{i(this,"ReadableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),jt.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),jt.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),jt.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),jt.Disposable.create(()=>this.stream.off("data",e))}},Ya=class{static{i(this,"WritableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),jt.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),jt.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),jt.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((r,o)=>{let s=i(a=>{a==null?r():o(a)},"callback");typeof e=="string"?this.stream.write(e,n,s):this.stream.write(e,s)})}end(){this.stream.end()}},td=Object.freeze({messageBuffer:Object.freeze({create:i(t=>new oo(t),"create")}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:i((t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}},"encode")}),decoder:Object.freeze({name:"application/json",decode:i((t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new ed.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}},"decode")})}),stream:Object.freeze({asReadableStream:i(t=>new Xa(t),"asReadableStream"),asWritableStream:i(t=>new Ya(t),"asWritableStream")}),console,timer:Object.freeze({setTimeout(t,e,...n){let r=setTimeout(t,e,...n);return{dispose:i(()=>clearTimeout(r),"dispose")}},setImmediate(t,...e){let n=setImmediate(t,...e);return{dispose:i(()=>clearImmediate(n),"dispose")}},setInterval(t,e,...n){let r=setInterval(t,e,...n);return{dispose:i(()=>clearInterval(r),"dispose")}}})});function eu(){return td}i(eu,"RIL");(function(t){function e(){jt.RAL.install(td)}i(e,"install"),t.install=e})(eu||(eu={}));tu.default=eu});var vn=$(ae=>{"use strict";var Gh=ae&&ae.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:i(function(){return e[n]},"get")}),Object.defineProperty(t,r,o)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Zh=ae&&ae.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Gh(e,t,n)};Object.defineProperty(ae,"__esModule",{value:!0});ae.createMessageConnection=ae.createServerSocketTransport=ae.createClientSocketTransport=ae.createServerPipeTransport=ae.createClientPipeTransport=ae.generateRandomPipeName=ae.StreamMessageWriter=ae.StreamMessageReader=ae.SocketMessageWriter=ae.SocketMessageReader=ae.PortMessageWriter=ae.PortMessageReader=ae.IPCMessageWriter=ae.IPCMessageReader=void 0;var Qn=nd();Qn.default.install();var rd=require("path"),Qh=require("os"),Jh=require("crypto"),uo=require("net"),rt=io();Zh(io(),ae);var nu=class extends rt.AbstractMessageReader{static{i(this,"IPCMessageReader")}constructor(e){super(),this.process=e;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),rt.Disposable.create(()=>this.process.off("message",e))}};ae.IPCMessageReader=nu;var ru=class extends rt.AbstractMessageWriter{static{i(this,"IPCMessageWriter")}constructor(e){super(),this.process=e,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};ae.IPCMessageWriter=ru;var iu=class extends rt.AbstractMessageReader{static{i(this,"PortMessageReader")}constructor(e){super(),this.onData=new rt.Emitter,e.on("close",()=>this.fireClose),e.on("error",n=>this.fireError(n)),e.on("message",n=>{this.onData.fire(n)})}listen(e){return this.onData.event(e)}};ae.PortMessageReader=iu;var ou=class extends rt.AbstractMessageWriter{static{i(this,"PortMessageWriter")}constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",n=>this.fireError(n))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};ae.PortMessageWriter=ou;var yn=class extends rt.ReadableStreamMessageReader{static{i(this,"SocketMessageReader")}constructor(e,n="utf-8"){super((0,Qn.default)().stream.asReadableStream(e),n)}};ae.SocketMessageReader=yn;var bn=class extends rt.WriteableStreamMessageWriter{static{i(this,"SocketMessageWriter")}constructor(e,n){super((0,Qn.default)().stream.asWritableStream(e),n),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};ae.SocketMessageWriter=bn;var so=class extends rt.ReadableStreamMessageReader{static{i(this,"StreamMessageReader")}constructor(e,n){super((0,Qn.default)().stream.asReadableStream(e),n)}};ae.StreamMessageReader=so;var ao=class extends rt.WriteableStreamMessageWriter{static{i(this,"StreamMessageWriter")}constructor(e,n){super((0,Qn.default)().stream.asWritableStream(e),n)}};ae.StreamMessageWriter=ao;var id=process.env.XDG_RUNTIME_DIR,Kh=new Map([["linux",107],["darwin",103]]);function Xh(){let t=(0,Jh.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;id?e=rd.join(id,`vscode-ipc-${t}.sock`):e=rd.join(Qh.tmpdir(),`vscode-${t}.sock`);let n=Kh.get(process.platform);return n!==void 0&&e.length>n&&(0,Qn.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}i(Xh,"generateRandomPipeName");ae.generateRandomPipeName=Xh;function Yh(t,e="utf-8"){let n,r=new Promise((o,s)=>{n=o});return new Promise((o,s)=>{let a=(0,uo.createServer)(u=>{a.close(),n([new yn(u,e),new bn(u,e)])});a.on("error",s),a.listen(t,()=>{a.removeListener("error",s),o({onConnected:i(()=>r,"onConnected")})})})}i(Yh,"createClientPipeTransport");ae.createClientPipeTransport=Yh;function e_(t,e="utf-8"){let n=(0,uo.createConnection)(t);return[new yn(n,e),new bn(n,e)]}i(e_,"createServerPipeTransport");ae.createServerPipeTransport=e_;function t_(t,e="utf-8"){let n,r=new Promise((o,s)=>{n=o});return new Promise((o,s)=>{let a=(0,uo.createServer)(u=>{a.close(),n([new yn(u,e),new bn(u,e)])});a.on("error",s),a.listen(t,"127.0.0.1",()=>{a.removeListener("error",s),o({onConnected:i(()=>r,"onConnected")})})})}i(t_,"createClientSocketTransport");ae.createClientSocketTransport=t_;function n_(t,e="utf-8"){let n=(0,uo.createConnection)(t,"127.0.0.1");return[new yn(n,e),new bn(n,e)]}i(n_,"createServerSocketTransport");ae.createServerSocketTransport=n_;function r_(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}i(r_,"isReadableStream");function i_(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}i(i_,"isWritableStream");function o_(t,e,n,r){n||(n=rt.NullLogger);let o=r_(t)?new so(t):t,s=i_(e)?new ao(e):e;return rt.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,rt.createMessageConnection)(o,s,n,r)}i(o_,"createMessageConnection");ae.createMessageConnection=o_});var su=$((Vx,od)=>{"use strict";od.exports=vn()});var co=$((sd,lo)=>{(function(t){if(typeof lo=="object"&&typeof lo.exports=="object"){var e=t(require,sd);e!==void 0&&(lo.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var n;(function(c){function _(y){return typeof y=="string"}i(_,"is"),c.is=_})(n||(e.DocumentUri=n={}));var r;(function(c){function _(y){return typeof y=="string"}i(_,"is"),c.is=_})(r||(e.URI=r={}));var o;(function(c){c.MIN_VALUE=-2147483648,c.MAX_VALUE=2147483647;function _(y){return typeof y=="number"&&c.MIN_VALUE<=y&&y<=c.MAX_VALUE}i(_,"is"),c.is=_})(o||(e.integer=o={}));var s;(function(c){c.MIN_VALUE=0,c.MAX_VALUE=2147483647;function _(y){return typeof y=="number"&&c.MIN_VALUE<=y&&y<=c.MAX_VALUE}i(_,"is"),c.is=_})(s||(e.uinteger=s={}));var a;(function(c){function _(m,l){return m===Number.MAX_VALUE&&(m=s.MAX_VALUE),l===Number.MAX_VALUE&&(l=s.MAX_VALUE),{line:m,character:l}}i(_,"create"),c.create=_;function y(m){var l=m;return S.objectLiteral(l)&&S.uinteger(l.line)&&S.uinteger(l.character)}i(y,"is"),c.is=y})(a||(e.Position=a={}));var u;(function(c){function _(m,l,w,L){if(S.uinteger(m)&&S.uinteger(l)&&S.uinteger(w)&&S.uinteger(L))return{start:a.create(m,l),end:a.create(w,L)};if(a.is(m)&&a.is(l))return{start:m,end:l};throw new Error("Range#create called with invalid arguments[".concat(m,", ").concat(l,", ").concat(w,", ").concat(L,"]"))}i(_,"create"),c.create=_;function y(m){var l=m;return S.objectLiteral(l)&&a.is(l.start)&&a.is(l.end)}i(y,"is"),c.is=y})(u||(e.Range=u={}));var d;(function(c){function _(m,l){return{uri:m,range:l}}i(_,"create"),c.create=_;function y(m){var l=m;return S.objectLiteral(l)&&u.is(l.range)&&(S.string(l.uri)||S.undefined(l.uri))}i(y,"is"),c.is=y})(d||(e.Location=d={}));var f;(function(c){function _(m,l,w,L){return{targetUri:m,targetRange:l,targetSelectionRange:w,originSelectionRange:L}}i(_,"create"),c.create=_;function y(m){var l=m;return S.objectLiteral(l)&&u.is(l.targetRange)&&S.string(l.targetUri)&&u.is(l.targetSelectionRange)&&(u.is(l.originSelectionRange)||S.undefined(l.originSelectionRange))}i(y,"is"),c.is=y})(f||(e.LocationLink=f={}));var p;(function(c){function _(m,l,w,L){return{red:m,green:l,blue:w,alpha:L}}i(_,"create"),c.create=_;function y(m){var l=m;return S.objectLiteral(l)&&S.numberRange(l.red,0,1)&&S.numberRange(l.green,0,1)&&S.numberRange(l.blue,0,1)&&S.numberRange(l.alpha,0,1)}i(y,"is"),c.is=y})(p||(e.Color=p={}));var b;(function(c){function _(m,l){return{range:m,color:l}}i(_,"create"),c.create=_;function y(m){var l=m;return S.objectLiteral(l)&&u.is(l.range)&&p.is(l.color)}i(y,"is"),c.is=y})(b||(e.ColorInformation=b={}));var v;(function(c){function _(m,l,w){return{label:m,textEdit:l,additionalTextEdits:w}}i(_,"create"),c.create=_;function y(m){var l=m;return S.objectLiteral(l)&&S.string(l.label)&&(S.undefined(l.textEdit)||Y.is(l))&&(S.undefined(l.additionalTextEdits)||S.typedArray(l.additionalTextEdits,Y.is))}i(y,"is"),c.is=y})(v||(e.ColorPresentation=v={}));var T;(function(c){c.Comment="comment",c.Imports="imports",c.Region="region"})(T||(e.FoldingRangeKind=T={}));var A;(function(c){function _(m,l,w,L,te,xe){var he={startLine:m,endLine:l};return S.defined(w)&&(he.startCharacter=w),S.defined(L)&&(he.endCharacter=L),S.defined(te)&&(he.kind=te),S.defined(xe)&&(he.collapsedText=xe),he}i(_,"create"),c.create=_;function y(m){var l=m;return S.objectLiteral(l)&&S.uinteger(l.startLine)&&S.uinteger(l.startLine)&&(S.undefined(l.startCharacter)||S.uinteger(l.startCharacter))&&(S.undefined(l.endCharacter)||S.uinteger(l.endCharacter))&&(S.undefined(l.kind)||S.string(l.kind))}i(y,"is"),c.is=y})(A||(e.FoldingRange=A={}));var P;(function(c){function _(m,l){return{location:m,message:l}}i(_,"create"),c.create=_;function y(m){var l=m;return S.defined(l)&&d.is(l.location)&&S.string(l.message)}i(y,"is"),c.is=y})(P||(e.DiagnosticRelatedInformation=P={}));var j;(function(c){c.Error=1,c.Warning=2,c.Information=3,c.Hint=4})(j||(e.DiagnosticSeverity=j={}));var O;(function(c){c.Unnecessary=1,c.Deprecated=2})(O||(e.DiagnosticTag=O={}));var I;(function(c){function _(y){var m=y;return S.objectLiteral(m)&&S.string(m.href)}i(_,"is"),c.is=_})(I||(e.CodeDescription=I={}));var V;(function(c){function _(m,l,w,L,te,xe){var he={range:m,message:l};return S.defined(w)&&(he.severity=w),S.defined(L)&&(he.code=L),S.defined(te)&&(he.source=te),S.defined(xe)&&(he.relatedInformation=xe),he}i(_,"create"),c.create=_;function y(m){var l,w=m;return S.defined(w)&&u.is(w.range)&&S.string(w.message)&&(S.number(w.severity)||S.undefined(w.severity))&&(S.integer(w.code)||S.string(w.code)||S.undefined(w.code))&&(S.undefined(w.codeDescription)||S.string((l=w.codeDescription)===null||l===void 0?void 0:l.href))&&(S.string(w.source)||S.undefined(w.source))&&(S.undefined(w.relatedInformation)||S.typedArray(w.relatedInformation,P.is))}i(y,"is"),c.is=y})(V||(e.Diagnostic=V={}));var X;(function(c){function _(m,l){for(var w=[],L=2;L<arguments.length;L++)w[L-2]=arguments[L];var te={title:m,command:l};return S.defined(w)&&w.length>0&&(te.arguments=w),te}i(_,"create"),c.create=_;function y(m){var l=m;return S.defined(l)&&S.string(l.title)&&S.string(l.command)}i(y,"is"),c.is=y})(X||(e.Command=X={}));var Y;(function(c){function _(w,L){return{range:w,newText:L}}i(_,"replace"),c.replace=_;function y(w,L){return{range:{start:w,end:w},newText:L}}i(y,"insert"),c.insert=y;function m(w){return{range:w,newText:""}}i(m,"del"),c.del=m;function l(w){var L=w;return S.objectLiteral(L)&&S.string(L.newText)&&u.is(L.range)}i(l,"is"),c.is=l})(Y||(e.TextEdit=Y={}));var fe;(function(c){function _(m,l,w){var L={label:m};return l!==void 0&&(L.needsConfirmation=l),w!==void 0&&(L.description=w),L}i(_,"create"),c.create=_;function y(m){var l=m;return S.objectLiteral(l)&&S.string(l.label)&&(S.boolean(l.needsConfirmation)||l.needsConfirmation===void 0)&&(S.string(l.description)||l.description===void 0)}i(y,"is"),c.is=y})(fe||(e.ChangeAnnotation=fe={}));var oe;(function(c){function _(y){var m=y;return S.string(m)}i(_,"is"),c.is=_})(oe||(e.ChangeAnnotationIdentifier=oe={}));var pe;(function(c){function _(w,L,te){return{range:w,newText:L,annotationId:te}}i(_,"replace"),c.replace=_;function y(w,L,te){return{range:{start:w,end:w},newText:L,annotationId:te}}i(y,"insert"),c.insert=y;function m(w,L){return{range:w,newText:"",annotationId:L}}i(m,"del"),c.del=m;function l(w){var L=w;return Y.is(L)&&(fe.is(L.annotationId)||oe.is(L.annotationId))}i(l,"is"),c.is=l})(pe||(e.AnnotatedTextEdit=pe={}));var De;(function(c){function _(m,l){return{textDocument:m,edits:l}}i(_,"create"),c.create=_;function y(m){var l=m;return S.defined(l)&&H.is(l.textDocument)&&Array.isArray(l.edits)}i(y,"is"),c.is=y})(De||(e.TextDocumentEdit=De={}));var Oe;(function(c){function _(m,l,w){var L={kind:"create",uri:m};return l!==void 0&&(l.overwrite!==void 0||l.ignoreIfExists!==void 0)&&(L.options=l),w!==void 0&&(L.annotationId=w),L}i(_,"create"),c.create=_;function y(m){var l=m;return l&&l.kind==="create"&&S.string(l.uri)&&(l.options===void 0||(l.options.overwrite===void 0||S.boolean(l.options.overwrite))&&(l.options.ignoreIfExists===void 0||S.boolean(l.options.ignoreIfExists)))&&(l.annotationId===void 0||oe.is(l.annotationId))}i(y,"is"),c.is=y})(Oe||(e.CreateFile=Oe={}));var D;(function(c){function _(m,l,w,L){var te={kind:"rename",oldUri:m,newUri:l};return w!==void 0&&(w.overwrite!==void 0||w.ignoreIfExists!==void 0)&&(te.options=w),L!==void 0&&(te.annotationId=L),te}i(_,"create"),c.create=_;function y(m){var l=m;return l&&l.kind==="rename"&&S.string(l.oldUri)&&S.string(l.newUri)&&(l.options===void 0||(l.options.overwrite===void 0||S.boolean(l.options.overwrite))&&(l.options.ignoreIfExists===void 0||S.boolean(l.options.ignoreIfExists)))&&(l.annotationId===void 0||oe.is(l.annotationId))}i(y,"is"),c.is=y})(D||(e.RenameFile=D={}));var E;(function(c){function _(m,l,w){var L={kind:"delete",uri:m};return l!==void 0&&(l.recursive!==void 0||l.ignoreIfNotExists!==void 0)&&(L.options=l),w!==void 0&&(L.annotationId=w),L}i(_,"create"),c.create=_;function y(m){var l=m;return l&&l.kind==="delete"&&S.string(l.uri)&&(l.options===void 0||(l.options.recursive===void 0||S.boolean(l.options.recursive))&&(l.options.ignoreIfNotExists===void 0||S.boolean(l.options.ignoreIfNotExists)))&&(l.annotationId===void 0||oe.is(l.annotationId))}i(y,"is"),c.is=y})(E||(e.DeleteFile=E={}));var W;(function(c){function _(y){var m=y;return m&&(m.changes!==void 0||m.documentChanges!==void 0)&&(m.documentChanges===void 0||m.documentChanges.every(function(l){return S.string(l.kind)?Oe.is(l)||D.is(l)||E.is(l):De.is(l)}))}i(_,"is"),c.is=_})(W||(e.WorkspaceEdit=W={}));var B=function(){function c(_,y){this.edits=_,this.changeAnnotations=y}return i(c,"TextEditChangeImpl"),c.prototype.insert=function(_,y,m){var l,w;if(m===void 0?l=Y.insert(_,y):oe.is(m)?(w=m,l=pe.insert(_,y,m)):(this.assertChangeAnnotations(this.changeAnnotations),w=this.changeAnnotations.manage(m),l=pe.insert(_,y,w)),this.edits.push(l),w!==void 0)return w},c.prototype.replace=function(_,y,m){var l,w;if(m===void 0?l=Y.replace(_,y):oe.is(m)?(w=m,l=pe.replace(_,y,m)):(this.assertChangeAnnotations(this.changeAnnotations),w=this.changeAnnotations.manage(m),l=pe.replace(_,y,w)),this.edits.push(l),w!==void 0)return w},c.prototype.delete=function(_,y){var m,l;if(y===void 0?m=Y.del(_):oe.is(y)?(l=y,m=pe.del(_,y)):(this.assertChangeAnnotations(this.changeAnnotations),l=this.changeAnnotations.manage(y),m=pe.del(_,l)),this.edits.push(m),l!==void 0)return l},c.prototype.add=function(_){this.edits.push(_)},c.prototype.all=function(){return this.edits},c.prototype.clear=function(){this.edits.splice(0,this.edits.length)},c.prototype.assertChangeAnnotations=function(_){if(_===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},c}(),x=function(){function c(_){this._annotations=_===void 0?Object.create(null):_,this._counter=0,this._size=0}return i(c,"ChangeAnnotations"),c.prototype.all=function(){return this._annotations},Object.defineProperty(c.prototype,"size",{get:i(function(){return this._size},"get"),enumerable:!1,configurable:!0}),c.prototype.manage=function(_,y){var m;if(oe.is(_)?m=_:(m=this.nextId(),y=_),this._annotations[m]!==void 0)throw new Error("Id ".concat(m," is already in use."));if(y===void 0)throw new Error("No annotation provided for id ".concat(m));return this._annotations[m]=y,this._size++,m},c.prototype.nextId=function(){return this._counter++,this._counter.toString()},c}(),M=function(){function c(_){var y=this;this._textEditChanges=Object.create(null),_!==void 0?(this._workspaceEdit=_,_.documentChanges?(this._changeAnnotations=new x(_.changeAnnotations),_.changeAnnotations=this._changeAnnotations.all(),_.documentChanges.forEach(function(m){if(De.is(m)){var l=new B(m.edits,y._changeAnnotations);y._textEditChanges[m.textDocument.uri]=l}})):_.changes&&Object.keys(_.changes).forEach(function(m){var l=new B(_.changes[m]);y._textEditChanges[m]=l})):this._workspaceEdit={}}return i(c,"WorkspaceChange"),Object.defineProperty(c.prototype,"edit",{get:i(function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},"get"),enumerable:!1,configurable:!0}),c.prototype.getTextEditChange=function(_){if(H.is(_)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var y={uri:_.uri,version:_.version},m=this._textEditChanges[y.uri];if(!m){var l=[],w={textDocument:y,edits:l};this._workspaceEdit.documentChanges.push(w),m=new B(l,this._changeAnnotations),this._textEditChanges[y.uri]=m}return m}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var m=this._textEditChanges[_];if(!m){var l=[];this._workspaceEdit.changes[_]=l,m=new B(l),this._textEditChanges[_]=m}return m}},c.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new x,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},c.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},c.prototype.createFile=function(_,y,m){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var l;fe.is(y)||oe.is(y)?l=y:m=y;var w,L;if(l===void 0?w=Oe.create(_,m):(L=oe.is(l)?l:this._changeAnnotations.manage(l),w=Oe.create(_,m,L)),this._workspaceEdit.documentChanges.push(w),L!==void 0)return L},c.prototype.renameFile=function(_,y,m,l){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var w;fe.is(m)||oe.is(m)?w=m:l=m;var L,te;if(w===void 0?L=D.create(_,y,l):(te=oe.is(w)?w:this._changeAnnotations.manage(w),L=D.create(_,y,l,te)),this._workspaceEdit.documentChanges.push(L),te!==void 0)return te},c.prototype.deleteFile=function(_,y,m){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var l;fe.is(y)||oe.is(y)?l=y:m=y;var w,L;if(l===void 0?w=E.create(_,m):(L=oe.is(l)?l:this._changeAnnotations.manage(l),w=E.create(_,m,L)),this._workspaceEdit.documentChanges.push(w),L!==void 0)return L},c}();e.WorkspaceChange=M;var N;(function(c){function _(m){return{uri:m}}i(_,"create"),c.create=_;function y(m){var l=m;return S.defined(l)&&S.string(l.uri)}i(y,"is"),c.is=y})(N||(e.TextDocumentIdentifier=N={}));var z;(function(c){function _(m,l){return{uri:m,version:l}}i(_,"create"),c.create=_;function y(m){var l=m;return S.defined(l)&&S.string(l.uri)&&S.integer(l.version)}i(y,"is"),c.is=y})(z||(e.VersionedTextDocumentIdentifier=z={}));var H;(function(c){function _(m,l){return{uri:m,version:l}}i(_,"create"),c.create=_;function y(m){var l=m;return S.defined(l)&&S.string(l.uri)&&(l.version===null||S.integer(l.version))}i(y,"is"),c.is=y})(H||(e.OptionalVersionedTextDocumentIdentifier=H={}));var U;(function(c){function _(m,l,w,L){return{uri:m,languageId:l,version:w,text:L}}i(_,"create"),c.create=_;function y(m){var l=m;return S.defined(l)&&S.string(l.uri)&&S.string(l.languageId)&&S.integer(l.version)&&S.string(l.text)}i(y,"is"),c.is=y})(U||(e.TextDocumentItem=U={}));var K;(function(c){c.PlainText="plaintext",c.Markdown="markdown";function _(y){var m=y;return m===c.PlainText||m===c.Markdown}i(_,"is"),c.is=_})(K||(e.MarkupKind=K={}));var ee;(function(c){function _(y){var m=y;return S.objectLiteral(y)&&K.is(m.kind)&&S.string(m.value)}i(_,"is"),c.is=_})(ee||(e.MarkupContent=ee={}));var Pe;(function(c){c.Text=1,c.Method=2,c.Function=3,c.Constructor=4,c.Field=5,c.Variable=6,c.Class=7,c.Interface=8,c.Module=9,c.Property=10,c.Unit=11,c.Value=12,c.Enum=13,c.Keyword=14,c.Snippet=15,c.Color=16,c.File=17,c.Reference=18,c.Folder=19,c.EnumMember=20,c.Constant=21,c.Struct=22,c.Event=23,c.Operator=24,c.TypeParameter=25})(Pe||(e.CompletionItemKind=Pe={}));var le;(function(c){c.PlainText=1,c.Snippet=2})(le||(e.InsertTextFormat=le={}));var Ge;(function(c){c.Deprecated=1})(Ge||(e.CompletionItemTag=Ge={}));var vt;(function(c){function _(m,l,w){return{newText:m,insert:l,replace:w}}i(_,"create"),c.create=_;function y(m){var l=m;return l&&S.string(l.newText)&&u.is(l.insert)&&u.is(l.replace)}i(y,"is"),c.is=y})(vt||(e.InsertReplaceEdit=vt={}));var Ur;(function(c){c.asIs=1,c.adjustIndentation=2})(Ur||(e.InsertTextMode=Ur={}));var Br;(function(c){function _(y){var m=y;return m&&(S.string(m.detail)||m.detail===void 0)&&(S.string(m.description)||m.description===void 0)}i(_,"is"),c.is=_})(Br||(e.CompletionItemLabelDetails=Br={}));var zr;(function(c){function _(y){return{label:y}}i(_,"create"),c.create=_})(zr||(e.CompletionItem=zr={}));var $r;(function(c){function _(y,m){return{items:y||[],isIncomplete:!!m}}i(_,"create"),c.create=_})($r||(e.CompletionList=$r={}));var Tn;(function(c){function _(m){return m.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}i(_,"fromPlainText"),c.fromPlainText=_;function y(m){var l=m;return S.string(l)||S.objectLiteral(l)&&S.string(l.language)&&S.string(l.value)}i(y,"is"),c.is=y})(Tn||(e.MarkedString=Tn={}));var dt;(function(c){function _(y){var m=y;return!!m&&S.objectLiteral(m)&&(ee.is(m.contents)||Tn.is(m.contents)||S.typedArray(m.contents,Tn.is))&&(y.range===void 0||u.is(y.range))}i(_,"is"),c.is=_})(dt||(e.Hover=dt={}));var Vr;(function(c){function _(y,m){return m?{label:y,documentation:m}:{label:y}}i(_,"create"),c.create=_})(Vr||(e.ParameterInformation=Vr={}));var Hr;(function(c){function _(y,m){for(var l=[],w=2;w<arguments.length;w++)l[w-2]=arguments[w];var L={label:y};return S.defined(m)&&(L.documentation=m),S.defined(l)?L.parameters=l:L.parameters=[],L}i(_,"create"),c.create=_})(Hr||(e.SignatureInformation=Hr={}));var tn;(function(c){c.Text=1,c.Read=2,c.Write=3})(tn||(e.DocumentHighlightKind=tn={}));var Gr;(function(c){function _(y,m){var l={range:y};return S.number(m)&&(l.kind=m),l}i(_,"create"),c.create=_})(Gr||(e.DocumentHighlight=Gr={}));var xn;(function(c){c.File=1,c.Module=2,c.Namespace=3,c.Package=4,c.Class=5,c.Method=6,c.Property=7,c.Field=8,c.Constructor=9,c.Enum=10,c.Interface=11,c.Function=12,c.Variable=13,c.Constant=14,c.String=15,c.Number=16,c.Boolean=17,c.Array=18,c.Object=19,c.Key=20,c.Null=21,c.EnumMember=22,c.Struct=23,c.Event=24,c.Operator=25,c.TypeParameter=26})(xn||(e.SymbolKind=xn={}));var Zr;(function(c){c.Deprecated=1})(Zr||(e.SymbolTag=Zr={}));var It;(function(c){function _(y,m,l,w,L){var te={name:y,kind:m,location:{uri:w,range:l}};return L&&(te.containerName=L),te}i(_,"create"),c.create=_})(It||(e.SymbolInformation=It={}));var Wt;(function(c){function _(y,m,l,w){return w!==void 0?{name:y,kind:m,location:{uri:l,range:w}}:{name:y,kind:m,location:{uri:l}}}i(_,"create"),c.create=_})(Wt||(e.WorkspaceSymbol=Wt={}));var Qr;(function(c){function _(m,l,w,L,te,xe){var he={name:m,detail:l,kind:w,range:L,selectionRange:te};return xe!==void 0&&(he.children=xe),he}i(_,"create"),c.create=_;function y(m){var l=m;return l&&S.string(l.name)&&S.number(l.kind)&&u.is(l.range)&&u.is(l.selectionRange)&&(l.detail===void 0||S.string(l.detail))&&(l.deprecated===void 0||S.boolean(l.deprecated))&&(l.children===void 0||Array.isArray(l.children))&&(l.tags===void 0||Array.isArray(l.tags))}i(y,"is"),c.is=y})(Qr||(e.DocumentSymbol=Qr={}));var Jr;(function(c){c.Empty="",c.QuickFix="quickfix",c.Refactor="refactor",c.RefactorExtract="refactor.extract",c.RefactorInline="refactor.inline",c.RefactorRewrite="refactor.rewrite",c.Source="source",c.SourceOrganizeImports="source.organizeImports",c.SourceFixAll="source.fixAll"})(Jr||(e.CodeActionKind=Jr={}));var wt;(function(c){c.Invoked=1,c.Automatic=2})(wt||(e.CodeActionTriggerKind=wt={}));var ur;(function(c){function _(m,l,w){var L={diagnostics:m};return l!=null&&(L.only=l),w!=null&&(L.triggerKind=w),L}i(_,"create"),c.create=_;function y(m){var l=m;return S.defined(l)&&S.typedArray(l.diagnostics,V.is)&&(l.only===void 0||S.typedArray(l.only,S.string))&&(l.triggerKind===void 0||l.triggerKind===wt.Invoked||l.triggerKind===wt.Automatic)}i(y,"is"),c.is=y})(ur||(e.CodeActionContext=ur={}));var lr;(function(c){function _(m,l,w){var L={title:m},te=!0;return typeof l=="string"?(te=!1,L.kind=l):X.is(l)?L.command=l:L.edit=l,te&&w!==void 0&&(L.kind=w),L}i(_,"create"),c.create=_;function y(m){var l=m;return l&&S.string(l.title)&&(l.diagnostics===void 0||S.typedArray(l.diagnostics,V.is))&&(l.kind===void 0||S.string(l.kind))&&(l.edit!==void 0||l.command!==void 0)&&(l.command===void 0||X.is(l.command))&&(l.isPreferred===void 0||S.boolean(l.isPreferred))&&(l.edit===void 0||W.is(l.edit))}i(y,"is"),c.is=y})(lr||(e.CodeAction=lr={}));var kn;(function(c){function _(m,l){var w={range:m};return S.defined(l)&&(w.data=l),w}i(_,"create"),c.create=_;function y(m){var l=m;return S.defined(l)&&u.is(l.range)&&(S.undefined(l.command)||X.is(l.command))}i(y,"is"),c.is=y})(kn||(e.CodeLens=kn={}));var cr;(function(c){function _(m,l){return{tabSize:m,insertSpaces:l}}i(_,"create"),c.create=_;function y(m){var l=m;return S.defined(l)&&S.uinteger(l.tabSize)&&S.boolean(l.insertSpaces)}i(y,"is"),c.is=y})(cr||(e.FormattingOptions=cr={}));var Mt;(function(c){function _(m,l,w){return{range:m,target:l,data:w}}i(_,"create"),c.create=_;function y(m){var l=m;return S.defined(l)&&u.is(l.range)&&(S.undefined(l.target)||S.string(l.target))}i(y,"is"),c.is=y})(Mt||(e.DocumentLink=Mt={}));var h;(function(c){function _(m,l){return{range:m,parent:l}}i(_,"create"),c.create=_;function y(m){var l=m;return S.objectLiteral(l)&&u.is(l.range)&&(l.parent===void 0||c.is(l.parent))}i(y,"is"),c.is=y})(h||(e.SelectionRange=h={}));var R;(function(c){c.namespace="namespace",c.type="type",c.class="class",c.enum="enum",c.interface="interface",c.struct="struct",c.typeParameter="typeParameter",c.parameter="parameter",c.variable="variable",c.property="property",c.enumMember="enumMember",c.event="event",c.function="function",c.method="method",c.macro="macro",c.keyword="keyword",c.modifier="modifier",c.comment="comment",c.string="string",c.number="number",c.regexp="regexp",c.operator="operator",c.decorator="decorator"})(R||(e.SemanticTokenTypes=R={}));var q;(function(c){c.declaration="declaration",c.definition="definition",c.readonly="readonly",c.static="static",c.deprecated="deprecated",c.abstract="abstract",c.async="async",c.modification="modification",c.documentation="documentation",c.defaultLibrary="defaultLibrary"})(q||(e.SemanticTokenModifiers=q={}));var G;(function(c){function _(y){var m=y;return S.objectLiteral(m)&&(m.resultId===void 0||typeof m.resultId=="string")&&Array.isArray(m.data)&&(m.data.length===0||typeof m.data[0]=="number")}i(_,"is"),c.is=_})(G||(e.SemanticTokens=G={}));var me;(function(c){function _(m,l){return{range:m,text:l}}i(_,"create"),c.create=_;function y(m){var l=m;return l!=null&&u.is(l.range)&&S.string(l.text)}i(y,"is"),c.is=y})(me||(e.InlineValueText=me={}));var de;(function(c){function _(m,l,w){return{range:m,variableName:l,caseSensitiveLookup:w}}i(_,"create"),c.create=_;function y(m){var l=m;return l!=null&&u.is(l.range)&&S.boolean(l.caseSensitiveLookup)&&(S.string(l.variableName)||l.variableName===void 0)}i(y,"is"),c.is=y})(de||(e.InlineValueVariableLookup=de={}));var ye;(function(c){function _(m,l){return{range:m,expression:l}}i(_,"create"),c.create=_;function y(m){var l=m;return l!=null&&u.is(l.range)&&(S.string(l.expression)||l.expression===void 0)}i(y,"is"),c.is=y})(ye||(e.InlineValueEvaluatableExpression=ye={}));var we;(function(c){function _(m,l){return{frameId:m,stoppedLocation:l}}i(_,"create"),c.create=_;function y(m){var l=m;return S.defined(l)&&u.is(m.stoppedLocation)}i(y,"is"),c.is=y})(we||(e.InlineValueContext=we={}));var re;(function(c){c.Type=1,c.Parameter=2;function _(y){return y===1||y===2}i(_,"is"),c.is=_})(re||(e.InlayHintKind=re={}));var ge;(function(c){function _(m){return{value:m}}i(_,"create"),c.create=_;function y(m){var l=m;return S.objectLiteral(l)&&(l.tooltip===void 0||S.string(l.tooltip)||ee.is(l.tooltip))&&(l.location===void 0||d.is(l.location))&&(l.command===void 0||X.is(l.command))}i(y,"is"),c.is=y})(ge||(e.InlayHintLabelPart=ge={}));var ue;(function(c){function _(m,l,w){var L={position:m,label:l};return w!==void 0&&(L.kind=w),L}i(_,"create"),c.create=_;function y(m){var l=m;return S.objectLiteral(l)&&a.is(l.position)&&(S.string(l.label)||S.typedArray(l.label,ge.is))&&(l.kind===void 0||re.is(l.kind))&&l.textEdits===void 0||S.typedArray(l.textEdits,Y.is)&&(l.tooltip===void 0||S.string(l.tooltip)||ee.is(l.tooltip))&&(l.paddingLeft===void 0||S.boolean(l.paddingLeft))&&(l.paddingRight===void 0||S.boolean(l.paddingRight))}i(y,"is"),c.is=y})(ue||(e.InlayHint=ue={}));var Te;(function(c){function _(y){return{kind:"snippet",value:y}}i(_,"createSnippet"),c.createSnippet=_})(Te||(e.StringValue=Te={}));var Ne;(function(c){function _(y,m,l,w){return{insertText:y,filterText:m,range:l,command:w}}i(_,"create"),c.create=_})(Ne||(e.InlineCompletionItem=Ne={}));var Ye;(function(c){function _(y){return{items:y}}i(_,"create"),c.create=_})(Ye||(e.InlineCompletionList=Ye={}));var Kr;(function(c){c.Invoked=0,c.Automatic=1})(Kr||(e.InlineCompletionTriggerKind=Kr={}));var Tu;(function(c){function _(y,m){return{range:y,text:m}}i(_,"create"),c.create=_})(Tu||(e.SelectedCompletionInfo=Tu={}));var xu;(function(c){function _(y,m){return{triggerKind:y,selectedCompletionInfo:m}}i(_,"create"),c.create=_})(xu||(e.InlineCompletionContext=xu={}));var ku;(function(c){function _(y){var m=y;return S.objectLiteral(m)&&r.is(m.uri)&&S.string(m.name)}i(_,"is"),c.is=_})(ku||(e.WorkspaceFolder=ku={})),e.EOL=[`
`,`\r
`,"\r"];var Pu;(function(c){function _(w,L,te,xe){return new up(w,L,te,xe)}i(_,"create"),c.create=_;function y(w){var L=w;return!!(S.defined(L)&&S.string(L.uri)&&(S.undefined(L.languageId)||S.string(L.languageId))&&S.uinteger(L.lineCount)&&S.func(L.getText)&&S.func(L.positionAt)&&S.func(L.offsetAt))}i(y,"is"),c.is=y;function m(w,L){for(var te=w.getText(),xe=l(L,function(Pn,Xr){var Ru=Pn.range.start.line-Xr.range.start.line;return Ru===0?Pn.range.start.character-Xr.range.start.character:Ru}),he=te.length,ft=xe.length-1;ft>=0;ft--){var mt=xe[ft],Ct=w.offsetAt(mt.range.start),se=w.offsetAt(mt.range.end);if(se<=he)te=te.substring(0,Ct)+mt.newText+te.substring(se,te.length);else throw new Error("Overlapping edit");he=Ct}return te}i(m,"applyEdits"),c.applyEdits=m;function l(w,L){if(w.length<=1)return w;var te=w.length/2|0,xe=w.slice(0,te),he=w.slice(te);l(xe,L),l(he,L);for(var ft=0,mt=0,Ct=0;ft<xe.length&&mt<he.length;){var se=L(xe[ft],he[mt]);se<=0?w[Ct++]=xe[ft++]:w[Ct++]=he[mt++]}for(;ft<xe.length;)w[Ct++]=xe[ft++];for(;mt<he.length;)w[Ct++]=he[mt++];return w}i(l,"mergeSort")})(Pu||(e.TextDocument=Pu={}));var up=function(){function c(_,y,m,l){this._uri=_,this._languageId=y,this._version=m,this._content=l,this._lineOffsets=void 0}return i(c,"FullTextDocument"),Object.defineProperty(c.prototype,"uri",{get:i(function(){return this._uri},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"languageId",{get:i(function(){return this._languageId},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"version",{get:i(function(){return this._version},"get"),enumerable:!1,configurable:!0}),c.prototype.getText=function(_){if(_){var y=this.offsetAt(_.start),m=this.offsetAt(_.end);return this._content.substring(y,m)}return this._content},c.prototype.update=function(_,y){this._content=_.text,this._version=y,this._lineOffsets=void 0},c.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var _=[],y=this._content,m=!0,l=0;l<y.length;l++){m&&(_.push(l),m=!1);var w=y.charAt(l);m=w==="\r"||w===`
`,w==="\r"&&l+1<y.length&&y.charAt(l+1)===`
`&&l++}m&&y.length>0&&_.push(y.length),this._lineOffsets=_}return this._lineOffsets},c.prototype.positionAt=function(_){_=Math.max(Math.min(_,this._content.length),0);var y=this.getLineOffsets(),m=0,l=y.length;if(l===0)return a.create(0,_);for(;m<l;){var w=Math.floor((m+l)/2);y[w]>_?l=w:m=w+1}var L=m-1;return a.create(L,_-y[L])},c.prototype.offsetAt=function(_){var y=this.getLineOffsets();if(_.line>=y.length)return this._content.length;if(_.line<0)return 0;var m=y[_.line],l=_.line+1<y.length?y[_.line+1]:this._content.length;return Math.max(Math.min(m+_.character,l),m)},Object.defineProperty(c.prototype,"lineCount",{get:i(function(){return this.getLineOffsets().length},"get"),enumerable:!1,configurable:!0}),c}(),S;(function(c){var _=Object.prototype.toString;function y(se){return typeof se<"u"}i(y,"defined"),c.defined=y;function m(se){return typeof se>"u"}i(m,"undefined"),c.undefined=m;function l(se){return se===!0||se===!1}i(l,"boolean"),c.boolean=l;function w(se){return _.call(se)==="[object String]"}i(w,"string"),c.string=w;function L(se){return _.call(se)==="[object Number]"}i(L,"number"),c.number=L;function te(se,Pn,Xr){return _.call(se)==="[object Number]"&&Pn<=se&&se<=Xr}i(te,"numberRange"),c.numberRange=te;function xe(se){return _.call(se)==="[object Number]"&&-2147483648<=se&&se<=2147483647}i(xe,"integer"),c.integer=xe;function he(se){return _.call(se)==="[object Number]"&&0<=se&&se<=2147483647}i(he,"uinteger"),c.uinteger=he;function ft(se){return _.call(se)==="[object Function]"}i(ft,"func"),c.func=ft;function mt(se){return se!==null&&typeof se=="object"}i(mt,"objectLiteral"),c.objectLiteral=mt;function Ct(se,Pn){return Array.isArray(se)&&se.every(Pn)}i(Ct,"typedArray"),c.typedArray=Ct})(S||(S={}))})});var Se=$(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.ProtocolNotificationType=Je.ProtocolNotificationType0=Je.ProtocolRequestType=Je.ProtocolRequestType0=Je.RegistrationType=Je.MessageDirection=void 0;var Jn=vn(),ad;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(ad||(Je.MessageDirection=ad={}));var au=class{static{i(this,"RegistrationType")}constructor(e){this.method=e}};Je.RegistrationType=au;var uu=class extends Jn.RequestType0{static{i(this,"ProtocolRequestType0")}constructor(e){super(e)}};Je.ProtocolRequestType0=uu;var lu=class extends Jn.RequestType{static{i(this,"ProtocolRequestType")}constructor(e){super(e,Jn.ParameterStructures.byName)}};Je.ProtocolRequestType=lu;var cu=class extends Jn.NotificationType0{static{i(this,"ProtocolNotificationType0")}constructor(e){super(e)}};Je.ProtocolNotificationType0=cu;var du=class extends Jn.NotificationType{static{i(this,"ProtocolNotificationType")}constructor(e){super(e,Jn.ParameterStructures.byName)}};Je.ProtocolNotificationType=du});var fo=$(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.objectLiteral=Le.typedArray=Le.stringArray=Le.array=Le.func=Le.error=Le.number=Le.string=Le.boolean=void 0;function s_(t){return t===!0||t===!1}i(s_,"boolean");Le.boolean=s_;function ud(t){return typeof t=="string"||t instanceof String}i(ud,"string");Le.string=ud;function a_(t){return typeof t=="number"||t instanceof Number}i(a_,"number");Le.number=a_;function u_(t){return t instanceof Error}i(u_,"error");Le.error=u_;function l_(t){return typeof t=="function"}i(l_,"func");Le.func=l_;function ld(t){return Array.isArray(t)}i(ld,"array");Le.array=ld;function c_(t){return ld(t)&&t.every(e=>ud(e))}i(c_,"stringArray");Le.stringArray=c_;function d_(t,e){return Array.isArray(t)&&t.every(e)}i(d_,"typedArray");Le.typedArray=d_;function f_(t){return t!==null&&typeof t=="object"}i(f_,"objectLiteral");Le.objectLiteral=f_});var fd=$(mo=>{"use strict";Object.defineProperty(mo,"__esModule",{value:!0});mo.ImplementationRequest=void 0;var cd=Se(),dd;(function(t){t.method="textDocument/implementation",t.messageDirection=cd.MessageDirection.clientToServer,t.type=new cd.ProtocolRequestType(t.method)})(dd||(mo.ImplementationRequest=dd={}))});var gd=$(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});po.TypeDefinitionRequest=void 0;var md=Se(),pd;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=md.MessageDirection.clientToServer,t.type=new md.ProtocolRequestType(t.method)})(pd||(po.TypeDefinitionRequest=pd={}))});var yd=$(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});Kn.DidChangeWorkspaceFoldersNotification=Kn.WorkspaceFoldersRequest=void 0;var go=Se(),hd;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=go.MessageDirection.serverToClient,t.type=new go.ProtocolRequestType0(t.method)})(hd||(Kn.WorkspaceFoldersRequest=hd={}));var _d;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=go.MessageDirection.clientToServer,t.type=new go.ProtocolNotificationType(t.method)})(_d||(Kn.DidChangeWorkspaceFoldersNotification=_d={}))});var wd=$(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});ho.ConfigurationRequest=void 0;var bd=Se(),vd;(function(t){t.method="workspace/configuration",t.messageDirection=bd.MessageDirection.serverToClient,t.type=new bd.ProtocolRequestType(t.method)})(vd||(ho.ConfigurationRequest=vd={}))});var Td=$(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Xn.ColorPresentationRequest=Xn.DocumentColorRequest=void 0;var _o=Se(),Sd;(function(t){t.method="textDocument/documentColor",t.messageDirection=_o.MessageDirection.clientToServer,t.type=new _o.ProtocolRequestType(t.method)})(Sd||(Xn.DocumentColorRequest=Sd={}));var Ed;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=_o.MessageDirection.clientToServer,t.type=new _o.ProtocolRequestType(t.method)})(Ed||(Xn.ColorPresentationRequest=Ed={}))});var Pd=$(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.FoldingRangeRefreshRequest=Yn.FoldingRangeRequest=void 0;var yo=Se(),xd;(function(t){t.method="textDocument/foldingRange",t.messageDirection=yo.MessageDirection.clientToServer,t.type=new yo.ProtocolRequestType(t.method)})(xd||(Yn.FoldingRangeRequest=xd={}));var kd;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=yo.MessageDirection.serverToClient,t.type=new yo.ProtocolRequestType0(t.method)})(kd||(Yn.FoldingRangeRefreshRequest=kd={}))});var Md=$(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});bo.DeclarationRequest=void 0;var Rd=Se(),Id;(function(t){t.method="textDocument/declaration",t.messageDirection=Rd.MessageDirection.clientToServer,t.type=new Rd.ProtocolRequestType(t.method)})(Id||(bo.DeclarationRequest=Id={}))});var Nd=$(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});vo.SelectionRangeRequest=void 0;var Cd=Se(),Ld;(function(t){t.method="textDocument/selectionRange",t.messageDirection=Cd.MessageDirection.clientToServer,t.type=new Cd.ProtocolRequestType(t.method)})(Ld||(vo.SelectionRangeRequest=Ld={}))});var Fd=$(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.WorkDoneProgressCancelNotification=Jt.WorkDoneProgressCreateRequest=Jt.WorkDoneProgress=void 0;var m_=vn(),wo=Se(),Ad;(function(t){t.type=new m_.ProgressType;function e(n){return n===t.type}i(e,"is"),t.is=e})(Ad||(Jt.WorkDoneProgress=Ad={}));var Dd;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=wo.MessageDirection.serverToClient,t.type=new wo.ProtocolRequestType(t.method)})(Dd||(Jt.WorkDoneProgressCreateRequest=Dd={}));var Od;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=wo.MessageDirection.clientToServer,t.type=new wo.ProtocolNotificationType(t.method)})(Od||(Jt.WorkDoneProgressCancelNotification=Od={}))});var Ud=$(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.CallHierarchyOutgoingCallsRequest=Kt.CallHierarchyIncomingCallsRequest=Kt.CallHierarchyPrepareRequest=void 0;var er=Se(),jd;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=er.MessageDirection.clientToServer,t.type=new er.ProtocolRequestType(t.method)})(jd||(Kt.CallHierarchyPrepareRequest=jd={}));var qd;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=er.MessageDirection.clientToServer,t.type=new er.ProtocolRequestType(t.method)})(qd||(Kt.CallHierarchyIncomingCallsRequest=qd={}));var Wd;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=er.MessageDirection.clientToServer,t.type=new er.ProtocolRequestType(t.method)})(Wd||(Kt.CallHierarchyOutgoingCallsRequest=Wd={}))});var Gd=$(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.SemanticTokensRefreshRequest=Ke.SemanticTokensRangeRequest=Ke.SemanticTokensDeltaRequest=Ke.SemanticTokensRequest=Ke.SemanticTokensRegistrationType=Ke.TokenFormat=void 0;var qt=Se(),Bd;(function(t){t.Relative="relative"})(Bd||(Ke.TokenFormat=Bd={}));var jr;(function(t){t.method="textDocument/semanticTokens",t.type=new qt.RegistrationType(t.method)})(jr||(Ke.SemanticTokensRegistrationType=jr={}));var zd;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=qt.MessageDirection.clientToServer,t.type=new qt.ProtocolRequestType(t.method),t.registrationMethod=jr.method})(zd||(Ke.SemanticTokensRequest=zd={}));var $d;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=qt.MessageDirection.clientToServer,t.type=new qt.ProtocolRequestType(t.method),t.registrationMethod=jr.method})($d||(Ke.SemanticTokensDeltaRequest=$d={}));var Vd;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=qt.MessageDirection.clientToServer,t.type=new qt.ProtocolRequestType(t.method),t.registrationMethod=jr.method})(Vd||(Ke.SemanticTokensRangeRequest=Vd={}));var Hd;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=qt.MessageDirection.serverToClient,t.type=new qt.ProtocolRequestType0(t.method)})(Hd||(Ke.SemanticTokensRefreshRequest=Hd={}))});var Jd=$(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});So.ShowDocumentRequest=void 0;var Zd=Se(),Qd;(function(t){t.method="window/showDocument",t.messageDirection=Zd.MessageDirection.serverToClient,t.type=new Zd.ProtocolRequestType(t.method)})(Qd||(So.ShowDocumentRequest=Qd={}))});var Yd=$(Eo=>{"use strict";Object.defineProperty(Eo,"__esModule",{value:!0});Eo.LinkedEditingRangeRequest=void 0;var Kd=Se(),Xd;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=Kd.MessageDirection.clientToServer,t.type=new Kd.ProtocolRequestType(t.method)})(Xd||(Eo.LinkedEditingRangeRequest=Xd={}))});var uf=$($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.WillDeleteFilesRequest=$e.DidDeleteFilesNotification=$e.DidRenameFilesNotification=$e.WillRenameFilesRequest=$e.DidCreateFilesNotification=$e.WillCreateFilesRequest=$e.FileOperationPatternKind=void 0;var lt=Se(),ef;(function(t){t.file="file",t.folder="folder"})(ef||($e.FileOperationPatternKind=ef={}));var tf;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=lt.MessageDirection.clientToServer,t.type=new lt.ProtocolRequestType(t.method)})(tf||($e.WillCreateFilesRequest=tf={}));var nf;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=lt.MessageDirection.clientToServer,t.type=new lt.ProtocolNotificationType(t.method)})(nf||($e.DidCreateFilesNotification=nf={}));var rf;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=lt.MessageDirection.clientToServer,t.type=new lt.ProtocolRequestType(t.method)})(rf||($e.WillRenameFilesRequest=rf={}));var of;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=lt.MessageDirection.clientToServer,t.type=new lt.ProtocolNotificationType(t.method)})(of||($e.DidRenameFilesNotification=of={}));var sf;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=lt.MessageDirection.clientToServer,t.type=new lt.ProtocolNotificationType(t.method)})(sf||($e.DidDeleteFilesNotification=sf={}));var af;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=lt.MessageDirection.clientToServer,t.type=new lt.ProtocolRequestType(t.method)})(af||($e.WillDeleteFilesRequest=af={}))});var mf=$(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.MonikerRequest=Xt.MonikerKind=Xt.UniquenessLevel=void 0;var lf=Se(),cf;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(cf||(Xt.UniquenessLevel=cf={}));var df;(function(t){t.$import="import",t.$export="export",t.local="local"})(df||(Xt.MonikerKind=df={}));var ff;(function(t){t.method="textDocument/moniker",t.messageDirection=lf.MessageDirection.clientToServer,t.type=new lf.ProtocolRequestType(t.method)})(ff||(Xt.MonikerRequest=ff={}))});var _f=$(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.TypeHierarchySubtypesRequest=Yt.TypeHierarchySupertypesRequest=Yt.TypeHierarchyPrepareRequest=void 0;var tr=Se(),pf;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=tr.MessageDirection.clientToServer,t.type=new tr.ProtocolRequestType(t.method)})(pf||(Yt.TypeHierarchyPrepareRequest=pf={}));var gf;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=tr.MessageDirection.clientToServer,t.type=new tr.ProtocolRequestType(t.method)})(gf||(Yt.TypeHierarchySupertypesRequest=gf={}));var hf;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=tr.MessageDirection.clientToServer,t.type=new tr.ProtocolRequestType(t.method)})(hf||(Yt.TypeHierarchySubtypesRequest=hf={}))});var vf=$(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.InlineValueRefreshRequest=nr.InlineValueRequest=void 0;var To=Se(),yf;(function(t){t.method="textDocument/inlineValue",t.messageDirection=To.MessageDirection.clientToServer,t.type=new To.ProtocolRequestType(t.method)})(yf||(nr.InlineValueRequest=yf={}));var bf;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=To.MessageDirection.serverToClient,t.type=new To.ProtocolRequestType0(t.method)})(bf||(nr.InlineValueRefreshRequest=bf={}))});var Tf=$(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.InlayHintRefreshRequest=en.InlayHintResolveRequest=en.InlayHintRequest=void 0;var rr=Se(),wf;(function(t){t.method="textDocument/inlayHint",t.messageDirection=rr.MessageDirection.clientToServer,t.type=new rr.ProtocolRequestType(t.method)})(wf||(en.InlayHintRequest=wf={}));var Sf;(function(t){t.method="inlayHint/resolve",t.messageDirection=rr.MessageDirection.clientToServer,t.type=new rr.ProtocolRequestType(t.method)})(Sf||(en.InlayHintResolveRequest=Sf={}));var Ef;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=rr.MessageDirection.serverToClient,t.type=new rr.ProtocolRequestType0(t.method)})(Ef||(en.InlayHintRefreshRequest=Ef={}))});var Cf=$(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.DiagnosticRefreshRequest=ct.WorkspaceDiagnosticRequest=ct.DocumentDiagnosticRequest=ct.DocumentDiagnosticReportKind=ct.DiagnosticServerCancellationData=void 0;var Mf=vn(),p_=fo(),ir=Se(),xf;(function(t){function e(n){let r=n;return r&&p_.boolean(r.retriggerRequest)}i(e,"is"),t.is=e})(xf||(ct.DiagnosticServerCancellationData=xf={}));var kf;(function(t){t.Full="full",t.Unchanged="unchanged"})(kf||(ct.DocumentDiagnosticReportKind=kf={}));var Pf;(function(t){t.method="textDocument/diagnostic",t.messageDirection=ir.MessageDirection.clientToServer,t.type=new ir.ProtocolRequestType(t.method),t.partialResult=new Mf.ProgressType})(Pf||(ct.DocumentDiagnosticRequest=Pf={}));var Rf;(function(t){t.method="workspace/diagnostic",t.messageDirection=ir.MessageDirection.clientToServer,t.type=new ir.ProtocolRequestType(t.method),t.partialResult=new Mf.ProgressType})(Rf||(ct.WorkspaceDiagnosticRequest=Rf={}));var If;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=ir.MessageDirection.serverToClient,t.type=new ir.ProtocolRequestType0(t.method)})(If||(ct.DiagnosticRefreshRequest=If={}))});var jf=$(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.DidCloseNotebookDocumentNotification=ke.DidSaveNotebookDocumentNotification=ke.DidChangeNotebookDocumentNotification=ke.NotebookCellArrayChange=ke.DidOpenNotebookDocumentNotification=ke.NotebookDocumentSyncRegistrationType=ke.NotebookDocument=ke.NotebookCell=ke.ExecutionSummary=ke.NotebookCellKind=void 0;var qr=co(),bt=fo(),kt=Se(),fu;(function(t){t.Markup=1,t.Code=2;function e(n){return n===1||n===2}i(e,"is"),t.is=e})(fu||(ke.NotebookCellKind=fu={}));var mu;(function(t){function e(o,s){let a={executionOrder:o};return(s===!0||s===!1)&&(a.success=s),a}i(e,"create"),t.create=e;function n(o){let s=o;return bt.objectLiteral(s)&&qr.uinteger.is(s.executionOrder)&&(s.success===void 0||bt.boolean(s.success))}i(n,"is"),t.is=n;function r(o,s){return o===s?!0:o==null||s===null||s===void 0?!1:o.executionOrder===s.executionOrder&&o.success===s.success}i(r,"equals"),t.equals=r})(mu||(ke.ExecutionSummary=mu={}));var xo;(function(t){function e(s,a){return{kind:s,document:a}}i(e,"create"),t.create=e;function n(s){let a=s;return bt.objectLiteral(a)&&fu.is(a.kind)&&qr.DocumentUri.is(a.document)&&(a.metadata===void 0||bt.objectLiteral(a.metadata))}i(n,"is"),t.is=n;function r(s,a){let u=new Set;return s.document!==a.document&&u.add("document"),s.kind!==a.kind&&u.add("kind"),s.executionSummary!==a.executionSummary&&u.add("executionSummary"),(s.metadata!==void 0||a.metadata!==void 0)&&!o(s.metadata,a.metadata)&&u.add("metadata"),(s.executionSummary!==void 0||a.executionSummary!==void 0)&&!mu.equals(s.executionSummary,a.executionSummary)&&u.add("executionSummary"),u}i(r,"diff"),t.diff=r;function o(s,a){if(s===a)return!0;if(s==null||a===null||a===void 0||typeof s!=typeof a||typeof s!="object")return!1;let u=Array.isArray(s),d=Array.isArray(a);if(u!==d)return!1;if(u&&d){if(s.length!==a.length)return!1;for(let f=0;f<s.length;f++)if(!o(s[f],a[f]))return!1}if(bt.objectLiteral(s)&&bt.objectLiteral(a)){let f=Object.keys(s),p=Object.keys(a);if(f.length!==p.length||(f.sort(),p.sort(),!o(f,p)))return!1;for(let b=0;b<f.length;b++){let v=f[b];if(!o(s[v],a[v]))return!1}}return!0}i(o,"equalsMetadata")})(xo||(ke.NotebookCell=xo={}));var Lf;(function(t){function e(r,o,s,a){return{uri:r,notebookType:o,version:s,cells:a}}i(e,"create"),t.create=e;function n(r){let o=r;return bt.objectLiteral(o)&&bt.string(o.uri)&&qr.integer.is(o.version)&&bt.typedArray(o.cells,xo.is)}i(n,"is"),t.is=n})(Lf||(ke.NotebookDocument=Lf={}));var or;(function(t){t.method="notebookDocument/sync",t.messageDirection=kt.MessageDirection.clientToServer,t.type=new kt.RegistrationType(t.method)})(or||(ke.NotebookDocumentSyncRegistrationType=or={}));var Nf;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=kt.MessageDirection.clientToServer,t.type=new kt.ProtocolNotificationType(t.method),t.registrationMethod=or.method})(Nf||(ke.DidOpenNotebookDocumentNotification=Nf={}));var Af;(function(t){function e(r){let o=r;return bt.objectLiteral(o)&&qr.uinteger.is(o.start)&&qr.uinteger.is(o.deleteCount)&&(o.cells===void 0||bt.typedArray(o.cells,xo.is))}i(e,"is"),t.is=e;function n(r,o,s){let a={start:r,deleteCount:o};return s!==void 0&&(a.cells=s),a}i(n,"create"),t.create=n})(Af||(ke.NotebookCellArrayChange=Af={}));var Df;(function(t){t.method="notebookDocument/didChange",t.messageDirection=kt.MessageDirection.clientToServer,t.type=new kt.ProtocolNotificationType(t.method),t.registrationMethod=or.method})(Df||(ke.DidChangeNotebookDocumentNotification=Df={}));var Of;(function(t){t.method="notebookDocument/didSave",t.messageDirection=kt.MessageDirection.clientToServer,t.type=new kt.ProtocolNotificationType(t.method),t.registrationMethod=or.method})(Of||(ke.DidSaveNotebookDocumentNotification=Of={}));var Ff;(function(t){t.method="notebookDocument/didClose",t.messageDirection=kt.MessageDirection.clientToServer,t.type=new kt.ProtocolNotificationType(t.method),t.registrationMethod=or.method})(Ff||(ke.DidCloseNotebookDocumentNotification=Ff={}))});var Uf=$(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});ko.InlineCompletionRequest=void 0;var qf=Se(),Wf;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=qf.MessageDirection.clientToServer,t.type=new qf.ProtocolRequestType(t.method)})(Wf||(ko.InlineCompletionRequest=Wf={}))});var ep=$(g=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});g.WorkspaceSymbolRequest=g.CodeActionResolveRequest=g.CodeActionRequest=g.DocumentSymbolRequest=g.DocumentHighlightRequest=g.ReferencesRequest=g.DefinitionRequest=g.SignatureHelpRequest=g.SignatureHelpTriggerKind=g.HoverRequest=g.CompletionResolveRequest=g.CompletionRequest=g.CompletionTriggerKind=g.PublishDiagnosticsNotification=g.WatchKind=g.RelativePattern=g.FileChangeType=g.DidChangeWatchedFilesNotification=g.WillSaveTextDocumentWaitUntilRequest=g.WillSaveTextDocumentNotification=g.TextDocumentSaveReason=g.DidSaveTextDocumentNotification=g.DidCloseTextDocumentNotification=g.DidChangeTextDocumentNotification=g.TextDocumentContentChangeEvent=g.DidOpenTextDocumentNotification=g.TextDocumentSyncKind=g.TelemetryEventNotification=g.LogMessageNotification=g.ShowMessageRequest=g.ShowMessageNotification=g.MessageType=g.DidChangeConfigurationNotification=g.ExitNotification=g.ShutdownRequest=g.InitializedNotification=g.InitializeErrorCodes=g.InitializeRequest=g.WorkDoneProgressOptions=g.TextDocumentRegistrationOptions=g.StaticRegistrationOptions=g.PositionEncodingKind=g.FailureHandlingKind=g.ResourceOperationKind=g.UnregistrationRequest=g.RegistrationRequest=g.DocumentSelector=g.NotebookCellTextDocumentFilter=g.NotebookDocumentFilter=g.TextDocumentFilter=void 0;g.MonikerRequest=g.MonikerKind=g.UniquenessLevel=g.WillDeleteFilesRequest=g.DidDeleteFilesNotification=g.WillRenameFilesRequest=g.DidRenameFilesNotification=g.WillCreateFilesRequest=g.DidCreateFilesNotification=g.FileOperationPatternKind=g.LinkedEditingRangeRequest=g.ShowDocumentRequest=g.SemanticTokensRegistrationType=g.SemanticTokensRefreshRequest=g.SemanticTokensRangeRequest=g.SemanticTokensDeltaRequest=g.SemanticTokensRequest=g.TokenFormat=g.CallHierarchyPrepareRequest=g.CallHierarchyOutgoingCallsRequest=g.CallHierarchyIncomingCallsRequest=g.WorkDoneProgressCancelNotification=g.WorkDoneProgressCreateRequest=g.WorkDoneProgress=g.SelectionRangeRequest=g.DeclarationRequest=g.FoldingRangeRefreshRequest=g.FoldingRangeRequest=g.ColorPresentationRequest=g.DocumentColorRequest=g.ConfigurationRequest=g.DidChangeWorkspaceFoldersNotification=g.WorkspaceFoldersRequest=g.TypeDefinitionRequest=g.ImplementationRequest=g.ApplyWorkspaceEditRequest=g.ExecuteCommandRequest=g.PrepareRenameRequest=g.RenameRequest=g.PrepareSupportDefaultBehavior=g.DocumentOnTypeFormattingRequest=g.DocumentRangesFormattingRequest=g.DocumentRangeFormattingRequest=g.DocumentFormattingRequest=g.DocumentLinkResolveRequest=g.DocumentLinkRequest=g.CodeLensRefreshRequest=g.CodeLensResolveRequest=g.CodeLensRequest=g.WorkspaceSymbolResolveRequest=void 0;g.InlineCompletionRequest=g.DidCloseNotebookDocumentNotification=g.DidSaveNotebookDocumentNotification=g.DidChangeNotebookDocumentNotification=g.NotebookCellArrayChange=g.DidOpenNotebookDocumentNotification=g.NotebookDocumentSyncRegistrationType=g.NotebookDocument=g.NotebookCell=g.ExecutionSummary=g.NotebookCellKind=g.DiagnosticRefreshRequest=g.WorkspaceDiagnosticRequest=g.DocumentDiagnosticRequest=g.DocumentDiagnosticReportKind=g.DiagnosticServerCancellationData=g.InlayHintRefreshRequest=g.InlayHintResolveRequest=g.InlayHintRequest=g.InlineValueRefreshRequest=g.InlineValueRequest=g.TypeHierarchySupertypesRequest=g.TypeHierarchySubtypesRequest=g.TypeHierarchyPrepareRequest=void 0;var F=Se(),Bf=co(),Ae=fo(),g_=fd();Object.defineProperty(g,"ImplementationRequest",{enumerable:!0,get:i(function(){return g_.ImplementationRequest},"get")});var h_=gd();Object.defineProperty(g,"TypeDefinitionRequest",{enumerable:!0,get:i(function(){return h_.TypeDefinitionRequest},"get")});var Jm=yd();Object.defineProperty(g,"WorkspaceFoldersRequest",{enumerable:!0,get:i(function(){return Jm.WorkspaceFoldersRequest},"get")});Object.defineProperty(g,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:i(function(){return Jm.DidChangeWorkspaceFoldersNotification},"get")});var __=wd();Object.defineProperty(g,"ConfigurationRequest",{enumerable:!0,get:i(function(){return __.ConfigurationRequest},"get")});var Km=Td();Object.defineProperty(g,"DocumentColorRequest",{enumerable:!0,get:i(function(){return Km.DocumentColorRequest},"get")});Object.defineProperty(g,"ColorPresentationRequest",{enumerable:!0,get:i(function(){return Km.ColorPresentationRequest},"get")});var Xm=Pd();Object.defineProperty(g,"FoldingRangeRequest",{enumerable:!0,get:i(function(){return Xm.FoldingRangeRequest},"get")});Object.defineProperty(g,"FoldingRangeRefreshRequest",{enumerable:!0,get:i(function(){return Xm.FoldingRangeRefreshRequest},"get")});var y_=Md();Object.defineProperty(g,"DeclarationRequest",{enumerable:!0,get:i(function(){return y_.DeclarationRequest},"get")});var b_=Nd();Object.defineProperty(g,"SelectionRangeRequest",{enumerable:!0,get:i(function(){return b_.SelectionRangeRequest},"get")});var yu=Fd();Object.defineProperty(g,"WorkDoneProgress",{enumerable:!0,get:i(function(){return yu.WorkDoneProgress},"get")});Object.defineProperty(g,"WorkDoneProgressCreateRequest",{enumerable:!0,get:i(function(){return yu.WorkDoneProgressCreateRequest},"get")});Object.defineProperty(g,"WorkDoneProgressCancelNotification",{enumerable:!0,get:i(function(){return yu.WorkDoneProgressCancelNotification},"get")});var bu=Ud();Object.defineProperty(g,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:i(function(){return bu.CallHierarchyIncomingCallsRequest},"get")});Object.defineProperty(g,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:i(function(){return bu.CallHierarchyOutgoingCallsRequest},"get")});Object.defineProperty(g,"CallHierarchyPrepareRequest",{enumerable:!0,get:i(function(){return bu.CallHierarchyPrepareRequest},"get")});var sr=Gd();Object.defineProperty(g,"TokenFormat",{enumerable:!0,get:i(function(){return sr.TokenFormat},"get")});Object.defineProperty(g,"SemanticTokensRequest",{enumerable:!0,get:i(function(){return sr.SemanticTokensRequest},"get")});Object.defineProperty(g,"SemanticTokensDeltaRequest",{enumerable:!0,get:i(function(){return sr.SemanticTokensDeltaRequest},"get")});Object.defineProperty(g,"SemanticTokensRangeRequest",{enumerable:!0,get:i(function(){return sr.SemanticTokensRangeRequest},"get")});Object.defineProperty(g,"SemanticTokensRefreshRequest",{enumerable:!0,get:i(function(){return sr.SemanticTokensRefreshRequest},"get")});Object.defineProperty(g,"SemanticTokensRegistrationType",{enumerable:!0,get:i(function(){return sr.SemanticTokensRegistrationType},"get")});var v_=Jd();Object.defineProperty(g,"ShowDocumentRequest",{enumerable:!0,get:i(function(){return v_.ShowDocumentRequest},"get")});var w_=Yd();Object.defineProperty(g,"LinkedEditingRangeRequest",{enumerable:!0,get:i(function(){return w_.LinkedEditingRangeRequest},"get")});var wn=uf();Object.defineProperty(g,"FileOperationPatternKind",{enumerable:!0,get:i(function(){return wn.FileOperationPatternKind},"get")});Object.defineProperty(g,"DidCreateFilesNotification",{enumerable:!0,get:i(function(){return wn.DidCreateFilesNotification},"get")});Object.defineProperty(g,"WillCreateFilesRequest",{enumerable:!0,get:i(function(){return wn.WillCreateFilesRequest},"get")});Object.defineProperty(g,"DidRenameFilesNotification",{enumerable:!0,get:i(function(){return wn.DidRenameFilesNotification},"get")});Object.defineProperty(g,"WillRenameFilesRequest",{enumerable:!0,get:i(function(){return wn.WillRenameFilesRequest},"get")});Object.defineProperty(g,"DidDeleteFilesNotification",{enumerable:!0,get:i(function(){return wn.DidDeleteFilesNotification},"get")});Object.defineProperty(g,"WillDeleteFilesRequest",{enumerable:!0,get:i(function(){return wn.WillDeleteFilesRequest},"get")});var vu=mf();Object.defineProperty(g,"UniquenessLevel",{enumerable:!0,get:i(function(){return vu.UniquenessLevel},"get")});Object.defineProperty(g,"MonikerKind",{enumerable:!0,get:i(function(){return vu.MonikerKind},"get")});Object.defineProperty(g,"MonikerRequest",{enumerable:!0,get:i(function(){return vu.MonikerRequest},"get")});var wu=_f();Object.defineProperty(g,"TypeHierarchyPrepareRequest",{enumerable:!0,get:i(function(){return wu.TypeHierarchyPrepareRequest},"get")});Object.defineProperty(g,"TypeHierarchySubtypesRequest",{enumerable:!0,get:i(function(){return wu.TypeHierarchySubtypesRequest},"get")});Object.defineProperty(g,"TypeHierarchySupertypesRequest",{enumerable:!0,get:i(function(){return wu.TypeHierarchySupertypesRequest},"get")});var Ym=vf();Object.defineProperty(g,"InlineValueRequest",{enumerable:!0,get:i(function(){return Ym.InlineValueRequest},"get")});Object.defineProperty(g,"InlineValueRefreshRequest",{enumerable:!0,get:i(function(){return Ym.InlineValueRefreshRequest},"get")});var Su=Tf();Object.defineProperty(g,"InlayHintRequest",{enumerable:!0,get:i(function(){return Su.InlayHintRequest},"get")});Object.defineProperty(g,"InlayHintResolveRequest",{enumerable:!0,get:i(function(){return Su.InlayHintResolveRequest},"get")});Object.defineProperty(g,"InlayHintRefreshRequest",{enumerable:!0,get:i(function(){return Su.InlayHintRefreshRequest},"get")});var Wr=Cf();Object.defineProperty(g,"DiagnosticServerCancellationData",{enumerable:!0,get:i(function(){return Wr.DiagnosticServerCancellationData},"get")});Object.defineProperty(g,"DocumentDiagnosticReportKind",{enumerable:!0,get:i(function(){return Wr.DocumentDiagnosticReportKind},"get")});Object.defineProperty(g,"DocumentDiagnosticRequest",{enumerable:!0,get:i(function(){return Wr.DocumentDiagnosticRequest},"get")});Object.defineProperty(g,"WorkspaceDiagnosticRequest",{enumerable:!0,get:i(function(){return Wr.WorkspaceDiagnosticRequest},"get")});Object.defineProperty(g,"DiagnosticRefreshRequest",{enumerable:!0,get:i(function(){return Wr.DiagnosticRefreshRequest},"get")});var Pt=jf();Object.defineProperty(g,"NotebookCellKind",{enumerable:!0,get:i(function(){return Pt.NotebookCellKind},"get")});Object.defineProperty(g,"ExecutionSummary",{enumerable:!0,get:i(function(){return Pt.ExecutionSummary},"get")});Object.defineProperty(g,"NotebookCell",{enumerable:!0,get:i(function(){return Pt.NotebookCell},"get")});Object.defineProperty(g,"NotebookDocument",{enumerable:!0,get:i(function(){return Pt.NotebookDocument},"get")});Object.defineProperty(g,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:i(function(){return Pt.NotebookDocumentSyncRegistrationType},"get")});Object.defineProperty(g,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:i(function(){return Pt.DidOpenNotebookDocumentNotification},"get")});Object.defineProperty(g,"NotebookCellArrayChange",{enumerable:!0,get:i(function(){return Pt.NotebookCellArrayChange},"get")});Object.defineProperty(g,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:i(function(){return Pt.DidChangeNotebookDocumentNotification},"get")});Object.defineProperty(g,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:i(function(){return Pt.DidSaveNotebookDocumentNotification},"get")});Object.defineProperty(g,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:i(function(){return Pt.DidCloseNotebookDocumentNotification},"get")});var S_=Uf();Object.defineProperty(g,"InlineCompletionRequest",{enumerable:!0,get:i(function(){return S_.InlineCompletionRequest},"get")});var pu;(function(t){function e(n){let r=n;return Ae.string(r)||Ae.string(r.language)||Ae.string(r.scheme)||Ae.string(r.pattern)}i(e,"is"),t.is=e})(pu||(g.TextDocumentFilter=pu={}));var gu;(function(t){function e(n){let r=n;return Ae.objectLiteral(r)&&(Ae.string(r.notebookType)||Ae.string(r.scheme)||Ae.string(r.pattern))}i(e,"is"),t.is=e})(gu||(g.NotebookDocumentFilter=gu={}));var hu;(function(t){function e(n){let r=n;return Ae.objectLiteral(r)&&(Ae.string(r.notebook)||gu.is(r.notebook))&&(r.language===void 0||Ae.string(r.language))}i(e,"is"),t.is=e})(hu||(g.NotebookCellTextDocumentFilter=hu={}));var _u;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let r of n)if(!Ae.string(r)&&!pu.is(r)&&!hu.is(r))return!1;return!0}i(e,"is"),t.is=e})(_u||(g.DocumentSelector=_u={}));var zf;(function(t){t.method="client/registerCapability",t.messageDirection=F.MessageDirection.serverToClient,t.type=new F.ProtocolRequestType(t.method)})(zf||(g.RegistrationRequest=zf={}));var $f;(function(t){t.method="client/unregisterCapability",t.messageDirection=F.MessageDirection.serverToClient,t.type=new F.ProtocolRequestType(t.method)})($f||(g.UnregistrationRequest=$f={}));var Vf;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(Vf||(g.ResourceOperationKind=Vf={}));var Hf;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(Hf||(g.FailureHandlingKind=Hf={}));var Gf;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(Gf||(g.PositionEncodingKind=Gf={}));var Zf;(function(t){function e(n){let r=n;return r&&Ae.string(r.id)&&r.id.length>0}i(e,"hasId"),t.hasId=e})(Zf||(g.StaticRegistrationOptions=Zf={}));var Qf;(function(t){function e(n){let r=n;return r&&(r.documentSelector===null||_u.is(r.documentSelector))}i(e,"is"),t.is=e})(Qf||(g.TextDocumentRegistrationOptions=Qf={}));var Jf;(function(t){function e(r){let o=r;return Ae.objectLiteral(o)&&(o.workDoneProgress===void 0||Ae.boolean(o.workDoneProgress))}i(e,"is"),t.is=e;function n(r){let o=r;return o&&Ae.boolean(o.workDoneProgress)}i(n,"hasWorkDoneProgress"),t.hasWorkDoneProgress=n})(Jf||(g.WorkDoneProgressOptions=Jf={}));var Kf;(function(t){t.method="initialize",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType(t.method)})(Kf||(g.InitializeRequest=Kf={}));var Xf;(function(t){t.unknownProtocolVersion=1})(Xf||(g.InitializeErrorCodes=Xf={}));var Yf;(function(t){t.method="initialized",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolNotificationType(t.method)})(Yf||(g.InitializedNotification=Yf={}));var em;(function(t){t.method="shutdown",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType0(t.method)})(em||(g.ShutdownRequest=em={}));var tm;(function(t){t.method="exit",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolNotificationType0(t.method)})(tm||(g.ExitNotification=tm={}));var nm;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolNotificationType(t.method)})(nm||(g.DidChangeConfigurationNotification=nm={}));var rm;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(rm||(g.MessageType=rm={}));var im;(function(t){t.method="window/showMessage",t.messageDirection=F.MessageDirection.serverToClient,t.type=new F.ProtocolNotificationType(t.method)})(im||(g.ShowMessageNotification=im={}));var om;(function(t){t.method="window/showMessageRequest",t.messageDirection=F.MessageDirection.serverToClient,t.type=new F.ProtocolRequestType(t.method)})(om||(g.ShowMessageRequest=om={}));var sm;(function(t){t.method="window/logMessage",t.messageDirection=F.MessageDirection.serverToClient,t.type=new F.ProtocolNotificationType(t.method)})(sm||(g.LogMessageNotification=sm={}));var am;(function(t){t.method="telemetry/event",t.messageDirection=F.MessageDirection.serverToClient,t.type=new F.ProtocolNotificationType(t.method)})(am||(g.TelemetryEventNotification=am={}));var um;(function(t){t.None=0,t.Full=1,t.Incremental=2})(um||(g.TextDocumentSyncKind=um={}));var lm;(function(t){t.method="textDocument/didOpen",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolNotificationType(t.method)})(lm||(g.DidOpenTextDocumentNotification=lm={}));var cm;(function(t){function e(r){let o=r;return o!=null&&typeof o.text=="string"&&o.range!==void 0&&(o.rangeLength===void 0||typeof o.rangeLength=="number")}i(e,"isIncremental"),t.isIncremental=e;function n(r){let o=r;return o!=null&&typeof o.text=="string"&&o.range===void 0&&o.rangeLength===void 0}i(n,"isFull"),t.isFull=n})(cm||(g.TextDocumentContentChangeEvent=cm={}));var dm;(function(t){t.method="textDocument/didChange",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolNotificationType(t.method)})(dm||(g.DidChangeTextDocumentNotification=dm={}));var fm;(function(t){t.method="textDocument/didClose",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolNotificationType(t.method)})(fm||(g.DidCloseTextDocumentNotification=fm={}));var mm;(function(t){t.method="textDocument/didSave",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolNotificationType(t.method)})(mm||(g.DidSaveTextDocumentNotification=mm={}));var pm;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(pm||(g.TextDocumentSaveReason=pm={}));var gm;(function(t){t.method="textDocument/willSave",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolNotificationType(t.method)})(gm||(g.WillSaveTextDocumentNotification=gm={}));var hm;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType(t.method)})(hm||(g.WillSaveTextDocumentWaitUntilRequest=hm={}));var _m;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolNotificationType(t.method)})(_m||(g.DidChangeWatchedFilesNotification=_m={}));var ym;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(ym||(g.FileChangeType=ym={}));var bm;(function(t){function e(n){let r=n;return Ae.objectLiteral(r)&&(Bf.URI.is(r.baseUri)||Bf.WorkspaceFolder.is(r.baseUri))&&Ae.string(r.pattern)}i(e,"is"),t.is=e})(bm||(g.RelativePattern=bm={}));var vm;(function(t){t.Create=1,t.Change=2,t.Delete=4})(vm||(g.WatchKind=vm={}));var wm;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=F.MessageDirection.serverToClient,t.type=new F.ProtocolNotificationType(t.method)})(wm||(g.PublishDiagnosticsNotification=wm={}));var Sm;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(Sm||(g.CompletionTriggerKind=Sm={}));var Em;(function(t){t.method="textDocument/completion",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType(t.method)})(Em||(g.CompletionRequest=Em={}));var Tm;(function(t){t.method="completionItem/resolve",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType(t.method)})(Tm||(g.CompletionResolveRequest=Tm={}));var xm;(function(t){t.method="textDocument/hover",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType(t.method)})(xm||(g.HoverRequest=xm={}));var km;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(km||(g.SignatureHelpTriggerKind=km={}));var Pm;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType(t.method)})(Pm||(g.SignatureHelpRequest=Pm={}));var Rm;(function(t){t.method="textDocument/definition",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType(t.method)})(Rm||(g.DefinitionRequest=Rm={}));var Im;(function(t){t.method="textDocument/references",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType(t.method)})(Im||(g.ReferencesRequest=Im={}));var Mm;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType(t.method)})(Mm||(g.DocumentHighlightRequest=Mm={}));var Cm;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType(t.method)})(Cm||(g.DocumentSymbolRequest=Cm={}));var Lm;(function(t){t.method="textDocument/codeAction",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType(t.method)})(Lm||(g.CodeActionRequest=Lm={}));var Nm;(function(t){t.method="codeAction/resolve",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType(t.method)})(Nm||(g.CodeActionResolveRequest=Nm={}));var Am;(function(t){t.method="workspace/symbol",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType(t.method)})(Am||(g.WorkspaceSymbolRequest=Am={}));var Dm;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType(t.method)})(Dm||(g.WorkspaceSymbolResolveRequest=Dm={}));var Om;(function(t){t.method="textDocument/codeLens",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType(t.method)})(Om||(g.CodeLensRequest=Om={}));var Fm;(function(t){t.method="codeLens/resolve",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType(t.method)})(Fm||(g.CodeLensResolveRequest=Fm={}));var jm;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=F.MessageDirection.serverToClient,t.type=new F.ProtocolRequestType0(t.method)})(jm||(g.CodeLensRefreshRequest=jm={}));var qm;(function(t){t.method="textDocument/documentLink",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType(t.method)})(qm||(g.DocumentLinkRequest=qm={}));var Wm;(function(t){t.method="documentLink/resolve",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType(t.method)})(Wm||(g.DocumentLinkResolveRequest=Wm={}));var Um;(function(t){t.method="textDocument/formatting",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType(t.method)})(Um||(g.DocumentFormattingRequest=Um={}));var Bm;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType(t.method)})(Bm||(g.DocumentRangeFormattingRequest=Bm={}));var zm;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType(t.method)})(zm||(g.DocumentRangesFormattingRequest=zm={}));var $m;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType(t.method)})($m||(g.DocumentOnTypeFormattingRequest=$m={}));var Vm;(function(t){t.Identifier=1})(Vm||(g.PrepareSupportDefaultBehavior=Vm={}));var Hm;(function(t){t.method="textDocument/rename",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType(t.method)})(Hm||(g.RenameRequest=Hm={}));var Gm;(function(t){t.method="textDocument/prepareRename",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType(t.method)})(Gm||(g.PrepareRenameRequest=Gm={}));var Zm;(function(t){t.method="workspace/executeCommand",t.messageDirection=F.MessageDirection.clientToServer,t.type=new F.ProtocolRequestType(t.method)})(Zm||(g.ExecuteCommandRequest=Zm={}));var Qm;(function(t){t.method="workspace/applyEdit",t.messageDirection=F.MessageDirection.serverToClient,t.type=new F.ProtocolRequestType("workspace/applyEdit")})(Qm||(g.ApplyWorkspaceEditRequest=Qm={}))});var np=$(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.createProtocolConnection=void 0;var tp=vn();function E_(t,e,n,r){return tp.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,tp.createMessageConnection)(t,e,n,r)}i(E_,"createProtocolConnection");Po.createProtocolConnection=E_});var ip=$(Xe=>{"use strict";var T_=Xe&&Xe.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:i(function(){return e[n]},"get")}),Object.defineProperty(t,r,o)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Ro=Xe&&Xe.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&T_(e,t,n)};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.LSPErrorCodes=Xe.createProtocolConnection=void 0;Ro(vn(),Xe);Ro(co(),Xe);Ro(Se(),Xe);Ro(ep(),Xe);var x_=np();Object.defineProperty(Xe,"createProtocolConnection",{enumerable:!0,get:i(function(){return x_.createProtocolConnection},"get")});var rp;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(rp||(Xe.LSPErrorCodes=rp={}))});var sp=$(Rt=>{"use strict";var k_=Rt&&Rt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:i(function(){return e[n]},"get")}),Object.defineProperty(t,r,o)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),op=Rt&&Rt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&k_(e,t,n)};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.createProtocolConnection=void 0;var P_=su();op(su(),Rt);op(ip(),Rt);function R_(t,e,n,r){return(0,P_.createMessageConnection)(t,e,n,r)}i(R_,"createProtocolConnection");Rt.createProtocolConnection=R_});var nn={abap:{extensions:[".abap"]},aspdotnet:{extensions:[".asax",".ascx",".ashx",".asmx",".aspx",".axd"]},bat:{extensions:[".bat",".cmd"]},bibtex:{extensions:[".bib",".bibtex"]},blade:{extensions:[".blade",".blade.php"]},BluespecSystemVerilog:{extensions:[".bsv"]},c:{extensions:[".c",".cats",".h",".idc"]},csharp:{extensions:[".cake",".cs",".cs.pp",".csx",".linq"]},cpp:{extensions:[".c++",".cc",".cp",".cpp",".cppm",".cxx",".h",".h++",".hh",".hpp",".hxx",".idl",".inc",".inl",".ino",".ipp",".ixx",".rc",".re",".tcc",".tpp",".txx",".i"]},cobol:{extensions:[".cbl",".ccp",".cob",".cobol",".cpy"]},css:{extensions:[".css",".wxss"]},clojure:{extensions:[".bb",".boot",".cl2",".clj",".cljc",".cljs",".cljs.hl",".cljscm",".cljx",".edn",".hic"],filenames:["riemann.config"]},ql:{extensions:[".ql",".qll"]},coffeescript:{extensions:["._coffee",".cake",".cjsx",".coffee",".iced"],filenames:["Cakefile"]},cuda:{extensions:[".cu",".cuh"]},dart:{extensions:[".dart"]},dockerfile:{extensions:[".dockerfile"],filenames:["Containerfile","Dockerfile"]},dotenv:{extensions:[".env"],filenames:[".env",".env.ci",".env.dev",".env.development",".env.development.local",".env.example",".env.local",".env.prod",".env.production",".env.sample",".env.staging",".env.test",".env.testing"]},html:{extensions:[".ect",".ejs",".ejs.t",".jst",".hta",".htm",".html",".html.hl",".html5",".inc",".jsp",".njk",".tpl",".twig",".wxml",".xht",".xhtml",".phtml",".liquid"]},elixir:{extensions:[".ex",".exs"],filenames:["mix.lock"]},erlang:{extensions:[".app",".app.src",".erl",".es",".escript",".hrl",".xrl",".yrl"],filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"]},fsharp:{extensions:[".fs",".fsi",".fsx"]},go:{extensions:[".go"]},groovy:{extensions:[".gradle",".groovy",".grt",".gtpl",".gvy",".jenkinsfile"],filenames:["Jenkinsfile","Jenkinsfile"]},graphql:{extensions:[".gql",".graphql",".graphqls"]},terraform:{extensions:[".hcl",".nomad",".tf",".tfvars",".workflow"]},hlsl:{extensions:[".cginc",".fx",".fxh",".hlsl",".hlsli"]},erb:{extensions:[".erb",".erb.deface",".rhtml"]},razor:{extensions:[".cshtml",".razor"]},haml:{extensions:[".haml",".haml.deface"]},handlebars:{extensions:[".handlebars",".hbs"]},haskell:{extensions:[".hs",".hs-boot",".hsc"]},ini:{extensions:[".cfg",".cnf",".dof",".ini",".lektorproject",".prefs",".pro",".properties",".url"],filenames:[".coveragerc",".flake8",".pylintrc","HOSTS","buildozer.spec","hosts","pylintrc","vlcrc"]},json:{extensions:[".4DForm",".4DProject",".JSON-tmLanguage",".avsc",".geojson",".gltf",".har",".ice",".json",".jsonl",".mcmeta",".sarif",".tfstate",".tfstate.backup",".topojson",".webapp",".webmanifest",".yy",".yyp"],filenames:[".all-contributorsrc",".arcconfig",".auto-changelog",".c8rc",".htmlhintrc",".imgbotconfig",".nycrc",".tern-config",".tern-project",".watchmanconfig","MODULE.bazel.lock","Pipfile.lock","composer.lock","deno.lock","flake.lock","mcmod.info"]},jsonc:{extensions:[".code-snippets",".code-workspace",".jsonc",".sublime-build",".sublime-color-scheme",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session"],filenames:[".babelrc",".devcontainer.json",".eslintrc.json",".jscsrc",".jshintrc",".jslintrc",".swcrc","api-extractor.json","argv.json","devcontainer.json","extensions.json","jsconfig.json","keybindings.json","language-configuration.json","launch.json","profiles.json","settings.json","tasks.json","tsconfig.json","tslint.json"]},java:{extensions:[".jav",".java",".jsh"]},javascript:{extensions:["._js",".bones",".cjs",".es",".es6",".frag",".gs",".jake",".javascript",".js",".jsb",".jscad",".jsfl",".jslib",".jsm",".jspre",".jss",".mjs",".njs",".pac",".sjs",".ssjs",".xsjs",".xsjslib"],filenames:["Jakefile"]},julia:{extensions:[".jl"]},python:{extensions:[".ipynb",".cgi",".codon",".fcgi",".gyp",".gypi",".lmi",".py",".py3",".pyde",".pyi",".pyp",".pyt",".pyw",".rpy",".sage",".spec",".tac",".wsgi",".xpy"],filenames:["Notebook",".gclient","DEPS","SConscript","SConstruct","wscript"]},kotlin:{extensions:[".kt",".ktm",".kts"]},less:{extensions:[".less"]},lua:{extensions:[".fcgi",".lua",".luau",".nse",".p8",".pd_lua",".rbxs",".rockspec",".wlua"],filenames:[".luacheckrc"]},makefile:{extensions:[".d",".mak",".make",".makefile",".mk",".mkfile"],filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"]},markdown:{extensions:[".livemd",".markdown",".md",".mdown",".mdwn",".mdx",".mkd",".mkdn",".mkdown",".ronn",".scd",".workbook"],filenames:["contents.lr"]},"objective-c":{extensions:[".h",".m"]},"objective-cpp":{extensions:[".mm"]},php:{extensions:[".aw",".ctp",".fcgi",".inc",".install",".module",".php",".php3",".php4",".php5",".phps",".phpt",".theme"],filenames:[".php",".php_cs",".php_cs.dist","Phakefile"]},perl:{extensions:[".al",".cgi",".fcgi",".perl",".ph",".pl",".plx",".pm",".psgi",".t"],filenames:[".latexmkrc","Makefile.PL","Rexfile","ack","cpanfile","latexmkrc"]},powershell:{extensions:[".ps1",".psd1",".psm1"]},pug:{extensions:[".jade",".pug"]},r:{extensions:[".r",".rd",".rsx"],filenames:[".Rprofile","expr-dist"]},ruby:{extensions:[".builder",".eye",".fcgi",".gemspec",".god",".jbuilder",".mspec",".pluginspec",".podspec",".prawn",".rabl",".rake",".rb",".rbi",".rbuild",".rbw",".rbx",".ru",".ruby",".spec",".thor",".watchr"],filenames:[".irbrc",".pryrc",".simplecov","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Steepfile","Thorfile","Vagrantfile","buildfile"]},rust:{extensions:[".rs",".rs.in"]},scss:{extensions:[".scss"]},sql:{extensions:[".cql",".ddl",".inc",".mysql",".prc",".sql",".tab",".udf",".viw"]},sass:{extensions:[".sass"]},scala:{extensions:[".kojo",".sbt",".sc",".scala"]},shellscript:{extensions:[".bash",".bats",".cgi",".command",".fcgi",".fish",".ksh",".sh",".sh.in",".tmux",".tool",".trigger",".zsh",".zsh-theme"],filenames:[".bash_aliases",".bash_functions",".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".envrc",".flaskenv",".kshrc",".login",".profile",".tmux.conf",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_aliases","bash_logout","bash_profile","bashrc","cshrc","gradlew","kshrc","login","man","profile","tmux.conf","zlogin","zlogout","zprofile","zshenv","zshrc"]},slim:{extensions:[".slim"]},solidity:{extensions:[".sol"]},stylus:{extensions:[".styl"]},svelte:{extensions:[".svelte"]},swift:{extensions:[".swift"]},systemverilog:{extensions:[".sv",".svh",".vh"]},typescriptreact:{extensions:[".tsx"]},latex:{extensions:[".aux",".bbx",".cbx",".cls",".dtx",".ins",".lbx",".ltx",".mkii",".mkiv",".mkvi",".sty",".tex",".toc"]},typescript:{extensions:[".cts",".mts",".ts"]},verilog:{extensions:[".v",".veo"]},vim:{extensions:[".vba",".vim",".vimrc",".vmb"],filenames:[".exrc",".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"]},vb:{extensions:[".vb",".vbhtml",".Dsr",".bas",".cls",".ctl",".frm",".vbs"]},vue:{extensions:[".nvue",".vue"]},xml:{extensions:[".adml",".admx",".ant",".axaml",".axml",".builds",".ccproj",".ccxml",".clixml",".cproject",".cscfg",".csdef",".csl",".csproj",".ct",".depproj",".dita",".ditamap",".ditaval",".dll.config",".dotsettings",".filters",".fsproj",".fxml",".glade",".gml",".gmx",".grxml",".gst",".hzp",".iml",".ivy",".jelly",".jsproj",".kml",".launch",".mdpolicy",".mjml",".mod",".mojo",".mxml",".natvis",".ncl",".ndproj",".nproj",".nuspec",".odd",".osm",".pkgproj",".plist",".pluginspec",".proj",".props",".ps1xml",".psc1",".pt",".pubxml",".qhelp",".rdf",".res",".resx",".rss",".sch",".scxml",".sfproj",".shproj",".srdf",".storyboard",".sublime-snippet",".svg",".sw",".targets",".tml",".typ",".ui",".urdf",".ux",".vbproj",".vcxproj",".vsixmanifest",".vssettings",".vstemplate",".vxml",".wixproj",".workflow",".wsdl",".wsf",".wxi",".wxl",".wxs",".x3d",".xacro",".xaml",".xib",".xlf",".xliff",".xmi",".xml",".xml.dist",".xmp",".xproj",".xsd",".xspec",".xul",".zcml"],filenames:[".classpath",".cproject",".project","App.config","NuGet.config","Settings.StyleCop","Web.Debug.config","Web.Release.config","Web.config","packages.config"]},xsl:{extensions:[".xsl",".xslt"]},yaml:{extensions:[".mir",".reek",".rviz",".sublime-syntax",".syntax",".yaml",".yaml-tmlanguage",".yaml.sed",".yml",".yml.mysql"],filenames:[".clang-format",".clang-tidy",".gemrc","CITATION.cff","glide.lock","yarn.lock"]},javascriptreact:{extensions:[".jsx"]},legend:{extensions:[".pure"]},slang:{extensions:[".fxc",".hlsl",".s",".slang",".slangh",".usf",".ush",".vfx"]}};var Iu=[".ejs",".erb",".haml",".hbs",".j2",".jinja",".jinja2",".liquid",".mustache",".njk",".php",".pug",".slim",".webc"],Mu={".php":[".blade"]},Cu=Object.keys(nn).flatMap(t=>nn[t].extensions);var Lu;(()=>{"use strict";var t={975:D=>{function E(x){if(typeof x!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(x))}i(E,"e");function W(x,M){for(var N,z="",H=0,U=-1,K=0,ee=0;ee<=x.length;++ee){if(ee<x.length)N=x.charCodeAt(ee);else{if(N===47)break;N=47}if(N===47){if(!(U===ee-1||K===1))if(U!==ee-1&&K===2){if(z.length<2||H!==2||z.charCodeAt(z.length-1)!==46||z.charCodeAt(z.length-2)!==46){if(z.length>2){var Pe=z.lastIndexOf("/");if(Pe!==z.length-1){Pe===-1?(z="",H=0):H=(z=z.slice(0,Pe)).length-1-z.lastIndexOf("/"),U=ee,K=0;continue}}else if(z.length===2||z.length===1){z="",H=0,U=ee,K=0;continue}}M&&(z.length>0?z+="/..":z="..",H=2)}else z.length>0?z+="/"+x.slice(U+1,ee):z=x.slice(U+1,ee),H=ee-U-1;U=ee,K=0}else N===46&&K!==-1?++K:K=-1}return z}i(W,"r");var B={resolve:i(function(){for(var x,M="",N=!1,z=arguments.length-1;z>=-1&&!N;z--){var H;z>=0?H=arguments[z]:(x===void 0&&(x=process.cwd()),H=x),E(H),H.length!==0&&(M=H+"/"+M,N=H.charCodeAt(0)===47)}return M=W(M,!N),N?M.length>0?"/"+M:"/":M.length>0?M:"."},"resolve"),normalize:i(function(x){if(E(x),x.length===0)return".";var M=x.charCodeAt(0)===47,N=x.charCodeAt(x.length-1)===47;return(x=W(x,!M)).length!==0||M||(x="."),x.length>0&&N&&(x+="/"),M?"/"+x:x},"normalize"),isAbsolute:i(function(x){return E(x),x.length>0&&x.charCodeAt(0)===47},"isAbsolute"),join:i(function(){if(arguments.length===0)return".";for(var x,M=0;M<arguments.length;++M){var N=arguments[M];E(N),N.length>0&&(x===void 0?x=N:x+="/"+N)}return x===void 0?".":B.normalize(x)},"join"),relative:i(function(x,M){if(E(x),E(M),x===M||(x=B.resolve(x))===(M=B.resolve(M)))return"";for(var N=1;N<x.length&&x.charCodeAt(N)===47;++N);for(var z=x.length,H=z-N,U=1;U<M.length&&M.charCodeAt(U)===47;++U);for(var K=M.length-U,ee=H<K?H:K,Pe=-1,le=0;le<=ee;++le){if(le===ee){if(K>ee){if(M.charCodeAt(U+le)===47)return M.slice(U+le+1);if(le===0)return M.slice(U+le)}else H>ee&&(x.charCodeAt(N+le)===47?Pe=le:le===0&&(Pe=0));break}var Ge=x.charCodeAt(N+le);if(Ge!==M.charCodeAt(U+le))break;Ge===47&&(Pe=le)}var vt="";for(le=N+Pe+1;le<=z;++le)le!==z&&x.charCodeAt(le)!==47||(vt.length===0?vt+="..":vt+="/..");return vt.length>0?vt+M.slice(U+Pe):(U+=Pe,M.charCodeAt(U)===47&&++U,M.slice(U))},"relative"),_makeLong:i(function(x){return x},"_makeLong"),dirname:i(function(x){if(E(x),x.length===0)return".";for(var M=x.charCodeAt(0),N=M===47,z=-1,H=!0,U=x.length-1;U>=1;--U)if((M=x.charCodeAt(U))===47){if(!H){z=U;break}}else H=!1;return z===-1?N?"/":".":N&&z===1?"//":x.slice(0,z)},"dirname"),basename:i(function(x,M){if(M!==void 0&&typeof M!="string")throw new TypeError('"ext" argument must be a string');E(x);var N,z=0,H=-1,U=!0;if(M!==void 0&&M.length>0&&M.length<=x.length){if(M.length===x.length&&M===x)return"";var K=M.length-1,ee=-1;for(N=x.length-1;N>=0;--N){var Pe=x.charCodeAt(N);if(Pe===47){if(!U){z=N+1;break}}else ee===-1&&(U=!1,ee=N+1),K>=0&&(Pe===M.charCodeAt(K)?--K==-1&&(H=N):(K=-1,H=ee))}return z===H?H=ee:H===-1&&(H=x.length),x.slice(z,H)}for(N=x.length-1;N>=0;--N)if(x.charCodeAt(N)===47){if(!U){z=N+1;break}}else H===-1&&(U=!1,H=N+1);return H===-1?"":x.slice(z,H)},"basename"),extname:i(function(x){E(x);for(var M=-1,N=0,z=-1,H=!0,U=0,K=x.length-1;K>=0;--K){var ee=x.charCodeAt(K);if(ee!==47)z===-1&&(H=!1,z=K+1),ee===46?M===-1?M=K:U!==1&&(U=1):M!==-1&&(U=-1);else if(!H){N=K+1;break}}return M===-1||z===-1||U===0||U===1&&M===z-1&&M===N+1?"":x.slice(M,z)},"extname"),format:i(function(x){if(x===null||typeof x!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof x);return function(M,N){var z=N.dir||N.root,H=N.base||(N.name||"")+(N.ext||"");return z?z===N.root?z+H:z+"/"+H:H}(0,x)},"format"),parse:i(function(x){E(x);var M={root:"",dir:"",base:"",ext:"",name:""};if(x.length===0)return M;var N,z=x.charCodeAt(0),H=z===47;H?(M.root="/",N=1):N=0;for(var U=-1,K=0,ee=-1,Pe=!0,le=x.length-1,Ge=0;le>=N;--le)if((z=x.charCodeAt(le))!==47)ee===-1&&(Pe=!1,ee=le+1),z===46?U===-1?U=le:Ge!==1&&(Ge=1):U!==-1&&(Ge=-1);else if(!Pe){K=le+1;break}return U===-1||ee===-1||Ge===0||Ge===1&&U===ee-1&&U===K+1?ee!==-1&&(M.base=M.name=K===0&&H?x.slice(1,ee):x.slice(K,ee)):(K===0&&H?(M.name=x.slice(1,U),M.base=x.slice(1,ee)):(M.name=x.slice(K,U),M.base=x.slice(K,ee)),M.ext=x.slice(U,ee)),K>0?M.dir=x.slice(0,K-1):H&&(M.dir="/"),M},"parse"),sep:"/",delimiter:":",win32:null,posix:null};B.posix=B,D.exports=B}},e={};function n(D){var E=e[D];if(E!==void 0)return E.exports;var W=e[D]={exports:{}};return t[D](W,W.exports,n),W.exports}i(n,"r"),n.d=(D,E)=>{for(var W in E)n.o(E,W)&&!n.o(D,W)&&Object.defineProperty(D,W,{enumerable:!0,get:E[W]})},n.o=(D,E)=>Object.prototype.hasOwnProperty.call(D,E),n.r=D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})};var r={};let o;n.r(r),n.d(r,{URI:i(()=>v,"URI"),Utils:i(()=>Oe,"Utils")}),typeof process=="object"?o=process.platform==="win32":typeof navigator=="object"&&(o=navigator.userAgent.indexOf("Windows")>=0);let s=/^\w[\w\d+.-]*$/,a=/^\//,u=/^\/\//;function d(D,E){if(!D.scheme&&E)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${D.authority}", path: "${D.path}", query: "${D.query}", fragment: "${D.fragment}"}`);if(D.scheme&&!s.test(D.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(D.path){if(D.authority){if(!a.test(D.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(u.test(D.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}i(d,"a");let f="",p="/",b=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class v{static{i(this,"l")}static isUri(E){return E instanceof v||!!E&&typeof E.authority=="string"&&typeof E.fragment=="string"&&typeof E.path=="string"&&typeof E.query=="string"&&typeof E.scheme=="string"&&typeof E.fsPath=="string"&&typeof E.with=="function"&&typeof E.toString=="function"}scheme;authority;path;query;fragment;constructor(E,W,B,x,M,N=!1){typeof E=="object"?(this.scheme=E.scheme||f,this.authority=E.authority||f,this.path=E.path||f,this.query=E.query||f,this.fragment=E.fragment||f):(this.scheme=function(z,H){return z||H?z:"file"}(E,N),this.authority=W||f,this.path=function(z,H){switch(z){case"https":case"http":case"file":H?H[0]!==p&&(H=p+H):H=p}return H}(this.scheme,B||f),this.query=x||f,this.fragment=M||f,d(this,N))}get fsPath(){return I(this,!1)}with(E){if(!E)return this;let{scheme:W,authority:B,path:x,query:M,fragment:N}=E;return W===void 0?W=this.scheme:W===null&&(W=f),B===void 0?B=this.authority:B===null&&(B=f),x===void 0?x=this.path:x===null&&(x=f),M===void 0?M=this.query:M===null&&(M=f),N===void 0?N=this.fragment:N===null&&(N=f),W===this.scheme&&B===this.authority&&x===this.path&&M===this.query&&N===this.fragment?this:new A(W,B,x,M,N)}static parse(E,W=!1){let B=b.exec(E);return B?new A(B[2]||f,fe(B[4]||f),fe(B[5]||f),fe(B[7]||f),fe(B[9]||f),W):new A(f,f,f,f,f)}static file(E){let W=f;if(o&&(E=E.replace(/\\/g,p)),E[0]===p&&E[1]===p){let B=E.indexOf(p,2);B===-1?(W=E.substring(2),E=p):(W=E.substring(2,B),E=E.substring(B)||p)}return new A("file",W,E,f,f)}static from(E){let W=new A(E.scheme,E.authority,E.path,E.query,E.fragment);return d(W,!0),W}toString(E=!1){return V(this,E)}toJSON(){return this}static revive(E){if(E){if(E instanceof v)return E;{let W=new A(E);return W._formatted=E.external,W._fsPath=E._sep===T?E.fsPath:null,W}}return E}}let T=o?1:void 0;class A extends v{static{i(this,"d")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=I(this,!1)),this._fsPath}toString(E=!1){return E?V(this,!0):(this._formatted||(this._formatted=V(this,!1)),this._formatted)}toJSON(){let E={$mid:1};return this._fsPath&&(E.fsPath=this._fsPath,E._sep=T),this._formatted&&(E.external=this._formatted),this.path&&(E.path=this.path),this.scheme&&(E.scheme=this.scheme),this.authority&&(E.authority=this.authority),this.query&&(E.query=this.query),this.fragment&&(E.fragment=this.fragment),E}}let P={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function j(D,E,W){let B,x=-1;for(let M=0;M<D.length;M++){let N=D.charCodeAt(M);if(N>=97&&N<=122||N>=65&&N<=90||N>=48&&N<=57||N===45||N===46||N===95||N===126||E&&N===47||W&&N===91||W&&N===93||W&&N===58)x!==-1&&(B+=encodeURIComponent(D.substring(x,M)),x=-1),B!==void 0&&(B+=D.charAt(M));else{B===void 0&&(B=D.substr(0,M));let z=P[N];z!==void 0?(x!==-1&&(B+=encodeURIComponent(D.substring(x,M)),x=-1),B+=z):x===-1&&(x=M)}}return x!==-1&&(B+=encodeURIComponent(D.substring(x))),B!==void 0?B:D}i(j,"m");function O(D){let E;for(let W=0;W<D.length;W++){let B=D.charCodeAt(W);B===35||B===63?(E===void 0&&(E=D.substr(0,W)),E+=P[B]):E!==void 0&&(E+=D[W])}return E!==void 0?E:D}i(O,"y");function I(D,E){let W;return W=D.authority&&D.path.length>1&&D.scheme==="file"?`//${D.authority}${D.path}`:D.path.charCodeAt(0)===47&&(D.path.charCodeAt(1)>=65&&D.path.charCodeAt(1)<=90||D.path.charCodeAt(1)>=97&&D.path.charCodeAt(1)<=122)&&D.path.charCodeAt(2)===58?E?D.path.substr(1):D.path[1].toLowerCase()+D.path.substr(2):D.path,o&&(W=W.replace(/\//g,"\\")),W}i(I,"v");function V(D,E){let W=E?O:j,B="",{scheme:x,authority:M,path:N,query:z,fragment:H}=D;if(x&&(B+=x,B+=":"),(M||x==="file")&&(B+=p,B+=p),M){let U=M.indexOf("@");if(U!==-1){let K=M.substr(0,U);M=M.substr(U+1),U=K.lastIndexOf(":"),U===-1?B+=W(K,!1,!1):(B+=W(K.substr(0,U),!1,!1),B+=":",B+=W(K.substr(U+1),!1,!0)),B+="@"}M=M.toLowerCase(),U=M.lastIndexOf(":"),U===-1?B+=W(M,!1,!0):(B+=W(M.substr(0,U),!1,!0),B+=M.substr(U))}if(N){if(N.length>=3&&N.charCodeAt(0)===47&&N.charCodeAt(2)===58){let U=N.charCodeAt(1);U>=65&&U<=90&&(N=`/${String.fromCharCode(U+32)}:${N.substr(3)}`)}else if(N.length>=2&&N.charCodeAt(1)===58){let U=N.charCodeAt(0);U>=65&&U<=90&&(N=`${String.fromCharCode(U+32)}:${N.substr(2)}`)}B+=W(N,!0,!1)}return z&&(B+="?",B+=W(z,!1,!1)),H&&(B+="#",B+=E?H:j(H,!1,!1)),B}i(V,"b");function X(D){try{return decodeURIComponent(D)}catch{return D.length>3?D.substr(0,3)+X(D.substr(3)):D}}i(X,"C");let Y=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function fe(D){return D.match(Y)?D.replace(Y,E=>X(E)):D}i(fe,"w");var oe=n(975);let pe=oe.posix||oe,De="/";var Oe;(function(D){D.joinPath=function(E,...W){return E.with({path:pe.join(E.path,...W)})},D.resolvePath=function(E,...W){let B=E.path,x=!1;B[0]!==De&&(B=De+B,x=!0);let M=pe.resolve(B,...W);return x&&M[0]===De&&!E.authority&&(M=M.substring(1)),E.with({path:M})},D.dirname=function(E){if(E.path.length===0||E.path===De)return E;let W=pe.dirname(E.path);return W.length===1&&W.charCodeAt(0)===46&&(W=""),E.with({path:W})},D.basename=function(E){return pe.basename(E.path)},D.extname=function(E){return pe.extname(E.path)}})(Oe||(Oe={})),Lu=r})();var{URI:Co,Utils:A_}=Lu;function Nu(t,e=!0){if(e&&/^[[:alnum:]]:\\/.test(t))throw new Error(`Could not parse <${t}>: Windows-style path`);try{let n=t.match(/^(?:([^:/?#]+?:)?\/\/)(\/\/.*)$/);return n?Co.parse(n[1]+n[2],e):Co.parse(t,e)}catch(n){let r=new Error(`Could not parse <${t}>`);throw r.cause=n,r}}i(Nu,"parse");var Lo=require("os"),No=require("path");function Du(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substring(0,3)+Du(t.substring(3)):t}}i(Du,"decodeURIComponentGraceful");var Au=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function hp(t){return t.match(Au)?t.replace(Au,e=>Du(e)):t}i(hp,"percentDecode");function rn(t,e=!1){return Nu(t,e)}i(rn,"parseUri");function _p(t){return["file","notebook","vscode-notebook","vscode-notebook-cell"].includes(t)}i(_p,"isFsScheme");function yp(t){return _p(t.scheme)&&(!t.authority||(0,Lo.platform)()=="win32")}i(yp,"isFsUri");function Ou(t){try{typeof t=="string"&&(t=rn(t,!0))}catch{return}if(yp(t))if((0,Lo.platform)()==="win32"){let e=t.path;return t.authority?e=`//${t.authority}${t.path}`:/^\/[A-Za-z]:/.test(e)&&(e=e.substring(1)),(0,No.normalize)(e)}else return t.authority?void 0:t.path}i(Ou,"getFsPath");function Fu(t){return hp(t.toString().replace(/[#?].*$/,"").replace(/\/$/,"").replace(/^.*[/:]/,""))}i(Fu,"basename");var Ao=Lt(require("node:path"));var dr=class{constructor(e,n,r){this.languageId=e;this.isGuess=n;this.fileExtension=r}static{i(this,"Language")}},fr=class{static{i(this,"LanguageDetection")}},Do=new Map,Rn=new Map;for(let[t,{extensions:e,filenames:n}]of Object.entries(nn)){for(let r of e)Do.set(r,[...Do.get(r)??[],t]);for(let r of n??[])Rn.set(r,[...Rn.get(r)??[],t])}var Oo=class extends fr{static{i(this,"FilenameAndExensionLanguageDetection")}detectLanguage(e){let n=Fu(e.uri),r=Ao.extname(n).toLowerCase(),o=this.extensionWithoutTemplateLanguage(n,r),s=this.detectLanguageId(n,o);return new dr(s.languageId,s.isGuess,this.computeFullyQualifiedExtension(r,o))}extensionWithoutTemplateLanguage(e,n){if(Iu.includes(n)){let r=e.substring(0,e.lastIndexOf(".")),o=Ao.extname(r).toLowerCase();if(o.length>0&&Cu.includes(o)&&this.isExtensionValidForTemplateLanguage(n,o))return o}return n}isExtensionValidForTemplateLanguage(e,n){let r=Mu[e];return!r||r.includes(n)}detectLanguageId(e,n){if(Rn.has(e))return{languageId:Rn.get(e)[0],isGuess:!1};let r=Do.get(n)??[];if(r.length>0)return{languageId:r[0],isGuess:r.length>1};for(;e.includes(".");)if(e=e.replace(/\.[^.]*$/,""),Rn.has(e))return{languageId:Rn.get(e)[0],isGuess:!1};return{languageId:"unknown",isGuess:!0}}computeFullyQualifiedExtension(e,n){return e!==n?n+e:e}},Fo=class extends fr{constructor(n){super();this.delegate=n}static{i(this,"GroupingLanguageDetection")}detectLanguage(n){let r=this.delegate.detectLanguage(n),o=r.languageId;return o==="c"||o==="cpp"?new dr("cpp",r.isGuess,r.fileExtension):r}},jo=class extends fr{constructor(n){super();this.delegate=n}static{i(this,"ClientProvidedLanguageDetection")}detectLanguage(n){return n.uri.startsWith("untitled:")||n.uri.startsWith("vscode-notebook-cell:")?new dr(n.languageId,!0,""):this.delegate.detectLanguage(n)}},V_=new Fo(new jo(new Oo));function Nt(t){if(t.isCancellationRequested)throw new qo}i(Nt,"throwIfCancellationRequested");var qo=class extends Error{static{i(this,"CancellationError")}constructor(){super(bp),this.name=this.message}},bp="Canceled",Yr=class{constructor(){this.items=[]}static{i(this,"Stack")}push(e){this.items.push(e)}pop(){return this.items.pop()}peek(){return this.items[this.items.length-1]}tryPeek(){return this.items.length>0}toArray(){return this.items}};function Wo(t,e,n){return{type:"virtual",indentation:t,subs:e,label:n}}i(Wo,"virtualNode");function ju(t,e,n,r,o){if(n==="")throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:t,lineNumber:e,sourceLine:n,subs:r,label:o}}i(ju,"lineNode");function Uo(t){return{type:"blank",lineNumber:t,subs:[]}}i(Uo,"blankNode");function ei(t){return{type:"top",indentation:-1,subs:t??[]}}i(ei,"topNode");function Fe(t){return t.type==="blank"}i(Fe,"isBlank");function on(t){return t.type==="line"}i(on,"isLine");function sn(t){return t.type==="virtual"}i(sn,"isVirtual");function qu(t,e){return We(t,n=>{n.label=n.label?e(n.label)?void 0:n.label:void 0},"bottomUp"),t}i(qu,"clearLabelsIf");function an(t,e){switch(t.type){case"line":case"virtual":{let n=t.subs.map(r=>an(r,e));return{...t,subs:n,label:t.label?e(t.label):void 0}}case"blank":return{...t,label:t.label?e(t.label):void 0};case"top":return{...t,subs:t.subs.map(n=>an(n,e)),label:t.label?e(t.label):void 0}}}i(an,"mapLabels");function We(t,e,n){function r(o){n==="topDown"&&e(o),o.subs.forEach(s=>{r(s)}),n==="bottomUp"&&e(o)}i(r,"_visit"),r(t)}i(We,"visitTree");function Bo(t,e,n,r){let o=e;function s(a){o=n(a,o)}return i(s,"visitor"),We(t,s,r),o}i(Bo,"foldTree");function ti(t,e,n){let r=i(s=>{if(n!==void 0&&n(s))return s;{let a=s.subs.map(r).filter(u=>u!==void 0);return s.subs=a,e(s)}},"rebuild"),o=r(t);return o!==void 0?o:ei()}i(ti,"rebuildTree");function wp(t){let e=t.split(`
`),n=e.map(f=>f.match(/^\s*/)[0].length),r=e.map(f=>f.trimLeft());function o(f){let[p,b]=s(f+1,n[f]);return[ju(n[f],f,r[f],p),b]}i(o,"parseNode");function s(f,p){let b,v=[],T=f,A;for(;T<r.length&&(r[T]===""||n[T]>p);)if(r[T]==="")A===void 0&&(A=T),T+=1;else{if(A!==void 0){for(let P=A;P<T;P++)v.push(Uo(P));A=void 0}[b,T]=o(T),v.push(b)}return A!==void 0&&(T=A),[v,T]}i(s,"parseSubs");let[a,u]=s(0,-1),d=u;for(;d<r.length&&r[d]==="";)a.push(Uo(d)),d+=1;if(d<r.length)throw new Error(`Parsing did not go to end of file. Ended at ${d} out of ${r.length}`);return ei(a)}i(wp,"parseRaw");function mr(t,e){function n(r){if(on(r)){let o=e.find(s=>s.matches(r.sourceLine));o&&(r.label=o.label)}}i(n,"visitor"),We(t,n,"bottomUp")}i(mr,"labelLines");function ni(t){function e(n){if(sn(n)&&n.label===void 0){let r=n.subs.filter(o=>!Fe(o));r.length===1&&(n.label=r[0].label)}}i(e,"visitor"),We(t,e,"bottomUp")}i(ni,"labelVirtualInherited");function pr(t){return Object.keys(t).map(e=>{let n;return t[e].test?n=i(r=>t[e].test(r),"matches"):n=t[e],{matches:n,label:e}})}i(pr,"buildLabelRules");function zo(t){let n=ti(t,i(function(r){if(r.subs.length===0||r.subs.findIndex(a=>a.label==="closer"||a.label==="opener")===-1)return r;let o=[],s;for(let a=0;a<r.subs.length;a++){let u=r.subs[a],d=r.subs[a-1];if(u.label==="opener"&&d!==void 0&&on(d))d.subs.push(u),u.subs.forEach(f=>d.subs.push(f)),u.subs=[];else if(u.label==="closer"&&s!==void 0&&(on(u)||sn(u))&&u.indentation>=s.indentation){let f=o.length-1;for(;f>0&&Fe(o[f]);)f-=1;if(s.subs.push(...o.splice(f+1)),u.subs.length>0){let p=s.subs.findIndex(A=>A.label!=="newVirtual"),b=s.subs.slice(0,p),v=s.subs.slice(p),T=v.length>0?[Wo(u.indentation,v,"newVirtual")]:[];s.subs=[...b,...T,u]}else s.subs.push(u)}else o.push(u),Fe(u)||(s=u)}return r.subs=o,r},"rebuilder"));return qu(t,r=>r==="newVirtual"),n}i(zo,"combineClosersAndOpeners");function Wu(t,e=Fe,n){return ti(t,i(function(o){if(o.subs.length<=1)return o;let s=[],a=[],u,d=!1;function f(p=!1){if(u!==void 0&&(s.length>0||!p)){let b=Wo(u,a,n);s.push(b)}else a.forEach(b=>s.push(b))}i(f,"flushBlockIntoNewSubs");for(let p=0;p<o.subs.length;p++){let b=o.subs[p],v=e(b);!v&&d&&(f(),a=[]),d=v,a.push(b),Fe(b)||(u=u??b.indentation)}return f(!0),o.subs=s,o},"rebuilder"))}i(Wu,"groupBlocks");function un(t){return ti(t,i(function(n){return sn(n)&&n.label===void 0&&n.subs.length<=1?n.subs.length===0?void 0:n.subs[0]:(n.subs.length===1&&sn(n.subs[0])&&n.subs[0].label===void 0&&(n.subs=n.subs[0].subs),n)},"rebuilder"))}i(un,"flattenVirtual");var Sp={opener:/^[[({]/,closer:/^[\])}]/},Ep=pr(Sp),Uu={};function $o(t,e){Uu[t]=e}i($o,"registerLanguageSpecificParser");function gr(t,e){let n=wp(t),r=Uu[e??""];return r?r(n):(mr(n,Ep),zo(n))}i(gr,"parseTree");var Tp={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[[({]/,closer:/^[\])}]/},xp=pr(Tp);function Bu(t){let e=t;return mr(e,xp),e=zo(e),e=un(e),ni(e),We(e,n=>{if(n.label==="class"||n.label==="interface")for(let r of n.subs)!Fe(r)&&(r.label===void 0||r.label==="annotation")&&(r.label="member")},"bottomUp"),e}i(Bu,"processJava");var kp={heading:/^# /,subheading:/^## /,subsubheading:/### /},Pp=pr(kp);function zu(t){let e=t;if(mr(e,Pp),Fe(e))return e;function n(s){if(s.label==="heading")return 1;if(s.label==="subheading")return 2;if(s.label==="subsubheading")return 3}i(n,"headingLevel");let r=[e],o=[...e.subs];e.subs=[];for(let s of o){let a=n(s);if(a===void 0||Fe(s))r[r.length-1].subs.push(s);else{for(;r.length<a;)r.push(r[r.length-1]);for(r[a-1].subs.push(s),r[a]=s;r.length>a+1;)r.pop()}}return e=Wu(e),e=un(e),ni(e),e}i(zu,"processMarkdown");function $u(t){return" ".repeat(t.indentation)+t.sourceLine+`
`}i($u,"deparseLine");$o("markdown",zu);$o("java",Bu);var Rp={worthUp:.9,worthSibling:.88,worthDown:.8};function Vo(t,e=Rp){let n=an(t,r=>r?1:void 0);return We(n,r=>{if(Fe(r))return;let o=r.subs.reduce((s,a)=>Math.max(s,a.label??0),0);r.label=Math.max(r.label??0,o*e.worthUp)},"bottomUp"),We(n,r=>{if(Fe(r))return;let o=r.subs.map(u=>u.label??0),s=[...o];for(let u=0;u<o.length;u++)o[u]!==0&&(s=s.map((d,f)=>Math.max(d,Math.pow(e.worthSibling,Math.abs(u-f))*o[u])));let a=r.label;a!==void 0&&(s=s.map(u=>Math.max(u,e.worthDown*a))),r.subs.forEach((u,d)=>u.label=s[d])},"topDown"),Ip(n)}i(Vo,"fromTreeWithFocussedLines");function Ip(t){let e=Bo(t,[],(n,r)=>((n.type==="line"||n.type==="blank")&&r.push(n.type==="line"?[$u(n).trimEnd(),n.label??0]:["",n.label??0]),r),"topDown");return new ln(e)}i(Ip,"fromTreeWithValuedLines");function Vu(t,e=!0,n=!0){let r=typeof t=="string"?gr(t):gr(t.source,t.languageId);un(r);let o=an(r,s=>e&&s!=="closer");return We(o,s=>{s.label===void 0&&(s.label=e&&s.label!==!1)},"topDown"),e&&We(o,s=>{if(s.label){let a=!1;for(let u of[...s.subs].reverse())u.label&&!a?a=!0:u.label=!1}else for(let a of s.subs)a.label=!1;s.subs.length>0&&(s.label=!1)},"topDown"),n&&We(o,s=>{s.label||=(on(s)||Fe(s))&&s.lineNumber==0},"topDown"),Vo(o)}i(Vu,"elidableTextForSourceCode");var Ut=class extends Error{constructor(n,r){super(n,{cause:r});this.code="CopilotPromptLoadFailure"}static{i(this,"CopilotPromptLoadFailure")}};var In=Lt(ol()),al=require("fs"),ul=require("path");var sl=new Map;function pt(t="cl100k_base"){let e=sl.get(t);return e!==void 0||(t==="mock"?e=new rs:e=new ns(t),sl.set(t,e)),e}i(pt,"getTokenizer");function Gp(t){if(!t.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let e=(0,al.readFileSync)(t,"utf-8"),n=new Map;for(let r of e.split(`
`)){if(!r)continue;let o=Buffer.from(r,"base64");n.set(o,n.size)}return n}i(Gp,"parseTikTokenNoIndex");var ns=class{static{i(this,"TTokenizer")}constructor(e){try{this._tokenizer=(0,In.createTokenizer)(Gp((0,ul.join)(__dirname,`./resources/${e}.tiktoken.noindex`)),(0,In.getSpecialTokensByEncoder)(e),(0,In.getRegexByEncoder)(e),32768)}catch(n){throw n instanceof Error?new Ut("Could not load tokenizer",n):n}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(r=>this.detokenize([r]))}takeLastTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=4,o=1,s=Math.min(e.length,n*r),a=e.slice(-s),u=this.tokenize(a);for(;u.length<n+2&&s<e.length;)s=Math.min(e.length,s+n*o),a=e.slice(-s),u=this.tokenize(a);return u.length<n?{text:e,tokens:u}:(u=u.slice(-n),{text:this.detokenize(u),tokens:u})}takeFirstTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=4,o=1,s=Math.min(e.length,n*r),a=e.slice(0,s),u=this.tokenize(a);for(;u.length<n+2&&s<e.length;)s=Math.min(e.length,s+n*o),a=e.slice(0,s),u=this.tokenize(a);return u.length<n?{text:e,tokens:u}:(u=u.slice(0,n),{text:this.detokenize(u),tokens:u})}takeLastLinesTokens(e,n){let{text:r}=this.takeLastTokens(e,n);if(r.length===e.length||e[e.length-r.length-1]===`
`)return r;let o=r.indexOf(`
`);return r.substring(o+1)}},rs=class{constructor(){this.hash=i(e=>{let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);n=(n<<5)-n+o,n&=n&65535}return n},"hash")}static{i(this,"MockTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(n=>n.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,n){let r=this.tokenizeStrings(e).slice(-n);return{text:r.join(""),tokens:r.map(this.hash)}}takeFirstTokens(e,n){let r=this.tokenizeStrings(e).slice(0,n);return{text:r.join(""),tokens:r.map(this.hash)}}takeLastLinesTokens(e,n){let{text:r}=this.takeLastTokens(e,n);if(r.length===e.length||e[e.length-r.length-1]===`
`)return r;let o=r.indexOf(`
`);return r.substring(o+1)}};var _r=class t{constructor(e,n,r=pt().tokenLength(e+`
`),o="strict"){this.text=e;this._value=n;this._cost=r;if(e.includes(`
`)&&o!=="none")throw new Error("LineWithValueAndCost: text contains newline");if(n<0&&o!=="none")throw new Error("LineWithValueAndCost: value is negative");if(r<0&&o!=="none")throw new Error("LineWithValueAndCost: cost is negative");if(o=="strict"&&n>1)throw new Error("Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error")}static{i(this,"LineWithValueAndCost")}get value(){return this._value}get cost(){return this._cost}adjustValue(e){return this._value*=e,this}recost(e=n=>pt().tokenLength(n+`
`)){return this._cost=e(this.text),this}copy(){return new t(this.text,this.value,this.cost,"none")}};var ln=class t{constructor(e){this.lines=[];let n=[];for(let r of e){let o=Array.isArray(r)?r[1]:1,s=Array.isArray(r)?r[0]:r;typeof s=="string"?s.split(`
`).forEach(a=>n.push(new _r(a,o))):s instanceof t?s.lines.forEach(a=>n.push(a.copy().adjustValue(o))):"source"in s&&"languageId"in s&&Vu(s).lines.forEach(a=>n.push(a.copy().adjustValue(o)))}this.lines=n}static{i(this,"ElidableText")}adjust(e){this.lines.forEach(n=>n.adjustValue(e))}recost(e=n=>pt().tokenLength(n+`
`)){this.lines.forEach(n=>n.recost(e))}makePrompt(e,n="[...]",r=!0,o="removeLeastDesirable",s=pt()){let a=this.lines.map(u=>u.copy());return Zp(a,e,n,r,o,s)}};function Zp(t,e,n,r,o,s){if(s.tokenLength(n+`
`)>e)throw new Error("maxTokens must be larger than the ellipsis length");o==="removeLeastBangForBuck"&&t.forEach(b=>b.adjustValue(1/b.cost));let a=t.reduce((b,v)=>Math.max(b,v.value),0)+1,u=t.reduce((b,v)=>Math.max(b,v.text.length),0)+1,d=n.trim(),f=t.reduce((b,v)=>b+v.cost,0),p=t.length+1;for(;f>e&&p-->=-1;){let b=t.reduce((I,V)=>V.value<I.value?V:I),v=t.indexOf(b),T=t.slice(0,v+1).reverse().find(I=>I.text.trim()!=="")??{text:""},A=r?Math.min(T.text.match(/^\s*/)?.[0].length??0,t[v-1]?.text.trim()===d?t[v-1]?.text.match(/^\s*/)?.[0].length??0:u,t[v+1]?.text.trim()===d?t[v+1]?.text.match(/^\s*/)?.[0].length??0:u):0,P=" ".repeat(A)+n,j=new _r(P,a,s.tokenLength(P+`
`),"loose");t.splice(v,1,j),t[v+1]?.text.trim()===d&&t.splice(v+1,1),t[v-1]?.text.trim()===d&&t.splice(v-1,1);let O=t.reduce((I,V)=>I+V.cost,0);O>=f&&t.every(I=>I.value===a)&&(r=!1),f=O}if(p<0)throw new Error("Infinite loop in ElidableText.makePrompt: Defensive counter < 0 in ElidableText.makePrompt with end text");return t.map(b=>b.text).join(`
`)}i(Zp,"makePrompt");function gt(){}i(gt,"Diff");gt.prototype={diff:i(function(e,n){var r,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=o.callback;typeof o=="function"&&(s=o,o={});var a=this;function u(X){return X=a.postProcess(X,o),s?(setTimeout(function(){s(X)},0),!0):X}i(u,"done"),e=this.castInput(e,o),n=this.castInput(n,o),e=this.removeEmpty(this.tokenize(e,o)),n=this.removeEmpty(this.tokenize(n,o));var d=n.length,f=e.length,p=1,b=d+f;o.maxEditLength!=null&&(b=Math.min(b,o.maxEditLength));var v=(r=o.timeout)!==null&&r!==void 0?r:1/0,T=Date.now()+v,A=[{oldPos:-1,lastComponent:void 0}],P=this.extractCommon(A[0],n,e,0,o);if(A[0].oldPos+1>=f&&P+1>=d)return u(ll(a,A[0].lastComponent,n,e,a.useLongestToken));var j=-1/0,O=1/0;function I(){for(var X=Math.max(j,-p);X<=Math.min(O,p);X+=2){var Y=void 0,fe=A[X-1],oe=A[X+1];fe&&(A[X-1]=void 0);var pe=!1;if(oe){var De=oe.oldPos-X;pe=oe&&0<=De&&De<d}var Oe=fe&&fe.oldPos+1<f;if(!pe&&!Oe){A[X]=void 0;continue}if(!Oe||pe&&fe.oldPos<oe.oldPos?Y=a.addToPath(oe,!0,!1,0,o):Y=a.addToPath(fe,!1,!0,1,o),P=a.extractCommon(Y,n,e,X,o),Y.oldPos+1>=f&&P+1>=d)return u(ll(a,Y.lastComponent,n,e,a.useLongestToken));A[X]=Y,Y.oldPos+1>=f&&(O=Math.min(O,X-1)),P+1>=d&&(j=Math.max(j,X+1))}p++}if(i(I,"execEditLength"),s)i(function X(){setTimeout(function(){if(p>b||Date.now()>T)return s();I()||X()},0)},"exec")();else for(;p<=b&&Date.now()<=T;){var V=I();if(V)return V}},"diff"),addToPath:i(function(e,n,r,o,s){var a=e.lastComponent;return a&&!s.oneChangePerToken&&a.added===n&&a.removed===r?{oldPos:e.oldPos+o,lastComponent:{count:a.count+1,added:n,removed:r,previousComponent:a.previousComponent}}:{oldPos:e.oldPos+o,lastComponent:{count:1,added:n,removed:r,previousComponent:a}}},"addToPath"),extractCommon:i(function(e,n,r,o,s){for(var a=n.length,u=r.length,d=e.oldPos,f=d-o,p=0;f+1<a&&d+1<u&&this.equals(r[d+1],n[f+1],s);)f++,d++,p++,s.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return p&&!s.oneChangePerToken&&(e.lastComponent={count:p,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=d,f},"extractCommon"),equals:i(function(e,n,r){return r.comparator?r.comparator(e,n):e===n||r.ignoreCase&&e.toLowerCase()===n.toLowerCase()},"equals"),removeEmpty:i(function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},"removeEmpty"),castInput:i(function(e){return e},"castInput"),tokenize:i(function(e){return Array.from(e)},"tokenize"),join:i(function(e){return e.join("")},"join"),postProcess:i(function(e){return e},"postProcess")};function ll(t,e,n,r,o){for(var s=[],a;e;)s.push(e),a=e.previousComponent,delete e.previousComponent,e=a;s.reverse();for(var u=0,d=s.length,f=0,p=0;u<d;u++){var b=s[u];if(b.removed)b.value=t.join(r.slice(p,p+b.count)),p+=b.count;else{if(!b.added&&o){var v=n.slice(f,f+b.count);v=v.map(function(T,A){var P=r[p+A];return P.length>T.length?P:T}),b.value=t.join(v)}else b.value=t.join(n.slice(f,f+b.count));f+=b.count,b.added||(p+=b.count)}}return s}i(ll,"buildValues");var Ib=new gt;function cl(t,e){var n;for(n=0;n<t.length&&n<e.length;n++)if(t[n]!=e[n])return t.slice(0,n);return t.slice(0,n)}i(cl,"longestCommonPrefix");function dl(t,e){var n;if(!t||!e||t[t.length-1]!=e[e.length-1])return"";for(n=0;n<t.length&&n<e.length;n++)if(t[t.length-(n+1)]!=e[e.length-(n+1)])return t.slice(-n);return t.slice(-n)}i(dl,"longestCommonSuffix");function is(t,e,n){if(t.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return n+t.slice(e.length)}i(is,"replacePrefix");function os(t,e,n){if(!e)return t+n;if(t.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return t.slice(0,-e.length)+n}i(os,"replaceSuffix");function yr(t,e){return is(t,e,"")}i(yr,"removePrefix");function li(t,e){return os(t,e,"")}i(li,"removeSuffix");function fl(t,e){return e.slice(0,Qp(t,e))}i(fl,"maximumOverlap");function Qp(t,e){var n=0;t.length>e.length&&(n=t.length-e.length);var r=e.length;t.length<e.length&&(r=t.length);var o=Array(r),s=0;o[0]=0;for(var a=1;a<r;a++){for(e[a]==e[s]?o[a]=o[s]:o[a]=s;s>0&&e[a]!=e[s];)s=o[s];e[a]==e[s]&&s++}s=0;for(var u=n;u<t.length;u++){for(;s>0&&t[u]!=e[s];)s=o[s];t[u]==e[s]&&s++}return s}i(Qp,"overlapCount");var ci="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",Jp=new RegExp("[".concat(ci,"]+|\\s+|[^").concat(ci,"]"),"ug"),di=new gt;di.equals=function(t,e,n){return n.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t.trim()===e.trim()};di.tokenize=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');n=Array.from(e.intlSegmenter.segment(t),function(s){return s.segment})}else n=t.match(Jp)||[];var r=[],o=null;return n.forEach(function(s){/\s/.test(s)?o==null?r.push(s):r.push(r.pop()+s):/\s/.test(o)?r[r.length-1]==o?r.push(r.pop()+s):r.push(o+s):r.push(s),o=s}),r};di.join=function(t){return t.map(function(e,n){return n==0?e:e.replace(/^\s+/,"")}).join("")};di.postProcess=function(t,e){if(!t||e.oneChangePerToken)return t;var n=null,r=null,o=null;return t.forEach(function(s){s.added?r=s:s.removed?o=s:((r||o)&&ml(n,o,r,s),n=s,r=null,o=null)}),(r||o)&&ml(n,o,r,null),t};function ml(t,e,n,r){if(e&&n){var o=e.value.match(/^\s*/)[0],s=e.value.match(/\s*$/)[0],a=n.value.match(/^\s*/)[0],u=n.value.match(/\s*$/)[0];if(t){var d=cl(o,a);t.value=os(t.value,a,d),e.value=yr(e.value,d),n.value=yr(n.value,d)}if(r){var f=dl(s,u);r.value=is(r.value,u,f),e.value=li(e.value,f),n.value=li(n.value,f)}}else if(n)t&&(n.value=n.value.replace(/^\s*/,"")),r&&(r.value=r.value.replace(/^\s*/,""));else if(t&&r){var p=r.value.match(/^\s*/)[0],b=e.value.match(/^\s*/)[0],v=e.value.match(/\s*$/)[0],T=cl(p,b);e.value=yr(e.value,T);var A=dl(yr(p,T),v);e.value=li(e.value,A),r.value=is(r.value,p,A),t.value=os(t.value,p,p.slice(0,p.length-A.length))}else if(r){var P=r.value.match(/^\s*/)[0],j=e.value.match(/\s*$/)[0],O=fl(j,P);e.value=li(e.value,O)}else if(t){var I=t.value.match(/\s*$/)[0],V=e.value.match(/^\s*/)[0],X=fl(I,V);e.value=yr(e.value,X)}}i(ml,"dedupeWhitespaceInChangeObjects");var Kp=new gt;Kp.tokenize=function(t){var e=new RegExp("(\\r?\\n)|[".concat(ci,"]+|[^\\S\\n\\r]+|[^").concat(ci,"]"),"ug");return t.match(e)||[]};var ls=new gt;ls.tokenize=function(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var n=[],r=t.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var o=0;o<r.length;o++){var s=r[o];o%2&&!e.newlineIsToken?n[n.length-1]+=s:n.push(s)}return n};ls.equals=function(t,e,n){return n.ignoreWhitespace?((!n.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!n.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):n.ignoreNewlineAtEof&&!n.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),gt.prototype.equals.call(this,t,e,n)};var Xp=new gt;Xp.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var Yp=new gt;Yp.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function ss(t){"@babel/helpers - typeof";return ss=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ss(t)}i(ss,"_typeof");var br=new gt;br.useLongestToken=!0;br.tokenize=ls.tokenize;br.castInput=function(t,e){var n=e.undefinedReplacement,r=e.stringifyReplacer,o=r===void 0?function(s,a){return typeof a>"u"?n:a}:r;return typeof t=="string"?t:JSON.stringify(as(t,null,null,o),o,"  ")};br.equals=function(t,e,n){return gt.prototype.equals.call(br,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),n)};function as(t,e,n,r,o){e=e||[],n=n||[],r&&(t=r(o,t));var s;for(s=0;s<e.length;s+=1)if(e[s]===t)return n[s];var a;if(Object.prototype.toString.call(t)==="[object Array]"){for(e.push(t),a=new Array(t.length),n.push(a),s=0;s<t.length;s+=1)a[s]=as(t[s],e,n,r,o);return e.pop(),n.pop(),a}if(t&&t.toJSON&&(t=t.toJSON()),ss(t)==="object"&&t!==null){e.push(t),a={},n.push(a);var u=[],d;for(d in t)Object.prototype.hasOwnProperty.call(t,d)&&u.push(d);for(u.sort(),s=0;s<u.length;s+=1)d=u[s],a[d]=as(t[d],e,n,r,d);e.pop(),n.pop()}else a=t;return a}i(as,"canonicalize");var us=new gt;us.tokenize=function(t){return t.slice()};us.join=us.removeEmpty=function(t){return t};var gl={abap:{lineComment:{start:'"',end:""},markdownLanguageIds:["abap","sap-abap"]},aspdotnet:{lineComment:{start:"<%--",end:"--%>"}},bat:{lineComment:{start:"REM",end:""}},bibtex:{lineComment:{start:"%",end:""},markdownLanguageIds:["bibtex"]},blade:{lineComment:{start:"#",end:""}},BluespecSystemVerilog:{lineComment:{start:"//",end:""}},c:{lineComment:{start:"//",end:""},markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";",end:""},markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["coffeescript","coffee","cson","iced"]},cpp:{lineComment:{start:"//",end:""},markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"]},csharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["csharp","cs"]},css:{lineComment:{start:"/*",end:"*/"}},cuda:{lineComment:{start:"//",end:""}},dart:{lineComment:{start:"//",end:""}},dockerfile:{lineComment:{start:"#",end:""},markdownLanguageIds:["dockerfile","docker"]},dotenv:{lineComment:{start:"#",end:""}},elixir:{lineComment:{start:"#",end:""}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%",end:""},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"]},go:{lineComment:{start:"//",end:""},markdownLanguageIds:["go","golang"]},graphql:{lineComment:{start:"#",end:""}},groovy:{lineComment:{start:"//",end:""}},haml:{lineComment:{start:"-#",end:""}},handlebars:{lineComment:{start:"{{!",end:"}}"},markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"]},haskell:{lineComment:{start:"--",end:""},markdownLanguageIds:["haskell","hs"]},hlsl:{lineComment:{start:"//",end:""}},html:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["html","xhtml"]},ini:{lineComment:{start:";",end:""}},java:{lineComment:{start:"//",end:""},markdownLanguageIds:["java","jsp"]},javascript:{lineComment:{start:"//",end:""},markdownLanguageIds:["javascript","js"]},javascriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},jsonc:{lineComment:{start:"//",end:""}},jsx:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#",end:""},markdownLanguageIds:["julia","jl"]},kotlin:{lineComment:{start:"//",end:""},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%",end:""},markdownLanguageIds:["tex"]},legend:{lineComment:{start:"//",end:""}},less:{lineComment:{start:"//",end:""}},lua:{lineComment:{start:"--",end:""},markdownLanguageIds:["lua","pluto"]},makefile:{lineComment:{start:"#",end:""},markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"[]: #",end:""},markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec","mm","objc","obj-c"]},"objective-cpp":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#",end:""},markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//",end:""}},powershell:{lineComment:{start:"#",end:""},markdownLanguageIds:["powershell","ps","ps1"]},pug:{lineComment:{start:"//",end:""}},python:{lineComment:{start:"#",end:""},markdownLanguageIds:["python","py","gyp"]},ql:{lineComment:{start:"//",end:""}},r:{lineComment:{start:"#",end:""}},razor:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["cshtml","razor","razor-cshtml"]},ruby:{lineComment:{start:"#",end:""},markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"]},rust:{lineComment:{start:"//",end:""},markdownLanguageIds:["rust","rs"]},sass:{lineComment:{start:"//",end:""}},scala:{lineComment:{start:"//",end:""}},scss:{lineComment:{start:"//",end:""}},shellscript:{lineComment:{start:"#",end:""},markdownLanguageIds:["bash","sh","zsh"]},slang:{lineComment:{start:"//",end:""}},slim:{lineComment:{start:"/",end:""}},solidity:{lineComment:{start:"//",end:""},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--",end:""}},stylus:{lineComment:{start:"//",end:""}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//",end:""}},systemverilog:{lineComment:{start:"//",end:""}},terraform:{lineComment:{start:"#",end:""}},tex:{lineComment:{start:"%",end:""}},typescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["typescript","ts"]},typescriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["tsx"]},vb:{lineComment:{start:"'",end:""},markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//",end:""}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//",end:""}},xml:{lineComment:{start:"<!--",end:"-->"}},xsl:{lineComment:{start:"<!--",end:"-->"}},yaml:{lineComment:{start:"#",end:""},markdownLanguageIds:["yaml","yml"]}},pl={};for(let[t,e]of Object.entries(gl))if(e.markdownLanguageIds)for(let n of e.markdownLanguageIds)pl[n]=t;else pl[t]=t;var ng={tokenizerName:"cl100k_base"};function rg(t){return{...ng,...t}}i(rg,"cursorContextOptions");function Mn(t,e={}){let n=rg(e),r=pt(n.tokenizerName);if(n.maxLineCount!==void 0&&n.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(n.maxTokenLength!==void 0&&n.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(n.maxLineCount===0||n.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:n.tokenizerName};let o=t.source.slice(0,t.offset);return n.maxLineCount!==void 0&&(o=o.split(`
`).slice(-n.maxLineCount).join(`
`)),n.maxTokenLength!==void 0&&(o=r.takeLastLinesTokens(o,n.maxTokenLength)),{context:o,lineCount:o.split(`
`).length,tokenLength:r.tokenLength(o),tokenizerName:n.tokenizerName}}i(Mn,"getCursorContext");var cs=class{constructor(e){this.keys=[];this.cache={};this.size=e}static{i(this,"FifoCache")}put(e,n){if(this.cache[e]=n,this.keys.length>this.size){this.keys.push(e);let r=this.keys.shift()??"";delete this.cache[r]}}get(e){return this.cache[e]}};var ds=class{static{i(this,"Tokenizer")}constructor(e){this.stopsForLanguage=ag.get(e.languageId)??sg}tokenize(e){return new Set(ig(e).filter(n=>!this.stopsForLanguage.has(n)))}},hl=new cs(20),Cn=class{static{i(this,"WindowedMatcher")}constructor(e){this.referenceDoc=e,this.tokenizer=new ds(e)}get referenceTokens(){return this.createReferenceTokens()}async createReferenceTokens(){return this.referenceTokensCache??=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(e,n="descending"){return n=="ascending"?e.sort((r,o)=>r.score>o.score?1:-1):n=="descending"?e.sort((r,o)=>r.score>o.score?-1:1):e}async retrieveAllSnippets(e,n="descending"){let r=[];if(e.source.length===0||(await this.referenceTokens).size===0)return r;let o=e.source.split(`
`),s=this.id()+":"+e.source,a=hl.get(s)??[],u=a.length==0,d=u?o.map(f=>this.tokenizer.tokenize(f),this.tokenizer):[];for(let[f,[p,b]]of this.getWindowsDelineations(o).entries()){if(u){let A=new Set;d.slice(p,b).forEach(P=>P.forEach(j=>A.add(j),A)),a.push(A)}let v=a[f],T=this.similarityScore(v,await this.referenceTokens);if(r.length&&p>0&&r[r.length-1].endLine>p){r[r.length-1].score<T&&(r[r.length-1].score=T,r[r.length-1].startLine=p,r[r.length-1].endLine=b);continue}r.push({score:T,startLine:p,endLine:b})}return u&&hl.put(s,a),this.sortScoredSnippets(r,n)}findMatches(e,n){return this.findBestMatch(e,n)}async findBestMatch(e,n){if(e.source.length===0||(await this.referenceTokens).size===0)return[];let r=e.source.split(`
`),o=await this.retrieveAllSnippets(e,"descending");if(o.length===0)return[];let s=[];for(let a=0;a<o.length&&a<n;a++)if(o[a].score!==0){let u=r.slice(o[a].startLine,o[a].endLine).join(`
`);s.push({snippet:u,semantics:"snippet",provider:"similar-files",...o[a]})}return s}};function ig(t){return t.split(/[^a-zA-Z0-9]/).filter(e=>e.length>0)}i(ig,"splitIntoWords");var og=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),sg=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...og]),ag=new Map([]);function fi(t,e){let n=[],r=e.length;if(r==0)return[];if(r<t)return[[0,r]];for(let o=0;o<r-t+1;o++)n.push([o,o+t]);return n}i(fi,"getBasicWindowDelineations");var mi=class t extends Cn{static{i(this,"FixedWindowSizeJaccardMatcher")}constructor(e,n){super(e),this.windowLength=n}static{this.FACTORY=i(e=>({to:i(n=>new t(n,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return fi(this.windowLength,e)}_getCursorContextInfo(e){return Mn(e,{maxLineCount:this.windowLength})}similarityScore(e,n){return ug(e,n)}};function ug(t,e){let n=new Set;return t.forEach(r=>{e.has(r)&&n.add(r)}),n.size/(t.size+e.size-n.size)}i(ug,"computeScore");var bl=require("fs"),pi=Lt(require("path")),gi=Lt(_l());var yl={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c_sharp",java:"java"};function vl(t){if(!(t in yl))throw new Error(`Unrecognized language: ${t}`);return yl[t]}i(vl,"languageIdToWasmLanguage");var ms=new Map;async function lg(t){let e,n=pi.default.resolve(pi.default.extname(__filename)!==".ts"?__dirname:pi.default.resolve(__dirname,"../../dist"),`tree-sitter-${t}.wasm`);try{e=await bl.promises.readFile(n)}catch(r){throw r instanceof Error&&"code"in r&&typeof r.code=="string"&&r.name==="Error"?new Ut(`Could not load tree-sitter-${t}.wasm`,r):r}return gi.default.Language.load(e)}i(lg,"loadWasmLanguage");function cg(t){let e=vl(t);if(!ms.has(e)){let n=lg(e);ms.set(e,n)}return ms.get(e)}i(cg,"getLanguage");var ps=class extends Error{static{i(this,"WrappedError")}constructor(e,n){super(e,{cause:n})}};async function cn(t,e){await gi.default.init();let n;try{n=new gi.default}catch(s){throw s&&typeof s=="object"&&"message"in s&&typeof s.message=="string"&&s.message.includes("table index is out of bounds")?new ps(`Could not init Parse for language <${t}>`,s):s}let r=await cg(t);n.setLanguage(r);let o=n.parse(e);return n.delete(),o}i(cn,"parseTreeSitter");function dg(t,e){let n=[];for(let r of t){if(!r[1]){let o=e.tree.getLanguage();r[1]=o.query(r[0])}n.push(...r[1].matches(e))}return n}i(dg,"innerQuery");var fg=[`[
    (class_definition (block (expression_statement (string))))
    (function_definition (block (expression_statement (string))))
]`];function wl(t){return dg([fg],t).length==1}i(wl,"queryPythonIsDocstring");var hi=class t extends Cn{static{i(this,"BlockTokenSubsetMatcher")}constructor(e,n){super(e),this.windowLength=n}static{this.FACTORY=i(e=>({to:i(n=>new t(n,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return fi(this.windowLength,e)}_getCursorContextInfo(e){return Mn(e,{maxLineCount:this.windowLength})}get referenceTokens(){return this.createReferenceTokensForLanguage()}async createReferenceTokensForLanguage(){return this.referenceTokensCache?this.referenceTokensCache:(this.referenceTokensCache=t.syntaxAwareSupportsLanguage(this.referenceDoc.languageId)?await this.syntaxAwareReferenceTokens():await super.referenceTokens,this.referenceTokensCache)}async syntaxAwareReferenceTokens(){let e=(await this.getEnclosingMemberStart(this.referenceDoc.source,this.referenceDoc.offset))?.startIndex,n=this.referenceDoc.offset,r=e?this.referenceDoc.source.slice(e,n):Mn(this.referenceDoc,{maxLineCount:this.windowLength}).context;return this.tokenizer.tokenize(r)}static syntaxAwareSupportsLanguage(e){switch(e){case"csharp":return!0;default:return!1}}similarityScore(e,n){return mg(e,n)}async getEnclosingMemberStart(e,n){let r;try{r=await cn(this.referenceDoc.languageId,e);let o=r.rootNode.namedDescendantForIndex(n);for(;o&&!(t.isMember(o)||t.isBlock(o));)o=o.parent??void 0;return o}finally{r?.delete()}}static isMember(e){switch(e?.type){case"method_declaration":case"property_declaration":case"field_declaration":case"constructor_declaration":return!0;default:return!1}}static isBlock(e){switch(e?.type){case"class_declaration":case"struct_declaration":case"record_declaration":case"enum_declaration":case"interface_declaration":return!0;default:return!1}}};function mg(t,e){let n=new Set;return e.forEach(r=>{t.has(r)&&n.add(r)}),n.size}i(mg,"computeScore");function pg(t,e){return(e.useSubsetMatching?hi.FACTORY(e.snippetLength):mi.FACTORY(e.snippetLength)).to(t)}i(pg,"getMatcher");async function Sl(t,e,n){let r=pg(t,n);return n.maxTopSnippets===0?[]:(await e.filter(s=>s.source.length<n.maxCharPerFile&&s.source.length>0).slice(0,n.maxNumberOfFiles).reduce(async(s,a)=>(await s).concat((await r.findMatches(a,n.maxSnippetsPerFile)).map(u=>({relativePath:a.relativePath,...u}))),Promise.resolve([]))).filter(s=>s.score&&s.snippet&&s.score>n.threshold).sort((s,a)=>s.score-a.score).slice(-n.maxTopSnippets)}i(Sl,"getSimilarSnippets");var hg=500,Qv=8192-hg;var Ti=Lt(require("path")),xt=require("worker_threads");function rh(t){return new Promise(e=>{setTimeout(()=>e(`delay: ${t}`),t)})}i(rh,"sleep");var ic=["getSimilarSnippets","sleep"],qs=class{constructor(){this.nextHandlerId=0;this.handlers=new Map;this.fns=new Map;this.getSimilarSnippets=Sl;this.sleep=rh;!xt.isMainThread&&xt.workerData?.port&&(rc(),process.cwd=()=>xt.workerData.cwd,this.configureWorkerResponse(xt.workerData.port))}static{i(this,"WorkerProxy")}initWorker(){let{port1:e,port2:n}=new xt.MessageChannel;this.port=e,this.worker=new xt.Worker(Ti.default.resolve(Ti.default.extname(__filename)!==".ts"?__dirname:Ti.default.resolve(__dirname,"../../dist"),"workerProxy.js"),{workerData:{port:n,cwd:process.cwd()},transferList:[n]}),this.port.on("message",r=>this.handleMessage(r)),this.port.on("error",r=>this.handleError(r))}startThreading(){if(this.worker)throw new Error("Worker thread already initialized.");this.proxyFunctions(),this.initWorker()}stopThreading(){this.worker&&(this.worker.terminate(),this.worker.removeAllListeners(),this.worker=void 0,this.unproxyFunctions(),this.handlers.clear())}proxyFunctions(){for(let e of ic)this.fns.set(e,this[e]),this.proxy(e)}unproxyFunctions(){for(let e of ic){let n=this.fns.get(e);if(n)this[e]=n;else throw new Error(`Unproxy function not found: ${e}`)}}configureWorkerResponse(e){this.port=e,this.port.on("message",n=>void this.onMessage(n))}async onMessage({id:e,fn:n,args:r}){let o=this[n];if(!o)throw new Error(`Function not found: ${n}`);try{let s=await o.apply(this,r);this.port.postMessage({id:e,res:s})}catch(s){if(!(s instanceof Error))throw s;typeof s.code=="string"?this.port.postMessage({id:e,err:s,code:s.code}):this.port.postMessage({id:e,err:s})}}handleMessage({id:e,err:n,code:r,res:o}){let s=this.handlers.get(e);s&&(this.handlers.delete(e),n?(n.code=r,s.reject(n)):s.resolve(o))}handleError(e){let n;if(e instanceof Error){n=e,n.code==="MODULE_NOT_FOUND"&&n.message?.endsWith("workerProxy.js'")&&(n=new Ut("Failed to load workerProxy.js"));let r=new Error().stack;n.stack&&r?.match(/^Error\n/)&&(n.stack+=r.replace(/^Error/,""))}else e&&typeof e=="object"&&"name"in e&&e.name==="ExitStatus"&&"status"in e&&typeof e.status=="number"?(n=new Error(`workerProxy.js exited with status ${e.status}`),n.code=`CopilotPromptWorkerExit${e.status}`):n=new Error(`Non-error thrown: ${JSON.stringify(e)}`);for(let r of this.handlers.values())r.reject(n);throw n}proxy(e){this[e]=function(...n){let r=this.nextHandlerId++;return new Promise((o,s)=>{this.handlers.set(r,{resolve:o,reject:s}),this.port?.postMessage({id:r,fn:e,args:n})})}}},ih=new qs;var xi=class{constructor(e,n,r){this.languageId=e;this.nodeMatch=n;this.nodeTypesWithBlockOrStmtChild=r}static{i(this,"BaseBlockParser")}async getNodeMatchAtPosition(e,n,r){let o=await cn(this.languageId,e);try{let a=o.rootNode.descendantForIndex(n);for(;a;){let u=this.nodeMatch[a.type];if(u){if(!this.nodeTypesWithBlockOrStmtChild.has(a.type))break;let d=this.nodeTypesWithBlockOrStmtChild.get(a.type);if((d==""?a.namedChildren[0]:a.childForFieldName(d))?.type==u)break}a=a.parent}return a?r(a):void 0}finally{o.delete()}}getNextBlockAtPosition(e,n,r){return this.getNodeMatchAtPosition(e,n,o=>{let s=o.children.reverse().find(a=>a.type==this.nodeMatch[o.type]);if(s){if(this.languageId=="python"&&s.parent){let a=s.parent.type==":"?s.parent.parent:s.parent,u=a?.nextSibling;for(;u&&u.type=="comment";){let d=u.startPosition.row==s.endPosition.row&&u.startPosition.column>=s.endPosition.column,f=u.startPosition.row>a.endPosition.row&&u.startPosition.column>a.startPosition.column;if(d||f)s=u,u=u.nextSibling;else break}}if(!(s.endIndex>=s.tree.rootNode.endIndex-1&&(s.hasError()||s.parent.hasError())))return r(s)}})}async isBlockBodyFinished(e,n,r){let o=(e+n).trimEnd(),s=await this.getNextBlockAtPosition(o,r,a=>a.endIndex);if(s!==void 0&&s<o.length){let a=s-e.length;return a>0?a:void 0}}getNodeStart(e,n){let r=e.trimEnd();return this.getNodeMatchAtPosition(r,n,o=>o.startIndex)}},ki=class extends xi{constructor(n,r,o,s,a){super(n,s,a);this.blockEmptyMatch=r;this.lineMatch=o}static{i(this,"RegexBasedBlockParser")}isBlockStart(n){return this.lineMatch.test(n.trimStart())}async isBlockBodyEmpty(n,r){let o=await this.getNextBlockAtPosition(n,r,s=>{s.startIndex<r&&(r=s.startIndex);let a=n.substring(r,s.endIndex).trim();return a==""||a.replace(/\s/g,"")==this.blockEmptyMatch});return o===void 0||o}async isEmptyBlockStart(n,r){return r=sc(n,r),this.isBlockStart(sh(n,r))&&this.isBlockBodyEmpty(n,r)}};function sh(t,e){let n=t.lastIndexOf(`
`,e-1),r=t.indexOf(`
`,e);return r<0&&(r=t.length),t.slice(n+1,r)}i(sh,"getLineAtOffset");function sc(t,e){let n=e;for(;n>0&&/\s/.test(t.charAt(n-1));)n--;return n}i(sc,"rewindToNearestNonWs");function oc(t,e){let n=t.startIndex,r=t.startIndex-t.startPosition.column,o=e.substring(r,n);if(/^\s*$/.test(o))return o}i(oc,"indent");function ah(t,e,n){if(e.startPosition.row<=t.startPosition.row)return!1;let r=oc(t,n),o=oc(e,n);return r!==void 0&&o!==void 0&&r.startsWith(o)}i(ah,"outdented");var Vt=class extends xi{constructor(n,r,o,s,a,u,d){super(n,r,o);this.startKeywords=s;this.blockNodeType=a;this.emptyStatementType=u;this.curlyBraceLanguage=d}static{i(this,"TreeSitterBasedBlockParser")}isBlockEmpty(n,r){let o=n.text.trim();return this.curlyBraceLanguage&&(o.startsWith("{")&&(o=o.slice(1)),o.endsWith("}")&&(o=o.slice(0,-1)),o=o.trim()),!!(o.length==0||this.languageId=="python"&&(n.parent?.type=="class_definition"||n.parent?.type=="function_definition")&&n.children.length==1&&wl(n.parent))}async isEmptyBlockStart(n,r){if(r>n.length)throw new RangeError("Invalid offset");for(let s=r;s<n.length&&n.charAt(s)!=`
`;s++)if(/\S/.test(n.charAt(s)))return!1;r=sc(n,r);let o=await cn(this.languageId,n);try{let s=o.rootNode.descendantForIndex(r-1);if(s==null||this.curlyBraceLanguage&&s.type=="}")return!1;if((this.languageId=="javascript"||this.languageId=="typescript")&&s.parent&&s.parent.type=="object"&&s.parent.text.trim()=="{")return!0;if(this.languageId=="typescript"){let p=s;for(;p.parent;){if(p.type=="function_signature"||p.type=="method_signature"){let b=s.nextSibling;return b&&p.hasError()&&ah(p,b,n)?!0:!p.children.find(T=>T.type==";")&&p.endIndex<=r}p=p.parent}}let a=null,u=null,d=null,f=s;for(;f!=null;){if(f.type==this.blockNodeType){u=f;break}if(this.nodeMatch[f.type]){d=f;break}if(f.type=="ERROR"){a=f;break}f=f.parent}if(u!=null){if(!u.parent||!this.nodeMatch[u.parent.type])return!1;if(this.languageId=="python"){let p=u.previousSibling;if(p!=null&&p.hasError()&&(p.text.startsWith('"""')||p.text.startsWith("'''")))return!0}return this.isBlockEmpty(u,r)}if(a!=null){if(a.previousSibling?.type=="module"||a.previousSibling?.type=="internal_module"||a.previousSibling?.type=="def")return!0;let p=[...a.children].reverse(),b=p.find(T=>this.startKeywords.includes(T.type)),v=p.find(T=>T.type==this.blockNodeType);if(b){switch(this.languageId){case"python":{b.type=="try"&&s.type=="identifier"&&s.text.length>4&&(v=p.find(P=>P.hasError())?.children.find(P=>P.type=="block"));let T,A=0;for(let P of a.children){if(P.type==":"&&A==0){T=P;break}P.type=="("&&(A+=1),P.type==")"&&(A-=1)}if(T&&b.endIndex<=T.startIndex&&T.nextSibling){if(b.type=="def"){let P=T.nextSibling;if(P.type=='"'||P.type=="'"||P.type=="ERROR"&&(P.text=='"""'||P.text=="'''"))return!0}return!1}break}case"javascript":{let T=p.find(j=>j.type=="formal_parameters");if(b.type=="class"&&T)return!0;let A=p.find(j=>j.type=="{");if(A&&A.startIndex>b.endIndex&&A.nextSibling!=null||p.find(j=>j.type=="do")&&b.type=="while"||b.type=="=>"&&b.nextSibling&&b.nextSibling.type!="{")return!1;break}case"typescript":{let T=p.find(P=>P.type=="{");if(T&&T.startIndex>b.endIndex&&T.nextSibling!=null||p.find(P=>P.type=="do")&&b.type=="while"||b.type=="=>"&&b.nextSibling&&b.nextSibling.type!="{")return!1;break}}return v&&v.startIndex>b.endIndex?this.isBlockEmpty(v,r):!0}}if(d!=null){let p=this.nodeMatch[d.type],b=d.children.slice().reverse().find(v=>v.type==p);if(b)return this.isBlockEmpty(b,r);if(this.nodeTypesWithBlockOrStmtChild.has(d.type)){let v=this.nodeTypesWithBlockOrStmtChild.get(d.type),T=v==""?d.children[0]:d.childForFieldName(v);if(T&&T.type!=this.blockNodeType&&T.type!=this.emptyStatementType)return!1}return!0}return!1}finally{o.delete()}}},pE={python:new Vt("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new Vt("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new Vt("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new Vt("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new ki("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new ki("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),c_sharp:new Vt("csharp",{},new Map([]),[],"block",null,!0),java:new Vt("java",{},new Map([]),[],"block",null,!0)};function gn(t){switch(t){case 0:case 2:case 7:case 8:case 11:case 12:case 13:case 14:return!0;default:return!1}}i(gn,"isTypeDefinition");var ot=class t{static{i(this,"TextRange")}static{this.empty=new t(0,0)}constructor(e,n){this.start=e,this.length=n}static fromBounds(e,n){return new t(e,n-e)}get end(){return this.start+this.length}contains(e){return this.start<=e&&this.end>=e}containsRange(e){return this.start<=e.start&&this.end>=e.end}equals(e){return this.start===e.start&&this.length===e.length}getText(e){return e.slice(this.start,this.end)}getTextWithIndentation(e,n){let r=[],o=this.start;for(o=uc(e,e.length,o),ac(r,n);o<this.end;)e[o]!=="\r"&&e[o]!==`
`?r.push(e[o++]):e[o]==="\r"&&o<e.length&&e[o+1]!==`
`||e[o]===`
`?(r.push(`
`),o=uc(e,e.length,++o),ac(r,n)):o++;return r.join("")}};function ac(t,e){for(let n=0;n<e;n++)t.push(" ")}i(ac,"appendIndent");function uc(t,e,n){for(;n<e&&(t[n]===" "||t[n]==="	");)n++;return n}i(uc,"consumeIndent");var jn=class{constructor(e,n,r,o,s,a,u,d,f){this.fileName=e;this.fullyQualifiedName=n;this.unqualifiedName=r;this.commentRange=o;this.nameRange=s;this.bodyRange=a;this.extentRange=u;this.kind=d;this.refKind=f;if(e.indexOf("\\")!==-1)throw new Error("fileName must be normalized to use forward slashes as path separators")}static{i(this,"SymbolRange")}equals(e){return this.fileName===e.fileName&&this.fullyQualifiedName===e.fullyQualifiedName&&this.unqualifiedName===e.unqualifiedName&&this.commentRange.equals(e.commentRange)&&this.nameRange.equals(e.nameRange)&&this.bodyRange.equals(e.bodyRange)&&this.extentRange.equals(e.extentRange)&&this.kind===e.kind&&this.refKind===e.refKind}},_t=class t{constructor(){this.queriesCache=new Map}static{i(this,"SymbolExtractorBase")}async executeQuery(e,n,r){let o;try{o=await cn(this.languageId,n);let s=o.getLanguage(),u=this.getOrCreateQuery(s,r).matches(o.rootNode),d=new Yr,f=[];for(let p of u){let b=this.createSymbolRange(d,e,n,p.captures);b&&f.push(b)}return f}finally{o?.delete()}}getOrCreateQuery(e,n){let r=this.queriesCache.get(n);return r||(r=e.query(n),this.queriesCache.set(n,r)),r}createSymbolRange(e,n,r,o){let s=0,a=0,u=0,d=0,f=0,p=0,b=0,v=0,T=null,A=null;for(let O=0;O<o.length;O++){let I=o[O].name;I==="name"?(f=o[O].node.startIndex,p=o[O].node.endIndex):I==="reference"?(f=o[O].node.startIndex,p=o[O].node.endIndex,u=o[O].node.startIndex,d=o[O].node.endIndex,T=I):I==="body"?(b=o[O].node.startIndex,v=o[O].node.endIndex):I==="comment"?(s=s===0?o[O].node.startIndex:Math.min(s,o[O].node.startIndex),a=Math.max(a,o[O].node.endIndex)):I==="receiver"?A=ot.fromBounds(o[O].node.startIndex,o[O].node.endIndex).getText(r):(u=o[O].node.startIndex,d=o[O].node.endIndex,T=I)}T==="definition.module.filescoped"&&(v=r.length,d=v);let P=ot.fromBounds(u,d),j=u>0||d>0||f>0||p>0?new jn(n,"","",ot.fromBounds(s,a),ot.fromBounds(f,p),ot.fromBounds(b,v),P,t.kindFromString(T),0):null;if(j){t.updateScopesForSymbol(e,j);let O=j.nameRange.getText(r),I=this.createNameFromScopes(r,e.toArray());return I=A?`${A}.${I}`:I,new jn(n,I,O.substring(O.lastIndexOf(".")+1),j.commentRange,j.nameRange,j.bodyRange,j.extentRange,j.kind,0)}return null}static updateScopesForSymbol(e,n){for(;e.tryPeek()&&!e.peek()?.extentRange.containsRange(n.extentRange);)e.pop();e.push(n)}static kindFromString(e){switch(e){case"definition.class":return 0;case"definition.constant":return 1;case"definition.enum_variant":return 3;case"definition.enum":return 2;case"definition.field":return 4;case"definition.function":return 5;case"definition.implementation":return 6;case"definition.interface":return 7;case"definition.macro":return 8;case"definition.method":return 9;case"definition.module":case"definition.module.filescoped":return 10;case"definition.struct":return 11;case"definition.trait":return 12;case"definition.type":return 13;case"definition.union":return 14;case"reference":return 16;default:throw new Error("NotSupportedException")}}};var Pi=class extends _t{static{i(this,"GoSymbolExtractor")}get languageId(){return"go"}extractSymbols(e,n){return this.executeQuery(e,n,uh)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},Ri=class extends _t{static{i(this,"GoReferenceExtractor")}get languageId(){return"go"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}extractReferences(e,n){return this.executeQuery(e,n,lh)}async extractLocalReferences(e,n,r){let o=await this.executeQuery(e,n,ch),s=o.filter(d=>d.kind!==9),a=o.filter(d=>d.kind===9&&d.extentRange.containsRange(r)),u=[];for(let d of a)u.push(...s.filter(f=>d.extentRange.containsRange(f.extentRange)));return u}},uh=`
(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (struct_type (field_declaration_list) @body))) @definition.struct
)

(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (interface_type (_)) @body)) @definition.interface
)

(
    ((comment)* @comment)
    .
    (method_declaration receiver: (parameter_list (parameter_declaration type: [(type_identifier) @receiver (pointer_type (type_identifier) @receiver)] )) name: (_) @name body: (_) @body) @definition.method
)

(
    ((comment)* @comment)
    .
    (method_elem name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (function_declaration name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (field_declaration name: (_) @name) @definition.field
)
`,lh=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`,ch=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`;var Ii=class extends _t{static{i(this,"JavaSymbolExtractor")}get languageId(){return"java"}extractSymbols(e,n){return this.executeQuery(e,n,dh)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},Mi=class extends _t{static{i(this,"JavaReferenceExtractor")}get languageId(){return"java"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}extractReferences(e,n){return this.executeQuery(e,n,fh)}async extractLocalReferences(e,n,r){let o=await this.executeQuery(e,n,mh),s=o.filter(d=>d.kind!==9),a=o.filter(d=>d.kind===9&&d.extentRange.containsRange(r)),u=[];for(let d of a)u.push(...s.filter(f=>d.extentRange.containsRange(f.extentRange)));return u}},dh=`
(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (class_declaration name: (identifier) @name body: (class_body) @body) @definition.class
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (constructor_declaration name: (identifier) @name body: (constructor_body) @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (method_declaration name: (identifier) @name body: (block)? @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (interface_declaration name: (identifier) @name body: (interface_body) @body) @definition.interface
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (field_declaration declarator: (variable_declarator name: (identifier) @name)) @definition.field
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_declaration name: (_) @name body: (_) @body) @definition.enum
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_constant name: (identifier) @name) @definition.enum_variant
)
`,fh=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`,mh=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`;var ph=new Set(["int","str","float","bool","list","dict","tuple","set"]),Ci=class extends _t{static{i(this,"PythonSymbolExtractor")}get languageId(){return"python"}extractSymbols(e,n){return this.executeQuery(e,n,gh)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},Li=class extends _t{static{i(this,"PythonReferenceExtractor")}get languageId(){return"python"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractReferences(e,n){return(await this.executeQuery(e,n,hh)).filter(o=>!ph.has(o.unqualifiedName))}async extractLocalReferences(e,n,r){let o=await this.executeQuery(e,n,_h),s=o.filter(d=>d.kind!==9),a=o.filter(d=>d.kind===9&&d.extentRange.containsRange(r)),u=[];for(let d of a)u.push(...s.filter(f=>d.extentRange.containsRange(f.extentRange)));return u}},gh=`
(
    ((comment)* @comment)
    .
    (class_definition name: (_) @name body: (_) @body) @definition.class
)

(
    ((comment)* @comment)
    .
    (function_definition name: (_) @name body: (_) @body) @definition.method
)
`,hh=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
]) @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`,_h=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
])  @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`;var Ws=[{symbolExtractor:new Ii,referenceExtractor:new Mi,languageId:"java"},{symbolExtractor:new Pi,referenceExtractor:new Ri,languageId:"go"},{symbolExtractor:new Ci,referenceExtractor:new Li,languageId:"python"}];var cc=Ws.map(t=>t.referenceExtractor),dc=Ws.map(t=>t.symbolExtractor),yT=Ws.map(t=>nn[t.languageId].extensions).flat();var fc=require("fs");async function mc(t,e,n,r,o){let s=new Map,a=0;for(let b of t){let v=b.node.fileName.toLowerCase(),T=s.get(v);T?T.symbols.push(b):s.set(v,{symbols:[b],topRank:a}),a++}if(s.delete(n.toLowerCase()),s.size===0)return[];let u=e,d=e/Math.min(4,s.size),f=[],p=Array.from(s.keys());p.sort((b,v)=>{let T=s.get(b).topRank,A=s.get(v).topRank;return T-A});for(let b of p){let v=s.get(b).symbols;if(v.length===0)continue;let T=v[0].node.fileName,A=v.reduce((P,j)=>P+j.node.extentRange.length,0);for(let P of v){if(u<=5)return f;Nt(o);let j=P.node.extentRange.length/A,O=Math.min(u,j*d),I=(await yh([P])).makePrompt(O);u-=r.tokenLength(I),f.push({uri:T,value:I})}}return f}i(mc,"symbolRangesToCodeSnippets");async function yh(t){if(t.length===0)return new ln([]);let e=t[0].node.fileName,n=[],r=rn(e).fsPath,o=(await fc.promises.readFile(r)).toString();for(let s of t)pc(s,o).forEach(a=>n.push(a));return new ln(n)}i(yh,"sameFileSymbolRangeToElidableText");function pc(t,e){let r=[],o=t.node,s=e.substring(Us(e,o.commentRange.start),o.commentRange.end);r.push([Bs(s),1-3e-4]);let a=Us(e,o.bodyRange.start),u=Us(e,o.extentRange.start),d=o.bodyRange.length===0?e.substring(u,o.extentRange.end):e.substring(o.commentRange.length===0?u:o.commentRange.end,a);if(gn(o.kind)&&(d="BEGIN "+d.trimStart()),r.push([Bs(d),1-1e-4]),t.children.length>0)for(let f of t.children)r.push(...pc(f,e));else{let f=1-(gn(t.node.kind)?3e-4:4e-4),p=e.substring(a,o.bodyRange.end);r.push([Bs(p),f])}return gn(o.kind)&&r.push(["END "+d.substring(6),1-1e-4]),r.filter(f=>f[0].length>0)}i(pc,"prepareForElidableText");function Us(t,e){for(;e-1>=0&&(t[e-1]==="	"||t[e-1]===" ");)e--;return e}i(Us,"shiftLeftToNearestLineEndingOrAlphanumeric");function Bs(t){let e=0;for(;e<t.length&&(t[e]==="\r"||t[e]===`
`);)e++;let n=t.length-1;for(;n>=0&&(t[n]==="\r"||t[n]===`
`||t[n]===" "||t[n]==="	");)n--;return t.substring(e,n+1)}i(Bs,"trimLineEndingsAndTrailingWhitespace");var zs=class{constructor(e,n){this.referenceExtractors=new Map;this.index=e;for(let r of n)this.referenceExtractors.set(r.languageId,r)}static{i(this,"ContextRetrievalStrategy")}},kr=class extends zs{static{i(this,"UnqualifiedNameRetrievalStrategy")}constructor(e,n,r,o){super(e,n),this.caseSensitive=r,this.typesOnly=o}async getContextAtPositionAsync(e,n,r,o,s){let a=this.referenceExtractors.get(o);if(!a)return[];Nt(s);let u=await a.extractReferences(e,n);Nt(s);let d=Array.from(u);d.sort((v,T)=>this.compareSymbolRangesByProximityToCaret(v,T,r));let f=[],p=new Set,b=await this.findDefinitionsViaUnqualifiedNames(d,s);this.typesOnly&&(b=b.filter(v=>gn(v.kind)));for(let v of b)p.has(JSON.stringify(v))||(p.add(JSON.stringify(v)),f.push(await this.makeSymbolRangeNodeFromDefinition(v,s)));return f}async findDefinitionsViaUnqualifiedNames(e,n){let r=Array.from(new Set(e.map(p=>p.unqualifiedName))),o=!this.caseSensitive,s=await this.index.findPotentialDefinitionsAsync(r,o,n),a=i(p=>o?p.toLowerCase():p,"lowercaseIfCaseInsensitive"),u=i(p=>a(p.unqualifiedName),"getSymbolKey"),d=new Map;for(let p of s){let b=u(p),v=d.get(b)??[];d.set(b,[...v,p])}let f=[];for(let p of r){let b=d.get(a(p));!b||b.length>20||f.push(...b)}return f}async makeSymbolRangeNodeFromDefinition(e,n){if(Nt(n),gn(e.kind)){let r=await this.index.findSymbolsByFullyQualifiedNamePrefix(e.fileName,e.fullyQualifiedName+".",n),o=await Promise.all(r.map(s=>this.makeSymbolRangeNodeFromDefinition(s,n)));return{node:e,children:o}}else return{node:e,children:[]}}compareSymbolRangesByProximityToCaret(e,n,r){let o=e.extentRange.end<=r,s=n.extentRange.end<=r;if(o&&!s)return-1;if(!o&&s)return 1;let a=Math.abs(e.extentRange.start-r),u=Math.abs(n.extentRange.start-r);return a-u}},Ni=class{constructor(e,n){this.strategies=new Map;this.strategies.set("go",new kr(e,n,!0,!0)),this.strategies.set("java",new kr(e,n,!0,!0)),this.strategies.set("python",new kr(e,n,!0,!1))}static{i(this,"SyntaxAwareContextRetrieval")}async getStringifiedContextAtPositionAsync(e,n,r,o,s,a){let u=await this.getContextAtPositionAsync(e,n,r,o,a);Nt(a);let d=pt();return mc(u,s,e,d,a)}async getContextAtPositionAsync(e,n,r,o,s){return this.strategies.has(o)?this.strategies.get(o).getContextAtPositionAsync(e,n,r,o,s):[]}};var hn={Id:"id"},tt={FilePath:"filePath",LastWriteTimeUtc:"lastWriteTimeUtc"},ie={DocumentId:"documentId",FullyQualifiedName:"fullyQualifiedName",UnqualifiedName:"unqualifiedName",CommentStart:"commentStart",CommentLength:"commentLength",NameStart:"nameStart",NameLength:"nameLength",BodyStart:"bodyStart",BodyLength:"bodyLength",ExtentStart:"extentStart",ExtentLength:"extentLength",SymbolKind:"symbolKind",RefKind:"refKind"};var Ai=class{constructor(e,n,r){this.tableName=e;this.createOptimizations=n;this.extraCreateDeclarations=r;this.primaryKey=new $s(hn.Id)}static{i(this,"SQLTableQueryGenerator")}createTableQueries(){return this.createTableString??=this.generateCreateTableString(),[this.createTableString,...this.createOptimizations]}generateCreateTableString(){let e=this.fields.map(n=>n.initColumnString());return this.extraCreateDeclarations&&e.push(this.extraCreateDeclarations),e.push(),[`CREATE TABLE IF NOT EXISTS ${this.tableName} (`,`    ${this.primaryKey.initColumnString()},`,`    ${e.join(`,
`)}`,")"].join(`
`)}insertQuery(e,n){this.cachedInsertQueryStrings??=this.generateInsertQueryStrings();let r=[this.cachedInsertQueryStrings.prefix,Array(n).fill(this.cachedInsertQueryStrings.valuesTemplate).join(`,
`)];return e&&r.push("ON CONFLICT DO NOTHING"),r.join(`
`)}generateInsertQueryStrings(){return{prefix:`INSERT INTO ${this.tableName} (${this.fields.map(e=>e.name).join(", ")})
VALUES`,valuesTemplate:`(${Array(this.fields.length).fill("?").join(", ")})`}}},Pr=class t extends Ai{constructor(){super(t.tableName,[`CREATE UNIQUE INDEX IF NOT EXISTS 'IX_Document_FilePath' ON '${t.tableName}' ('${tt.FilePath}');`]);this.fields=[new Mr(tt.FilePath,{notNull:!0,collate:!0,noCase:!0,unique:!0}),new Ze(tt.LastWriteTimeUtc,{notNull:!0})]}static{i(this,"DocumentQueryGenerator")}static{this.tableName="Document"}},Rr=class t extends Ai{constructor(){super(t.tableName,[`CREATE INDEX IF NOT EXISTS 'IX_Symbol_DocumentId' ON '${t.tableName}' ('${ie.DocumentId}', '${ie.ExtentStart}', '${ie.ExtentLength}');`,`CREATE INDEX IF NOT EXISTS 'IX_Symbol_UnqualifiedName' ON '${t.tableName}' ('${ie.UnqualifiedName}');`],`FOREIGN KEY(${ie.DocumentId}) REFERENCES Document(${hn.Id}) ON DELETE CASCADE`);this.fields=[new Ze(ie.DocumentId),new Mr(ie.FullyQualifiedName,{notNull:!0}),new Mr(ie.UnqualifiedName,{notNull:!0}),new Ze(ie.CommentStart,{notNull:!0}),new Ze(ie.CommentLength,{notNull:!0}),new Ze(ie.NameStart,{notNull:!0}),new Ze(ie.NameLength,{notNull:!0}),new Ze(ie.BodyStart,{notNull:!0}),new Ze(ie.BodyLength,{notNull:!0}),new Ze(ie.ExtentStart,{notNull:!0}),new Ze(ie.ExtentLength,{notNull:!0}),new Ze(ie.SymbolKind,{notNull:!0}),new Ze(ie.RefKind,{notNull:!0})]}static{i(this,"SymbolQueryGenerator")}static{this.tableName="Symbol"}},Ir=class{constructor(e,n){this.name=e;this.notNull=n?.notNull??!1}static{i(this,"SQLField")}},Mr=class extends Ir{static{i(this,"StringColumn")}constructor(e,n){super(e,{notNull:n?.notNull}),this.collate=n?.collate??!1,this.noCase=n?.noCase??!1,this.unique=n?.unique??!1}initColumnString(){let e=this.collate?"COLLATE":void 0,n=this.noCase?"NOCASE":void 0,r=this.notNull?"NOT NULL":void 0,o=this.unique?"UNIQUE":void 0,s=[e,n,r,o].filter(a=>a).join(" ");return`'${this.name}' VARCHAR(500) ${s}`}},Ze=class extends Ir{static{i(this,"NumberColumn")}initColumnString(){return`'${this.name}' INTEGER${this.notNull?" NOT NULL":""}`}},$s=class extends Ir{static{i(this,"NumberPrimaryKeyColumn")}initColumnString(){return`'${this.name}' INTEGER PRIMARY KEY AUTOINCREMENT${this.notNull?" NOT NULL":""}`}};var Di=class{static{i(this,"SQLTable")}constructor(e){this.queryGenerator=this.createQueryGenerator(),this.init=this.doInit(e)}async doInit(e){let n=await e;return await this.create(n),n}async create(e){let n=i(o=>new Promise((s,a)=>{e.run(o,u=>{u?a(u):s()})}),"runQuery"),r=this.queryGenerator.createTableQueries();for(let o of r)await n(o)}async insert(e,n){let r=await this.init;return new Promise((o,s)=>{let a=this.queryGenerator.insertQuery(n,e.length);r.run(a,e.map(u=>Object.values(u)).flat(),function(u){u?s(u):o(this)})})}async getAllRows(){let e=await this.init;return st(e,`SELECT * FROM ${this.queryGenerator.tableName}`,[])}async deleteRow(e){let n=await this.init;return st(n,`DELETE FROM ${this.queryGenerator.tableName} WHERE ${hn.Id} = ?`,[e])}},Ot=class t extends Di{static{i(this,"DocumentTable")}static{this.tableName=Pr.tableName}createQueryGenerator(){return new Pr}async updateTimestamp(e,n){let r=await this.init;await st(r,`UPDATE ${t.tableName} SET ${tt.LastWriteTimeUtc} = ? WHERE ${tt.FilePath} = ?`,[n,e])}async deleteAllWithPath(e){let n=await this.init;await st(n,`DELETE FROM ${t.tableName} WHERE ${tt.FilePath} = ?`,[e])}async getDocumentByFilePath(e){let n=await this.init;return st(n,`SELECT * FROM ${this.queryGenerator.tableName} WHERE ${tt.FilePath} = ?`,[e])}},Ce=class t extends Di{static{i(this,"SymbolTable")}static{this.tableName=Rr.tableName}createQueryGenerator(){return new Rr}async clearAllSymbolsFromDocument(e){let n=await this.init;return st(n,`DELETE FROM ${t.tableName} WHERE ${ie.DocumentId} = ?`,[e])}};async function st(t,e,n){return new Promise((r,o)=>t.all(e,n,(s,a)=>{s&&o(s),r(a)}))}i(st,"runPromisifiedDBQuery");var Rc=Lt(Pc());var ji=class{constructor(e){this.databaseFileName=e;this.innerJoinStatement=`INNER JOIN ${Ot.tableName} ON ${Ce.tableName}.${ie.DocumentId} = ${Ot.tableName}.${hn.Id}`;this.db=this.initDb(e),this.documentTable=new Ot(this.db),this.symbolTable=new Ce(this.db)}static{i(this,"DocumentSymbolDatabase")}async initDb(e){let n=await new Promise((r,o)=>{let s=new Rc.Database(e,a=>{a?(console.error("Error opening database",a),o(a)):r(s)})});return await st(n,"pragma journal_mode=wal",[]),await st(n,"pragma synchronous=normal",[]),await st(n,"pragma optimize=0x10002",[]),await st(n,"pragma foreign_keys = ON",[]),n}async close(){let e=await this.db;return await this.documentTable.init,await this.symbolTable.init,new Promise((n,r)=>{e.close(o=>o?r(o):n())})}async querySymbolsFuzzilyUsingUnqualifiedName(e,n){return await this.query([`SELECT * FROM ${Ce.tableName}`,this.innerJoinStatement,`WHERE ${ie.UnqualifiedName} BETWEEN ? AND (? || '~')`,`ORDER BY ${ie.UnqualifiedName}`,"LIMIT ?"].join(`
`),[e,e,n])}async querySymbolsUsingUnqualifiedNames(e,n){let r=e.map(()=>"?").join(", "),o=n?"COLLATE NOCASE ":"";return await this.query([`SELECT * FROM ${Ce.tableName}`,this.innerJoinStatement,`WHERE ${ie.UnqualifiedName} ${o}IN (${r})`].join(`
`),e)}async querySymbolsUsingFullyQualifiedName(e){return this.query([`SELECT * FROM ${Ce.tableName}`,this.innerJoinStatement,`WHERE ${ie.FullyQualifiedName} = ?`].join(`
`),[e])}async querySymbolsContainingPosition(e,n){return this.query([`SELECT * FROM ${Ce.tableName}`,this.innerJoinStatement,`WHERE ${Ot.tableName}.${tt.FilePath} = ? AND ${Ce.tableName}.${ie.ExtentStart} <= ? AND (${Ce.tableName}.${ie.ExtentStart} + ${Ce.tableName}.${ie.ExtentLength}) >= ?`].join(`
`),[e,n,n])}async querySymbolsContainedByRange(e,n,r){return this.query([`SELECT * FROM ${Ce.tableName}`,this.innerJoinStatement,`WHERE ${Ot.tableName}.${tt.FilePath} = ? AND ${Ce.tableName}.${ie.ExtentStart} >= ? AND (${Ce.tableName}.${ie.ExtentStart} + ${Ce.tableName}.${ie.ExtentLength}) <= ?`,`ORDER BY ${Ce.tableName}.${ie.ExtentStart}`].join(`
`),[e,n,r])}async querySymbolsByQualifiedNamePrefix(e,n){return this.query([`SELECT * FROM ${Ce.tableName}`,this.innerJoinStatement,`WHERE ${Ot.tableName}.${tt.FilePath} = ? AND ${Ce.tableName}.${ie.FullyQualifiedName} LIKE ?`,`ORDER BY ${Ce.tableName}.${ie.ExtentStart}`].join(`
`),[e,`${n}%`])}async insertSymbols(e){return await this.symbolTable.insert(e,!1)}async insertDocument(e,n,r=!1){return await this.documentTable.insert([{filePath:e,lastWriteTimeUtc:n}],r)}async clearAllSymbolsFromDocument(e){return this.symbolTable.clearAllSymbolsFromDocument(e)}async updateDocumentTimestamp(e,n){return this.documentTable.updateTimestamp(e,n)}async deleteAllDocumentsWithPath(e){return this.documentTable.deleteAllWithPath(e)}async getAllDocuments(){return this.documentTable.getAllRows()}getDocument(e){return this.documentTable.getDocumentByFilePath(e)}async query(e,n){let r=await this.db;return await this.documentTable.init,await this.symbolTable.init,st(r,e,n)}};var qi=class{static{i(this,"SQLStorageReaderWriter")}constructor(e){this.database=new ji(e)}async close(){await this.database.close()}async insertOrReplaceDocumentSymbolsAsync(e,n,r){let o=await this.getOrCreateDocumentAsync(e,n);await this.database.clearAllSymbolsFromDocument(o.id),r.length>0&&await this.database.insertSymbols(r.map(s=>({documentId:o.id,fullyQualifiedName:s.fullyQualifiedName,unqualifiedName:s.unqualifiedName,commentStart:s.commentRange.start,commentLength:s.commentRange.length,nameStart:s.nameRange.start,nameLength:s.nameRange.length,bodyStart:s.bodyRange.start,bodyLength:s.bodyRange.length,extentStart:s.extentRange.start,extentLength:s.extentRange.length,symbolKind:s.kind,refKind:s.refKind}))),await this.database.updateDocumentTimestamp(e,n)}async addDocumentsAsync(e){for(let n of e)n=n.toLowerCase(),await this.database.insertDocument(n,Date.now(),!0)}async deleteDocumentAsync(e){return await this.database.deleteAllDocumentsWithPath(e.toLowerCase())}async updateDocumentTimestampAsync(e,n){return await this.database.updateDocumentTimestamp(e.toLowerCase(),n)}async fuzzyMatchSymbolsAsync(e,n){return Un(await this.database.querySymbolsFuzzilyUsingUnqualifiedName(e,n))}async findPotentialDefinitionsAsync(e,n,r){let o=[],a=0;for(;a<e.length;){let u=e.slice(a,a+500);a+=500;let d=await this.database.querySymbolsUsingUnqualifiedNames(u,n);o.push(...d),Nt(r)}return Un(o)}async getDefinitionsAsync(e){return Un(await this.database.querySymbolsUsingFullyQualifiedName(e))}async findSymbolsContainingPositionAsync(e,n){let r=await this.database.querySymbolsContainingPosition(e.toLowerCase(),n);return Un(r)}async findSymbolsContainedByRangeAsync(e,n,r){return Un(await this.database.querySymbolsContainedByRange(e.toLowerCase(),n,r))}async findSymbolsByFullyQualifiedNamePrefix(e,n){return Un(await this.database.querySymbolsByQualifiedNamePrefix(e.toLowerCase(),n))}async getDocumentsAsync(){return this.database.getAllDocuments()}async getDocumentAsync(e){let n=await this.database.getDocument(e);if(n?.at(0))return n[0]}async getOrCreateDocumentAsync(e,n){let r=await this.database.getDocument(e);if(r?.at(0))return r[0];await this.database.insertDocument(e,n,!0);let o=await this.database.getDocument(e);if(!o)throw Error("Unable to insert document");return o[0]}};function Un(t){return t.map(e=>new jn(e.filePath,e.fullyQualifiedName,e.unqualifiedName,new ot(e.commentStart,e.commentLength),new ot(e.nameStart,e.nameLength),new ot(e.bodyStart,e.bodyLength),new ot(e.extentStart,e.extentLength),e.symbolKind,e.refKind))}i(Un,"symbolsToSymbolRanges");var Ui=Lt(require("fs/promises"));var Wi=class{static{i(this,"Index")}constructor(e,n){this.storage=new qi(e),this.symbolExtractors=n}dispose(){return this.storage.close()}get reader(){return this.storage}async indexFile(e,n){let r=Ou(rn(e));if(!r)throw Error(`Cannot resolve a readable file path from ${e}`);let o;try{o=await Ui.stat(r)}catch{await this.storage.deleteDocumentAsync(e);return}let s=o.mtimeMs,a=await this.storage.getDocumentAsync(e);if(a&&a.lastWriteTimeUtc>=s)return;let u=this.symbolExtractors.find(p=>p.languageId==n);if(!u)return;let d=(await Ui.readFile(r)).toString(),f=await u.extractSymbols(e,d);await this.storage.insertOrReplaceDocumentSymbolsAsync(e,s,f)}async getDocumentFilePaths(){return(await this.storage.getDocumentsAsync()).map(n=>n.filePath)}};function Ic(t){let e=t;return typeof e?.cwd=="string"&&Array.isArray(e?.indexWorkspaceRoots)&&e.indexWorkspaceRoots.every(n=>xh(n))}i(Ic,"isIndexWorkerData");var Qs=class{static{i(this,"IndexNotification")}constructor(e){this.operation=e}};var Ft={CreateIndex:"createIndex",AddOrInvalidated:"addOrInvalidated",GetContext:"getContext",Exit:"exit",Response:"response",RemoveIndex:"removeIndex",Cancel:"cancel",GetAllDocumentsInWorkspace:"getAllDocumentsInWorkspace"};var ut=class extends Qs{constructor(n,r,o){super(Ft.Response);this.id=n;this.error=r;this.data=o;r&&"code"in r&&typeof r.code=="string"&&(this.code=r.code)}static{i(this,"ResponseMessage")}};function xh(t){return"databaseFilePath"in t&&"rootPath"in t}i(xh,"isIndexableWorkspaceFolder");var Sn=Lt(require("path")),ap=Lt(sp()),ar=require("worker_threads");var Io=class{static{i(this,"IndexInfo")}constructor(e){this.index=new Wi(e,dc),this.contextRetreival=new Ni(this.index.reader,cc)}},Eu=class t{constructor(e,n){this.indices=new Map;this.cancellationTokens=new Map;for(let r of n)this.indices.set(Sn.default.normalize(r.rootPath),new Io(r.databaseFilePath));e.on("message",r=>void t.dispatchMessage(r,this.indices,this.cancellationTokens))}static{i(this,"IndexWorker")}static async dispatchMessage(e,n,r){try{let o=new ap.CancellationTokenSource;r.set(e.id,o);let s;switch(e.operation){case Ft.AddOrInvalidated:s=await t.dispatchAddOrInvalidate(e,n,o.token);break;case Ft.GetContext:s=await t.dispatchGetContext(e,n,o.token);break;case Ft.Cancel:r.get(e.id)?.cancel(),s=new ut(e.id,void 0,void 0);break;case Ft.Exit:s=await t.dispatchExit(e,n,o.token);break;case Ft.CreateIndex:s=await t.dispatchCreateIndex(e,n,o.token);break;case Ft.RemoveIndex:s=await t.dispatchRemoveIndex(e,n,o.token);break;case Ft.GetAllDocumentsInWorkspace:s=await t.GetAllDocumentsInWorkspaceRequest(e,n,o.token);break;default:En?.postMessage(new Error(`Unknown operation: ${e.operation}`))}s&&En?.postMessage(s),r.get(e.id)?.dispose(),r.delete(e.id)}catch(o){if(!(o instanceof Error))throw o;En?.postMessage(new ut(e.id,o,void 0))}}static async GetAllDocumentsInWorkspaceRequest(e,n,r){let o=Sn.default.normalize(e.baseWorkspaceFolderPath),s,a;return n.has(o)?a=await n.get(o).index.getDocumentFilePaths():s=new Error(`Index not found for ${e.baseWorkspaceFolderPath}`),new ut(e.id,s,a)}static async dispatchAddOrInvalidate(e,n,r){let o=t.getIndexInfo(e.filePath,n)?.index,s;return o?await o.indexFile(e.filePath,e.languageId):s=new Error(`Index not found for ${e.filePath}`),new ut(e.id,s,void 0)}static async dispatchGetContext(e,n,r){if(rn(e.filePath).scheme!=="file")return new ut(e.id,void 0,[]);let o=t.getIndexInfo(e.filePath,n)?.contextRetreival,s,a;return o?a=await o.getStringifiedContextAtPositionAsync(e.filePath,e.code,e.offset,e.languageId,8e3,r):s=new Error(`ContextRetrieval not found for ${e.filePath}`),new ut(e.id,s,a)}static async dispatchExit(e,n,r){for(let o of n.values())await o.index.dispose();n.clear(),En?.postMessage(new ut(e.id,void 0,void 0)),En?.close()}static async dispatchCreateIndex(e,n,r){return n.has(Sn.default.normalize(e.baseWorkspaceFolderPath))||n.set(Sn.default.normalize(e.baseWorkspaceFolderPath),new Io(e.databaseFilePath)),new ut(e.id,void 0,void 0)}static async dispatchRemoveIndex(e,n,r){let o=Sn.default.normalize(e.baseWorkspaceFolderPath);if(n.has(o)){let s=n.get(o);s&&await s.index.dispose(),n.delete(o)}return new ut(e.id,void 0,void 0)}static getIndexInfo(e,n){for(let[r,o]of n)if(Sn.default.normalize(e).startsWith(r))return o}},En=ar.parentPort;if(!En)throw new Error("This module should only be used in a worker thread.");if(!Ic(ar.workerData))throw new Error("Worker data must provide a valid database path.");var I_=ar.workerData.cwd;process.cwd=()=>I_;new Eu(En,ar.workerData.indexWorkspaceRoots);
//# sourceMappingURL=indexWorker.js.map
