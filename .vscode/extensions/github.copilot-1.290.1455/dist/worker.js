"use strict";var Xi=Object.create;var Ke=Object.defineProperty;var Yi=Object.getOwnPropertyDescriptor;var Qi=Object.getOwnPropertyNames;var es=Object.getPrototypeOf,ts=Object.prototype.hasOwnProperty;var s=(t,e)=>Ke(t,"name",{value:e,configurable:!0});var E=(t,e)=>()=>(t&&(e=t(t=0)),e);var k=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ns=(t,e)=>{for(var n in e)Ke(t,n,{get:e[n],enumerable:!0})},Lr=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Qi(e))!ts.call(t,o)&&o!==n&&Ke(t,o,{get:()=>e[o],enumerable:!(r=Yi(e,o))||r.enumerable});return t};var Je=(t,e,n)=>(n=t!=null?Xi(es(t)):{},Lr(e||!t||!t.__esModule?Ke(n,"default",{value:t,enumerable:!0}):n,t)),rs=t=>Lr(Ke({},"__esModule",{value:!0}),t);var Nr=k(vn=>{var Pr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");vn.encode=function(t){if(0<=t&&t<Pr.length)return Pr[t];throw new TypeError("Must be between 0 and 63: "+t)};vn.decode=function(t){var e=65,n=90,r=97,o=122,i=48,a=57,l=43,u=47,c=26,d=52;return e<=t&&t<=n?t-e:r<=t&&t<=o?t-r+c:i<=t&&t<=a?t-i+d:t==l?62:t==u?63:-1}});var Tn=k(Sn=>{var Cr=Nr(),En=5,Ar=1<<En,Fr=Ar-1,Or=Ar;function os(t){return t<0?(-t<<1)+1:(t<<1)+0}s(os,"toVLQSigned");function is(t){var e=(t&1)===1,n=t>>1;return e?-n:n}s(is,"fromVLQSigned");Sn.encode=s(function(e){var n="",r,o=os(e);do r=o&Fr,o>>>=En,o>0&&(r|=Or),n+=Cr.encode(r);while(o>0);return n},"base64VLQ_encode");Sn.decode=s(function(e,n,r){var o=e.length,i=0,a=0,l,u;do{if(n>=o)throw new Error("Expected more digits in base 64 VLQ value.");if(u=Cr.decode(e.charCodeAt(n++)),u===-1)throw new Error("Invalid base64 digit: "+e.charAt(n-1));l=!!(u&Or),u&=Fr,i=i+(u<<a),a+=En}while(l);r.value=is(i),r.rest=n},"base64VLQ_decode")});var Fe=k(R=>{function ss(t,e,n){if(e in t)return t[e];if(arguments.length===3)return n;throw new Error('"'+e+'" is a required argument.')}s(ss,"getArg");R.getArg=ss;var Rr=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,as=/^data:.+\,.+$/;function Xe(t){var e=t.match(Rr);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}s(Xe,"urlParse");R.urlParse=Xe;function Ce(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}s(Ce,"urlGenerate");R.urlGenerate=Ce;function xn(t){var e=t,n=Xe(t);if(n){if(!n.path)return t;e=n.path}for(var r=R.isAbsolute(e),o=e.split(/\/+/),i,a=0,l=o.length-1;l>=0;l--)i=o[l],i==="."?o.splice(l,1):i===".."?a++:a>0&&(i===""?(o.splice(l+1,a),a=0):(o.splice(l,2),a--));return e=o.join("/"),e===""&&(e=r?"/":"."),n?(n.path=e,Ce(n)):e}s(xn,"normalize");R.normalize=xn;function Dr(t,e){t===""&&(t="."),e===""&&(e=".");var n=Xe(e),r=Xe(t);if(r&&(t=r.path||"/"),n&&!n.scheme)return r&&(n.scheme=r.scheme),Ce(n);if(n||e.match(as))return e;if(r&&!r.host&&!r.path)return r.host=e,Ce(r);var o=e.charAt(0)==="/"?e:xn(t.replace(/\/+$/,"")+"/"+e);return r?(r.path=o,Ce(r)):o}s(Dr,"join");R.join=Dr;R.isAbsolute=function(t){return t.charAt(0)==="/"||Rr.test(t)};function ls(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var n=0;e.indexOf(t+"/")!==0;){var r=t.lastIndexOf("/");if(r<0||(t=t.slice(0,r),t.match(/^([^\/]+:\/)?\/*$/)))return e;++n}return Array(n+1).join("../")+e.substr(t.length+1)}s(ls,"relative");R.relative=ls;var Br=function(){var t=Object.create(null);return!("__proto__"in t)}();function Wr(t){return t}s(Wr,"identity");function us(t){return Ur(t)?"$"+t:t}s(us,"toSetString");R.toSetString=Br?Wr:us;function cs(t){return Ur(t)?t.slice(1):t}s(cs,"fromSetString");R.fromSetString=Br?Wr:cs;function Ur(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var n=e-10;n>=0;n--)if(t.charCodeAt(n)!==36)return!1;return!0}s(Ur,"isProtoString");function ds(t,e,n){var r=Ae(t.source,e.source);return r!==0||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0||n)||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=t.generatedLine-e.generatedLine,r!==0)?r:Ae(t.name,e.name)}s(ds,"compareByOriginalPositions");R.compareByOriginalPositions=ds;function _s(t,e,n){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0||n)||(r=Ae(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:Ae(t.name,e.name)}s(_s,"compareByGeneratedPositionsDeflated");R.compareByGeneratedPositionsDeflated=_s;function Ae(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}s(Ae,"strcmp");function ms(t,e){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=Ae(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:Ae(t.name,e.name)}s(ms,"compareByGeneratedPositionsInflated");R.compareByGeneratedPositionsInflated=ms;function ps(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}s(ps,"parseSourceMapInput");R.parseSourceMapInput=ps;function hs(t,e,n){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),n){var r=Xe(n);if(!r)throw new Error("sourceMapURL could not be parsed");if(r.path){var o=r.path.lastIndexOf("/");o>=0&&(r.path=r.path.substring(0,o+1))}e=Dr(Ce(r),e)}return xn(e)}s(hs,"computeSourceURL");R.computeSourceURL=hs});var In=k(zr=>{var kn=Fe(),Mn=Object.prototype.hasOwnProperty,Ee=typeof Map<"u";function ae(){this._array=[],this._set=Ee?new Map:Object.create(null)}s(ae,"ArraySet");ae.fromArray=s(function(e,n){for(var r=new ae,o=0,i=e.length;o<i;o++)r.add(e[o],n);return r},"ArraySet_fromArray");ae.prototype.size=s(function(){return Ee?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");ae.prototype.add=s(function(e,n){var r=Ee?e:kn.toSetString(e),o=Ee?this.has(e):Mn.call(this._set,r),i=this._array.length;(!o||n)&&this._array.push(e),o||(Ee?this._set.set(e,i):this._set[r]=i)},"ArraySet_add");ae.prototype.has=s(function(e){if(Ee)return this._set.has(e);var n=kn.toSetString(e);return Mn.call(this._set,n)},"ArraySet_has");ae.prototype.indexOf=s(function(e){if(Ee){var n=this._set.get(e);if(n>=0)return n}else{var r=kn.toSetString(e);if(Mn.call(this._set,r))return this._set[r]}throw new Error('"'+e+'" is not in the set.')},"ArraySet_indexOf");ae.prototype.at=s(function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},"ArraySet_at");ae.prototype.toArray=s(function(){return this._array.slice()},"ArraySet_toArray");zr.ArraySet=ae});var Vr=k(Hr=>{var jr=Fe();function gs(t,e){var n=t.generatedLine,r=e.generatedLine,o=t.generatedColumn,i=e.generatedColumn;return r>n||r==n&&i>=o||jr.compareByGeneratedPositionsInflated(t,e)<=0}s(gs,"generatedPositionAfter");function bt(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}s(bt,"MappingList");bt.prototype.unsortedForEach=s(function(e,n){this._array.forEach(e,n)},"MappingList_forEach");bt.prototype.add=s(function(e){gs(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},"MappingList_add");bt.prototype.toArray=s(function(){return this._sorted||(this._array.sort(jr.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");Hr.MappingList=bt});var Ln=k(qr=>{var Ye=Tn(),L=Fe(),yt=In().ArraySet,bs=Vr().MappingList;function q(t){t||(t={}),this._file=L.getArg(t,"file",null),this._sourceRoot=L.getArg(t,"sourceRoot",null),this._skipValidation=L.getArg(t,"skipValidation",!1),this._sources=new yt,this._names=new yt,this._mappings=new bs,this._sourcesContents=null}s(q,"SourceMapGenerator");q.prototype._version=3;q.fromSourceMap=s(function(e){var n=e.sourceRoot,r=new q({file:e.file,sourceRoot:n});return e.eachMapping(function(o){var i={generated:{line:o.generatedLine,column:o.generatedColumn}};o.source!=null&&(i.source=o.source,n!=null&&(i.source=L.relative(n,i.source)),i.original={line:o.originalLine,column:o.originalColumn},o.name!=null&&(i.name=o.name)),r.addMapping(i)}),e.sources.forEach(function(o){var i=o;n!==null&&(i=L.relative(n,o)),r._sources.has(i)||r._sources.add(i);var a=e.sourceContentFor(o);a!=null&&r.setSourceContent(o,a)}),r},"SourceMapGenerator_fromSourceMap");q.prototype.addMapping=s(function(e){var n=L.getArg(e,"generated"),r=L.getArg(e,"original",null),o=L.getArg(e,"source",null),i=L.getArg(e,"name",null);this._skipValidation||this._validateMapping(n,r,o,i),o!=null&&(o=String(o),this._sources.has(o)||this._sources.add(o)),i!=null&&(i=String(i),this._names.has(i)||this._names.add(i)),this._mappings.add({generatedLine:n.line,generatedColumn:n.column,originalLine:r!=null&&r.line,originalColumn:r!=null&&r.column,source:o,name:i})},"SourceMapGenerator_addMapping");q.prototype.setSourceContent=s(function(e,n){var r=e;this._sourceRoot!=null&&(r=L.relative(this._sourceRoot,r)),n!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[L.toSetString(r)]=n):this._sourcesContents&&(delete this._sourcesContents[L.toSetString(r)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");q.prototype.applySourceMap=s(function(e,n,r){var o=n;if(n==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);o=e.file}var i=this._sourceRoot;i!=null&&(o=L.relative(i,o));var a=new yt,l=new yt;this._mappings.unsortedForEach(function(u){if(u.source===o&&u.originalLine!=null){var c=e.originalPositionFor({line:u.originalLine,column:u.originalColumn});c.source!=null&&(u.source=c.source,r!=null&&(u.source=L.join(r,u.source)),i!=null&&(u.source=L.relative(i,u.source)),u.originalLine=c.line,u.originalColumn=c.column,c.name!=null&&(u.name=c.name))}var d=u.source;d!=null&&!a.has(d)&&a.add(d);var _=u.name;_!=null&&!l.has(_)&&l.add(_)},this),this._sources=a,this._names=l,e.sources.forEach(function(u){var c=e.sourceContentFor(u);c!=null&&(r!=null&&(u=L.join(r,u)),i!=null&&(u=L.relative(i,u)),this.setSourceContent(u,c))},this)},"SourceMapGenerator_applySourceMap");q.prototype._validateMapping=s(function(e,n,r,o){if(n&&typeof n.line!="number"&&typeof n.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!n&&!r&&!o)){if(e&&"line"in e&&"column"in e&&n&&"line"in n&&"column"in n&&e.line>0&&e.column>=0&&n.line>0&&n.column>=0&&r)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:n,name:o}))}},"SourceMapGenerator_validateMapping");q.prototype._serializeMappings=s(function(){for(var e=0,n=1,r=0,o=0,i=0,a=0,l="",u,c,d,_,m=this._mappings.toArray(),f=0,h=m.length;f<h;f++){if(c=m[f],u="",c.generatedLine!==n)for(e=0;c.generatedLine!==n;)u+=";",n++;else if(f>0){if(!L.compareByGeneratedPositionsInflated(c,m[f-1]))continue;u+=","}u+=Ye.encode(c.generatedColumn-e),e=c.generatedColumn,c.source!=null&&(_=this._sources.indexOf(c.source),u+=Ye.encode(_-a),a=_,u+=Ye.encode(c.originalLine-1-o),o=c.originalLine-1,u+=Ye.encode(c.originalColumn-r),r=c.originalColumn,c.name!=null&&(d=this._names.indexOf(c.name),u+=Ye.encode(d-i),i=d)),l+=u}return l},"SourceMapGenerator_serializeMappings");q.prototype._generateSourcesContent=s(function(e,n){return e.map(function(r){if(!this._sourcesContents)return null;n!=null&&(r=L.relative(n,r));var o=L.toSetString(r);return Object.prototype.hasOwnProperty.call(this._sourcesContents,o)?this._sourcesContents[o]:null},this)},"SourceMapGenerator_generateSourcesContent");q.prototype.toJSON=s(function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},"SourceMapGenerator_toJSON");q.prototype.toString=s(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");qr.SourceMapGenerator=q});var Zr=k(Se=>{Se.GREATEST_LOWER_BOUND=1;Se.LEAST_UPPER_BOUND=2;function Pn(t,e,n,r,o,i){var a=Math.floor((e-t)/2)+t,l=o(n,r[a],!0);return l===0?a:l>0?e-a>1?Pn(a,e,n,r,o,i):i==Se.LEAST_UPPER_BOUND?e<r.length?e:-1:a:a-t>1?Pn(t,a,n,r,o,i):i==Se.LEAST_UPPER_BOUND?a:t<0?-1:t}s(Pn,"recursiveSearch");Se.search=s(function(e,n,r,o){if(n.length===0)return-1;var i=Pn(-1,n.length,e,n,r,o||Se.GREATEST_LOWER_BOUND);if(i<0)return-1;for(;i-1>=0&&r(n[i],n[i-1],!0)===0;)--i;return i},"search")});var Gr=k($r=>{function Nn(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}s(Nn,"swap");function ys(t,e){return Math.round(t+Math.random()*(e-t))}s(ys,"randomIntInRange");function Cn(t,e,n,r){if(n<r){var o=ys(n,r),i=n-1;Nn(t,o,r);for(var a=t[r],l=n;l<r;l++)e(t[l],a)<=0&&(i+=1,Nn(t,i,l));Nn(t,i+1,l);var u=i+1;Cn(t,e,n,u-1),Cn(t,e,u+1,r)}}s(Cn,"doQuickSort");$r.quickSort=function(t,e){Cn(t,e,0,t.length-1)}});var Jr=k(wt=>{var w=Fe(),An=Zr(),Oe=In().ArraySet,ws=Tn(),Qe=Gr().quickSort;function T(t,e){var n=t;return typeof t=="string"&&(n=w.parseSourceMapInput(t)),n.sections!=null?new $(n,e):new F(n,e)}s(T,"SourceMapConsumer");T.fromSourceMap=function(t,e){return F.fromSourceMap(t,e)};T.prototype._version=3;T.prototype.__generatedMappings=null;Object.defineProperty(T.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings},"get")});T.prototype.__originalMappings=null;Object.defineProperty(T.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings},"get")});T.prototype._charIsMappingSeparator=s(function(e,n){var r=e.charAt(n);return r===";"||r===","},"SourceMapConsumer_charIsMappingSeparator");T.prototype._parseMappings=s(function(e,n){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");T.GENERATED_ORDER=1;T.ORIGINAL_ORDER=2;T.GREATEST_LOWER_BOUND=1;T.LEAST_UPPER_BOUND=2;T.prototype.eachMapping=s(function(e,n,r){var o=n||null,i=r||T.GENERATED_ORDER,a;switch(i){case T.GENERATED_ORDER:a=this._generatedMappings;break;case T.ORIGINAL_ORDER:a=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var l=this.sourceRoot;a.map(function(u){var c=u.source===null?null:this._sources.at(u.source);return c=w.computeSourceURL(l,c,this._sourceMapURL),{source:c,generatedLine:u.generatedLine,generatedColumn:u.generatedColumn,originalLine:u.originalLine,originalColumn:u.originalColumn,name:u.name===null?null:this._names.at(u.name)}},this).forEach(e,o)},"SourceMapConsumer_eachMapping");T.prototype.allGeneratedPositionsFor=s(function(e){var n=w.getArg(e,"line"),r={source:w.getArg(e,"source"),originalLine:n,originalColumn:w.getArg(e,"column",0)};if(r.source=this._findSourceIndex(r.source),r.source<0)return[];var o=[],i=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",w.compareByOriginalPositions,An.LEAST_UPPER_BOUND);if(i>=0){var a=this._originalMappings[i];if(e.column===void 0)for(var l=a.originalLine;a&&a.originalLine===l;)o.push({line:w.getArg(a,"generatedLine",null),column:w.getArg(a,"generatedColumn",null),lastColumn:w.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++i];else for(var u=a.originalColumn;a&&a.originalLine===n&&a.originalColumn==u;)o.push({line:w.getArg(a,"generatedLine",null),column:w.getArg(a,"generatedColumn",null),lastColumn:w.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++i]}return o},"SourceMapConsumer_allGeneratedPositionsFor");wt.SourceMapConsumer=T;function F(t,e){var n=t;typeof t=="string"&&(n=w.parseSourceMapInput(t));var r=w.getArg(n,"version"),o=w.getArg(n,"sources"),i=w.getArg(n,"names",[]),a=w.getArg(n,"sourceRoot",null),l=w.getArg(n,"sourcesContent",null),u=w.getArg(n,"mappings"),c=w.getArg(n,"file",null);if(r!=this._version)throw new Error("Unsupported version: "+r);a&&(a=w.normalize(a)),o=o.map(String).map(w.normalize).map(function(d){return a&&w.isAbsolute(a)&&w.isAbsolute(d)?w.relative(a,d):d}),this._names=Oe.fromArray(i.map(String),!0),this._sources=Oe.fromArray(o,!0),this._absoluteSources=this._sources.toArray().map(function(d){return w.computeSourceURL(a,d,e)}),this.sourceRoot=a,this.sourcesContent=l,this._mappings=u,this._sourceMapURL=e,this.file=c}s(F,"BasicSourceMapConsumer");F.prototype=Object.create(T.prototype);F.prototype.consumer=T;F.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=w.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var n;for(n=0;n<this._absoluteSources.length;++n)if(this._absoluteSources[n]==t)return n;return-1};F.fromSourceMap=s(function(e,n){var r=Object.create(F.prototype),o=r._names=Oe.fromArray(e._names.toArray(),!0),i=r._sources=Oe.fromArray(e._sources.toArray(),!0);r.sourceRoot=e._sourceRoot,r.sourcesContent=e._generateSourcesContent(r._sources.toArray(),r.sourceRoot),r.file=e._file,r._sourceMapURL=n,r._absoluteSources=r._sources.toArray().map(function(f){return w.computeSourceURL(r.sourceRoot,f,n)});for(var a=e._mappings.toArray().slice(),l=r.__generatedMappings=[],u=r.__originalMappings=[],c=0,d=a.length;c<d;c++){var _=a[c],m=new Kr;m.generatedLine=_.generatedLine,m.generatedColumn=_.generatedColumn,_.source&&(m.source=i.indexOf(_.source),m.originalLine=_.originalLine,m.originalColumn=_.originalColumn,_.name&&(m.name=o.indexOf(_.name)),u.push(m)),l.push(m)}return Qe(r.__originalMappings,w.compareByOriginalPositions),r},"SourceMapConsumer_fromSourceMap");F.prototype._version=3;Object.defineProperty(F.prototype,"sources",{get:s(function(){return this._absoluteSources.slice()},"get")});function Kr(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}s(Kr,"Mapping");F.prototype._parseMappings=s(function(e,n){for(var r=1,o=0,i=0,a=0,l=0,u=0,c=e.length,d=0,_={},m={},f=[],h=[],p,g,y,b,S;d<c;)if(e.charAt(d)===";")r++,d++,o=0;else if(e.charAt(d)===",")d++;else{for(p=new Kr,p.generatedLine=r,b=d;b<c&&!this._charIsMappingSeparator(e,b);b++);if(g=e.slice(d,b),y=_[g],y)d+=g.length;else{for(y=[];d<b;)ws.decode(e,d,m),S=m.value,d=m.rest,y.push(S);if(y.length===2)throw new Error("Found a source, but no line and column");if(y.length===3)throw new Error("Found a source and line, but no column");_[g]=y}p.generatedColumn=o+y[0],o=p.generatedColumn,y.length>1&&(p.source=l+y[1],l+=y[1],p.originalLine=i+y[2],i=p.originalLine,p.originalLine+=1,p.originalColumn=a+y[3],a=p.originalColumn,y.length>4&&(p.name=u+y[4],u+=y[4])),h.push(p),typeof p.originalLine=="number"&&f.push(p)}Qe(h,w.compareByGeneratedPositionsDeflated),this.__generatedMappings=h,Qe(f,w.compareByOriginalPositions),this.__originalMappings=f},"SourceMapConsumer_parseMappings");F.prototype._findMapping=s(function(e,n,r,o,i,a){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[o]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[o]);return An.search(e,n,i,a)},"SourceMapConsumer_findMapping");F.prototype.computeColumnSpans=s(function(){for(var e=0;e<this._generatedMappings.length;++e){var n=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(n.generatedLine===r.generatedLine){n.lastGeneratedColumn=r.generatedColumn-1;continue}}n.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");F.prototype.originalPositionFor=s(function(e){var n={generatedLine:w.getArg(e,"line"),generatedColumn:w.getArg(e,"column")},r=this._findMapping(n,this._generatedMappings,"generatedLine","generatedColumn",w.compareByGeneratedPositionsDeflated,w.getArg(e,"bias",T.GREATEST_LOWER_BOUND));if(r>=0){var o=this._generatedMappings[r];if(o.generatedLine===n.generatedLine){var i=w.getArg(o,"source",null);i!==null&&(i=this._sources.at(i),i=w.computeSourceURL(this.sourceRoot,i,this._sourceMapURL));var a=w.getArg(o,"name",null);return a!==null&&(a=this._names.at(a)),{source:i,line:w.getArg(o,"originalLine",null),column:w.getArg(o,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");F.prototype.hasContentsOfAllSources=s(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");F.prototype.sourceContentFor=s(function(e,n){if(!this.sourcesContent)return null;var r=this._findSourceIndex(e);if(r>=0)return this.sourcesContent[r];var o=e;this.sourceRoot!=null&&(o=w.relative(this.sourceRoot,o));var i;if(this.sourceRoot!=null&&(i=w.urlParse(this.sourceRoot))){var a=o.replace(/^file:\/\//,"");if(i.scheme=="file"&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!i.path||i.path=="/")&&this._sources.has("/"+o))return this.sourcesContent[this._sources.indexOf("/"+o)]}if(n)return null;throw new Error('"'+o+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");F.prototype.generatedPositionFor=s(function(e){var n=w.getArg(e,"source");if(n=this._findSourceIndex(n),n<0)return{line:null,column:null,lastColumn:null};var r={source:n,originalLine:w.getArg(e,"line"),originalColumn:w.getArg(e,"column")},o=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",w.compareByOriginalPositions,w.getArg(e,"bias",T.GREATEST_LOWER_BOUND));if(o>=0){var i=this._originalMappings[o];if(i.source===r.source)return{line:w.getArg(i,"generatedLine",null),column:w.getArg(i,"generatedColumn",null),lastColumn:w.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");wt.BasicSourceMapConsumer=F;function $(t,e){var n=t;typeof t=="string"&&(n=w.parseSourceMapInput(t));var r=w.getArg(n,"version"),o=w.getArg(n,"sections");if(r!=this._version)throw new Error("Unsupported version: "+r);this._sources=new Oe,this._names=new Oe;var i={line:-1,column:0};this._sections=o.map(function(a){if(a.url)throw new Error("Support for url field in sections not implemented.");var l=w.getArg(a,"offset"),u=w.getArg(l,"line"),c=w.getArg(l,"column");if(u<i.line||u===i.line&&c<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");return i=l,{generatedOffset:{generatedLine:u+1,generatedColumn:c+1},consumer:new T(w.getArg(a,"map"),e)}})}s($,"IndexedSourceMapConsumer");$.prototype=Object.create(T.prototype);$.prototype.constructor=T;$.prototype._version=3;Object.defineProperty($.prototype,"sources",{get:s(function(){for(var t=[],e=0;e<this._sections.length;e++)for(var n=0;n<this._sections[e].consumer.sources.length;n++)t.push(this._sections[e].consumer.sources[n]);return t},"get")});$.prototype.originalPositionFor=s(function(e){var n={generatedLine:w.getArg(e,"line"),generatedColumn:w.getArg(e,"column")},r=An.search(n,this._sections,function(i,a){var l=i.generatedLine-a.generatedOffset.generatedLine;return l||i.generatedColumn-a.generatedOffset.generatedColumn}),o=this._sections[r];return o?o.consumer.originalPositionFor({line:n.generatedLine-(o.generatedOffset.generatedLine-1),column:n.generatedColumn-(o.generatedOffset.generatedLine===n.generatedLine?o.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");$.prototype.hasContentsOfAllSources=s(function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");$.prototype.sourceContentFor=s(function(e,n){for(var r=0;r<this._sections.length;r++){var o=this._sections[r],i=o.consumer.sourceContentFor(e,!0);if(i)return i}if(n)return null;throw new Error('"'+e+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");$.prototype.generatedPositionFor=s(function(e){for(var n=0;n<this._sections.length;n++){var r=this._sections[n];if(r.consumer._findSourceIndex(w.getArg(e,"source"))!==-1){var o=r.consumer.generatedPositionFor(e);if(o){var i={line:o.line+(r.generatedOffset.generatedLine-1),column:o.column+(r.generatedOffset.generatedLine===o.line?r.generatedOffset.generatedColumn-1:0)};return i}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");$.prototype._parseMappings=s(function(e,n){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var o=this._sections[r],i=o.consumer._generatedMappings,a=0;a<i.length;a++){var l=i[a],u=o.consumer._sources.at(l.source);u=w.computeSourceURL(o.consumer.sourceRoot,u,this._sourceMapURL),this._sources.add(u),u=this._sources.indexOf(u);var c=null;l.name&&(c=o.consumer._names.at(l.name),this._names.add(c),c=this._names.indexOf(c));var d={source:u,generatedLine:l.generatedLine+(o.generatedOffset.generatedLine-1),generatedColumn:l.generatedColumn+(o.generatedOffset.generatedLine===l.generatedLine?o.generatedOffset.generatedColumn-1:0),originalLine:l.originalLine,originalColumn:l.originalColumn,name:c};this.__generatedMappings.push(d),typeof d.originalLine=="number"&&this.__originalMappings.push(d)}Qe(this.__generatedMappings,w.compareByGeneratedPositionsDeflated),Qe(this.__originalMappings,w.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");wt.IndexedSourceMapConsumer=$});var Yr=k(Xr=>{var vs=Ln().SourceMapGenerator,vt=Fe(),Es=/(\r?\n)/,Ss=10,Re="$$$isSourceNode$$$";function z(t,e,n,r,o){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=n??null,this.name=o??null,this[Re]=!0,r!=null&&this.add(r)}s(z,"SourceNode");z.fromStringWithSourceMap=s(function(e,n,r){var o=new z,i=e.split(Es),a=0,l=s(function(){var m=h(),f=h()||"";return m+f;function h(){return a<i.length?i[a++]:void 0}},"shiftNextLine"),u=1,c=0,d=null;return n.eachMapping(function(m){if(d!==null)if(u<m.generatedLine)_(d,l()),u++,c=0;else{var f=i[a]||"",h=f.substr(0,m.generatedColumn-c);i[a]=f.substr(m.generatedColumn-c),c=m.generatedColumn,_(d,h),d=m;return}for(;u<m.generatedLine;)o.add(l()),u++;if(c<m.generatedColumn){var f=i[a]||"";o.add(f.substr(0,m.generatedColumn)),i[a]=f.substr(m.generatedColumn),c=m.generatedColumn}d=m},this),a<i.length&&(d&&_(d,l()),o.add(i.splice(a).join(""))),n.sources.forEach(function(m){var f=n.sourceContentFor(m);f!=null&&(r!=null&&(m=vt.join(r,m)),o.setSourceContent(m,f))}),o;function _(m,f){if(m===null||m.source===void 0)o.add(f);else{var h=r?vt.join(r,m.source):m.source;o.add(new z(m.originalLine,m.originalColumn,h,f,m.name))}}s(_,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");z.prototype.add=s(function(e){if(Array.isArray(e))e.forEach(function(n){this.add(n)},this);else if(e[Re]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_add");z.prototype.prepend=s(function(e){if(Array.isArray(e))for(var n=e.length-1;n>=0;n--)this.prepend(e[n]);else if(e[Re]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_prepend");z.prototype.walk=s(function(e){for(var n,r=0,o=this.children.length;r<o;r++)n=this.children[r],n[Re]?n.walk(e):n!==""&&e(n,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");z.prototype.join=s(function(e){var n,r,o=this.children.length;if(o>0){for(n=[],r=0;r<o-1;r++)n.push(this.children[r]),n.push(e);n.push(this.children[r]),this.children=n}return this},"SourceNode_join");z.prototype.replaceRight=s(function(e,n){var r=this.children[this.children.length-1];return r[Re]?r.replaceRight(e,n):typeof r=="string"?this.children[this.children.length-1]=r.replace(e,n):this.children.push("".replace(e,n)),this},"SourceNode_replaceRight");z.prototype.setSourceContent=s(function(e,n){this.sourceContents[vt.toSetString(e)]=n},"SourceNode_setSourceContent");z.prototype.walkSourceContents=s(function(e){for(var n=0,r=this.children.length;n<r;n++)this.children[n][Re]&&this.children[n].walkSourceContents(e);for(var o=Object.keys(this.sourceContents),n=0,r=o.length;n<r;n++)e(vt.fromSetString(o[n]),this.sourceContents[o[n]])},"SourceNode_walkSourceContents");z.prototype.toString=s(function(){var e="";return this.walk(function(n){e+=n}),e},"SourceNode_toString");z.prototype.toStringWithSourceMap=s(function(e){var n={code:"",line:1,column:0},r=new vs(e),o=!1,i=null,a=null,l=null,u=null;return this.walk(function(c,d){n.code+=c,d.source!==null&&d.line!==null&&d.column!==null?((i!==d.source||a!==d.line||l!==d.column||u!==d.name)&&r.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:n.line,column:n.column},name:d.name}),i=d.source,a=d.line,l=d.column,u=d.name,o=!0):o&&(r.addMapping({generated:{line:n.line,column:n.column}}),i=null,o=!1);for(var _=0,m=c.length;_<m;_++)c.charCodeAt(_)===Ss?(n.line++,n.column=0,_+1===m?(i=null,o=!1):o&&r.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:n.line,column:n.column},name:d.name})):n.column++}),this.walkSourceContents(function(c,d){r.setSourceContent(c,d)}),{code:n.code,map:r}},"SourceNode_toStringWithSourceMap");Xr.SourceNode=z});var Qr=k(Et=>{Et.SourceMapGenerator=Ln().SourceMapGenerator;Et.SourceMapConsumer=Jr().SourceMapConsumer;Et.SourceNode=Yr().SourceNode});var to=k(($l,eo)=>{var Ts=Object.prototype.toString,Fn=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function xs(t){return Ts.call(t).slice(8,-1)==="ArrayBuffer"}s(xs,"isArrayBuffer");function ks(t,e,n){e>>>=0;var r=t.byteLength-e;if(r<0)throw new RangeError("'offset' is out of bounds");if(n===void 0)n=r;else if(n>>>=0,n>r)throw new RangeError("'length' is out of bounds");return Fn?Buffer.from(t.slice(e,e+n)):new Buffer(new Uint8Array(t.slice(e,e+n)))}s(ks,"fromArrayBuffer");function Ms(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return Fn?Buffer.from(t,e):new Buffer(t,e)}s(Ms,"fromString");function Is(t,e,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return xs(t)?ks(t,e,n):typeof t=="string"?Ms(t,e):Fn?Buffer.from(t):new Buffer(t)}s(Is,"bufferFrom");eo.exports=Is});var uo=k((xe,Bn)=>{var Ls=Qr().SourceMapConsumer,On=require("path"),Q;try{Q=require("fs"),(!Q.existsSync||!Q.readFileSync)&&(Q=null)}catch{}var Ps=to();function no(t,e){return t.require(e)}s(no,"dynamicRequire");var ro=!1,oo=!1,Rn=!1,et="auto",Te={},tt={},Ns=/^data:application\/json[^,]+base64,/,_e=[],me=[];function Wn(){return et==="browser"?!0:et==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}s(Wn,"isInBrowser");function Cs(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}s(Cs,"hasGlobalProcessEventEmitter");function As(){return typeof process=="object"&&process!==null?process.version:""}s(As,"globalProcessVersion");function Fs(){if(typeof process=="object"&&process!==null)return process.stderr}s(Fs,"globalProcessStderr");function Os(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}s(Os,"globalProcessExit");function St(t){return function(e){for(var n=0;n<t.length;n++){var r=t[n](e);if(r)return r}return null}}s(St,"handlerExec");var Un=St(_e);_e.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(r,o){return o?"":"/"})),t in Te)return Te[t];var e="";try{if(Q)Q.existsSync(t)&&(e=Q.readFileSync(t,"utf8"));else{var n=new XMLHttpRequest;n.open("GET",t,!1),n.send(null),n.readyState===4&&n.status===200&&(e=n.responseText)}}catch{}return Te[t]=e});function Dn(t,e){if(!t)return e;var n=On.dirname(t),r=/^\w+:\/\/[^\/]*/.exec(n),o=r?r[0]:"",i=n.slice(o.length);return o&&/^\/\w\:/.test(i)?(o+="/",o+On.resolve(n.slice(o.length),e).replace(/\\/g,"/")):o+On.resolve(n.slice(o.length),e)}s(Dn,"supportRelativeURL");function Rs(t){var e;if(Wn())try{var n=new XMLHttpRequest;n.open("GET",t,!1),n.send(null),e=n.readyState===4?n.responseText:null;var r=n.getResponseHeader("SourceMap")||n.getResponseHeader("X-SourceMap");if(r)return r}catch{}e=Un(t);for(var o=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,i,a;a=o.exec(e);)i=a;return i?i[1]:null}s(Rs,"retrieveSourceMapURL");var zn=St(me);me.push(function(t){var e=Rs(t);if(!e)return null;var n;if(Ns.test(e)){var r=e.slice(e.indexOf(",")+1);n=Ps(r,"base64").toString(),e=t}else e=Dn(t,e),n=Un(e);return n?{url:e,map:n}:null});function jn(t){var e=tt[t.source];if(!e){var n=zn(t.source);n?(e=tt[t.source]={url:n.url,map:new Ls(n.map)},e.map.sourcesContent&&e.map.sources.forEach(function(o,i){var a=e.map.sourcesContent[i];if(a){var l=Dn(e.url,o);Te[l]=a}})):e=tt[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var r=e.map.originalPositionFor(t);if(r.source!==null)return r.source=Dn(e.url,r.source),r}return t}s(jn,"mapSourcePosition");function so(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var n=jn({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+n.source+":"+n.line+":"+(n.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+so(e[2])+")":t}s(so,"mapEvalOrigin");function Ds(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var n=this.getLineNumber();if(n!=null){e+=":"+n;var r=this.getColumnNumber();r&&(e+=":"+r)}}var o="",i=this.getFunctionName(),a=!0,l=this.isConstructor(),u=!(this.isToplevel()||l);if(u){var c=this.getTypeName();c==="[object Object]"&&(c="null");var d=this.getMethodName();i?(c&&i.indexOf(c)!=0&&(o+=c+"."),o+=i,d&&i.indexOf("."+d)!=i.length-d.length-1&&(o+=" [as "+d+"]")):o+=c+"."+(d||"<anonymous>")}else l?o+="new "+(i||"<anonymous>"):i?o+=i:(o+=e,a=!1);return a&&(o+=" ("+e+")"),o}s(Ds,"CallSiteToString");function io(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(n){e[n]=/^(?:is|get)/.test(n)?function(){return t[n].call(t)}:t[n]}),e.toString=Ds,e}s(io,"cloneCallSite");function ao(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var n=t.getFileName()||t.getScriptNameOrSourceURL();if(n){var r=t.getLineNumber(),o=t.getColumnNumber()-1,i=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,a=i.test(As())?0:62;r===1&&o>a&&!Wn()&&!t.isEval()&&(o-=a);var l=jn({source:n,line:r,column:o});e.curPosition=l,t=io(t);var u=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?u():e.nextPosition.name||u()},t.getFileName=function(){return l.source},t.getLineNumber=function(){return l.line},t.getColumnNumber=function(){return l.column+1},t.getScriptNameOrSourceURL=function(){return l.source},t}var c=t.isEval()&&t.getEvalOrigin();return c&&(c=so(c),t=io(t),t.getEvalOrigin=function(){return c}),t}s(ao,"wrapCallSite");function Bs(t,e){Rn&&(Te={},tt={});for(var n=t.name||"Error",r=t.message||"",o=n+": "+r,i={nextPosition:null,curPosition:null},a=[],l=e.length-1;l>=0;l--)a.push(`
    at `+ao(e[l],i)),i.nextPosition=i.curPosition;return i.curPosition=i.nextPosition=null,o+a.reverse().join("")}s(Bs,"prepareStackTrace");function lo(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var n=e[1],r=+e[2],o=+e[3],i=Te[n];if(!i&&Q&&Q.existsSync(n))try{i=Q.readFileSync(n,"utf8")}catch{i=""}if(i){var a=i.split(/(?:\r\n|\r|\n)/)[r-1];if(a)return n+":"+r+`
`+a+`
`+new Array(o).join(" ")+"^"}}return null}s(lo,"getErrorSource");function Ws(t){var e=lo(t),n=Fs();n&&n._handle&&n._handle.setBlocking&&n._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),Os(1)}s(Ws,"printErrorAndExit");function Us(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var n=arguments[1]&&arguments[1].stack,r=this.listeners(e).length>0;if(n&&!r)return Ws(arguments[1])}return t.apply(this,arguments)}}s(Us,"shimEmitUncaughtException");var zs=_e.slice(0),js=me.slice(0);xe.wrapCallSite=ao;xe.getErrorSource=lo;xe.mapSourcePosition=jn;xe.retrieveSourceMap=zn;xe.install=function(t){if(t=t||{},t.environment&&(et=t.environment,["node","browser","auto"].indexOf(et)===-1))throw new Error("environment "+et+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(_e.length=0),_e.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(me.length=0),me.unshift(t.retrieveSourceMap)),t.hookRequire&&!Wn()){var e=no(Bn,"module"),n=e.prototype._compile;n.__sourceMapSupport||(e.prototype._compile=function(i,a){return Te[a]=i,tt[a]=void 0,n.call(this,i,a)},e.prototype._compile.__sourceMapSupport=!0)}if(Rn||(Rn="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),ro||(ro=!0,Error.prepareStackTrace=Bs),!oo){var r="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var o=no(Bn,"worker_threads");o.isMainThread===!1&&(r=!1)}catch{}r&&Cs()&&(oo=!0,Us())}};xe.resetRetrieveHandlers=function(){_e.length=0,me.length=0,_e=zs.slice(0),me=js.slice(0),zn=St(me),Un=St(_e)}});var Hn=k(()=>{uo().install()});function Tt(t,e,n){return{type:"virtual",indentation:t,subs:e,label:n}}function Vn(t,e,n,r,o){if(n==="")throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:t,lineNumber:e,sourceLine:n,subs:r,label:o}}function xt(t){return{type:"blank",lineNumber:t,subs:[]}}function nt(t){return{type:"top",indentation:-1,subs:t??[]}}function x(t){return t.type==="blank"}function G(t){return t.type==="line"}function j(t){return t.type==="virtual"}function fe(t){return t.type==="top"}function Hs(t,e){function n(r){if(!j(r)&&!fe(r)&&r.lineNumber===e)return r.subs=[],!0;for(let o=0;o<r.subs.length;o++)if(n(r.subs[o]))return r.subs=r.subs.slice(0,o+1),!0;return!1}s(n,"cut"),n(t)}function Vs(t){return JSON.parse(JSON.stringify(t))}var ke=E(()=>{"use strict";s(Tt,"virtualNode");s(Vn,"lineNode");s(xt,"blankNode");s(nt,"topNode");s(x,"isBlank");s(G,"isLine");s(j,"isVirtual");s(fe,"isTop");s(Hs,"cutTreeAfterLine");s(Vs,"duplicateTree")});function co(t){return M(t,e=>{e.label=void 0},"bottomUp"),t}function qn(t,e){return M(t,n=>{n.label=n.label?e(n.label)?void 0:n.label:void 0},"bottomUp"),t}function ee(t,e){switch(t.type){case"line":case"virtual":{let n=t.subs.map(r=>ee(r,e));return{...t,subs:n,label:t.label?e(t.label):void 0}}case"blank":return{...t,label:t.label?e(t.label):void 0};case"top":return{...t,subs:t.subs.map(n=>ee(n,e)),label:t.label?e(t.label):void 0}}}function qs(t){let e=0;function n(r){!j(r)&&!fe(r)&&(r.lineNumber=e,e++)}s(n,"visitor"),M(t,n,"topDown")}function M(t,e,n){function r(o){n==="topDown"&&e(o),o.subs.forEach(i=>{r(i)}),n==="bottomUp"&&e(o)}s(r,"_visit"),r(t)}function Zs(t,e,n){function r(o){if(n==="topDown"&&!e(o))return!1;let i=!0;return o.subs.forEach(a=>{i=i&&r(a)}),n==="bottomUp"&&(i=i&&e(o)),i}s(r,"_visit"),r(t)}function rt(t,e,n,r){let o=e;function i(a){o=n(a,o)}return s(i,"visitor"),M(t,i,r),o}function ot(t,e,n){let r=s(i=>{if(n!==void 0&&n(i))return i;{let a=i.subs.map(r).filter(l=>l!==void 0);return i.subs=a,e(i)}},"rebuild"),o=r(t);return o!==void 0?o:nt()}var De=E(()=>{"use strict";ke();s(co,"clearLabels");s(qn,"clearLabelsIf");s(ee,"mapLabels");s(qs,"resetLineNumbers");s(M,"visitTree");s(Zs,"visitTreeConditionally");s(rt,"foldTree");s(ot,"rebuildTree")});function _o(t){let e=t.split(`
`),n=e.map(c=>c.match(/^\s*/)[0].length),r=e.map(c=>c.trimLeft());function o(c){let[d,_]=i(c+1,n[c]);return[Vn(n[c],c,r[c],d),_]}s(o,"parseNode");function i(c,d){let _,m=[],f=c,h;for(;f<r.length&&(r[f]===""||n[f]>d);)if(r[f]==="")h===void 0&&(h=f),f+=1;else{if(h!==void 0){for(let p=h;p<f;p++)m.push(xt(p));h=void 0}[_,f]=o(f),m.push(_)}return h!==void 0&&(f=h),[m,f]}s(i,"parseSubs");let[a,l]=i(0,-1),u=l;for(;u<r.length&&r[u]==="";)a.push(xt(u)),u+=1;if(u<r.length)throw new Error(`Parsing did not go to end of file. Ended at ${u} out of ${r.length}`);return nt(a)}function Be(t,e){function n(r){if(G(r)){let o=e.find(i=>i.matches(r.sourceLine));o&&(r.label=o.label)}}s(n,"visitor"),M(t,n,"bottomUp")}function it(t){function e(n){if(j(n)&&n.label===void 0){let r=n.subs.filter(o=>!x(o));r.length===1&&(n.label=r[0].label)}}s(e,"visitor"),M(t,e,"bottomUp")}function We(t){return Object.keys(t).map(e=>{let n;return t[e].test?n=s(r=>t[e].test(r),"matches"):n=t[e],{matches:n,label:e}})}function kt(t){let n=ot(t,s(function(r){if(r.subs.length===0||r.subs.findIndex(a=>a.label==="closer"||a.label==="opener")===-1)return r;let o=[],i;for(let a=0;a<r.subs.length;a++){let l=r.subs[a],u=r.subs[a-1];if(l.label==="opener"&&u!==void 0&&G(u))u.subs.push(l),l.subs.forEach(c=>u.subs.push(c)),l.subs=[];else if(l.label==="closer"&&i!==void 0&&(G(l)||j(l))&&l.indentation>=i.indentation){let c=o.length-1;for(;c>0&&x(o[c]);)c-=1;if(i.subs.push(...o.splice(c+1)),l.subs.length>0){let d=i.subs.findIndex(h=>h.label!=="newVirtual"),_=i.subs.slice(0,d),m=i.subs.slice(d),f=m.length>0?[Tt(l.indentation,m,"newVirtual")]:[];i.subs=[..._,...f,l]}else i.subs.push(l)}else o.push(l),x(l)||(i=l)}return r.subs=o,r},"rebuilder"));return qn(t,r=>r==="newVirtual"),n}function Zn(t,e=x,n){return ot(t,s(function(o){if(o.subs.length<=1)return o;let i=[],a=[],l,u=!1;function c(d=!1){if(l!==void 0&&(i.length>0||!d)){let _=Tt(l,a,n);i.push(_)}else a.forEach(_=>i.push(_))}s(c,"flushBlockIntoNewSubs");for(let d=0;d<o.subs.length;d++){let _=o.subs[d],m=e(_);!m&&u&&(c(),a=[]),u=m,a.push(_),x(_)||(l=l??_.indentation)}return c(!0),o.subs=i,o},"rebuilder"))}function te(t){return ot(t,s(function(n){return j(n)&&n.label===void 0&&n.subs.length<=1?n.subs.length===0?void 0:n.subs[0]:(n.subs.length===1&&j(n.subs[0])&&n.subs[0].label===void 0&&(n.subs=n.subs[0].subs),n)},"rebuilder"))}function Mt(t,e){mo[t]=e}function pe(t,e){let n=_o(t),r=mo[e??""];return r?r(n):(Be(n,Gs),kt(n))}var $s,Gs,mo,Ue=E(()=>{"use strict";ke();De();s(_o,"parseRaw");s(Be,"labelLines");s(it,"labelVirtualInherited");s(We,"buildLabelRules");s(kt,"combineClosersAndOpeners");s(Zn,"groupBlocks");s(te,"flattenVirtual");$s={opener:/^[[({]/,closer:/^[\])}]/},Gs=We($s),mo={};s(Mt,"registerLanguageSpecificParser");s(pe,"parseTree")});function fo(t){let e=t;return Be(e,Js),e=kt(e),e=te(e),it(e),M(e,n=>{if(n.label==="class"||n.label==="interface")for(let r of n.subs)!x(r)&&(r.label===void 0||r.label==="annotation")&&(r.label="member")},"bottomUp"),e}var Ks,Js,po=E(()=>{"use strict";ke();De();Ue();Ks={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[[({]/,closer:/^[\])}]/},Js=We(Ks);s(fo,"processJava")});function ho(t){let e=t;if(Be(e,Ys),x(e))return e;function n(i){if(i.label==="heading")return 1;if(i.label==="subheading")return 2;if(i.label==="subsubheading")return 3}s(n,"headingLevel");let r=[e],o=[...e.subs];e.subs=[];for(let i of o){let a=n(i);if(a===void 0||x(i))r[r.length-1].subs.push(i);else{for(;r.length<a;)r.push(r[r.length-1]);for(r[a-1].subs.push(i),r[a]=i;r.length>a+1;)r.pop()}}return e=Zn(e),e=te(e),it(e),e}var Xs,Ys,go=E(()=>{"use strict";ke();Ue();Xs={heading:/^# /,subheading:/^## /,subsubheading:/### /},Ys=We(Xs);s(ho,"processMarkdown")});function st(t){return" ".repeat(t.indentation)+t.sourceLine+`
`}function bo(t){function e(n,r){let o="";return G(n)?o=st(n):x(n)&&(o=`
`),r+o}return s(e,"accumulator"),rt(t,"",e,"topDown")}function Qs(t,e){let n=new Set(e),r=[],o="";function i(a){a.label!==void 0&&n.has(a.label)?(o!==""&&r.push({label:void 0,source:o}),r.push({label:a.label,source:bo(a)}),o=""):(G(a)&&(o+=st(a)),a.subs.forEach(i))}return s(i,"visit"),i(t),o!==""&&r.push({label:void 0,source:o}),r}function yo(t,e=0){let n=" ".repeat(e);if(t===void 0)return"UNDEFINED NODE";let r;t.subs===void 0?r="UNDEFINED SUBS":r=t.subs.map(a=>yo(a,e+2)).join(`,
`),r===""?r="[]":r=`[
${r}
      ${n}]`;let o=(j(t)||fe(t)?"   ":String(t.lineNumber).padStart(3," "))+`:  ${n}`,i=t.label===void 0?"":JSON.stringify(t.label);return j(t)||fe(t)?`${o}vnode(${t.indentation}, ${i}, ${r})`:x(t)?`${o}blank(${i??""})`:`${o}lnode(${t.indentation}, ${i}, ${JSON.stringify(t.sourceLine)}, ${r})`}function wo(t,e=""){let n=t.label===void 0?"":`, ${JSON.stringify(t.label)}`,r=!x(t)&&t.subs.length>0?`[
${t.subs.map(o=>wo(o,e+"  ")).join(`, 
`)}
${e}]`:"[]";switch(t.type){case"blank":return`${e}blankNode(${t.lineNumber}${n})`;case"top":return`topNode(${r}${n})`;case"virtual":return`${e}virtualNode(${t.indentation}, ${r}${n})`;case"line":return`${e}lineNode(${t.indentation}, ${t.lineNumber}, "${t.sourceLine}", ${r}${n})`}}function vo(t){if(G(t)||x(t))return t.lineNumber;for(let e of t.subs){let n=vo(e);if(n!==void 0)return n}}function Eo(t){let e,n=t.subs.length-1;for(;n>=0&&e===void 0;)e=Eo(t.subs[n]),n--;return e===void 0&&!j(t)&&!fe(t)?t.lineNumber:e}var So=E(()=>{"use strict";ke();De();s(st,"deparseLine");s(bo,"deparseTree");s(Qs,"deparseAndCutTree");s(yo,"describeTree");s(wo,"encodeTree");s(vo,"firstLineOf");s(Eo,"lastLineOf")});var at=E(()=>{"use strict";po();go();Ue();ke();So();De();Ue();Mt("markdown",ho);Mt("java",fo)});function ze(t,e=To){let n=ee(t,r=>r?1:void 0);return M(n,r=>{if(x(r))return;let o=r.subs.reduce((i,a)=>Math.max(i,a.label??0),0);r.label=Math.max(r.label??0,o*e.worthUp)},"bottomUp"),M(n,r=>{if(x(r))return;let o=r.subs.map(l=>l.label??0),i=[...o];for(let l=0;l<o.length;l++)o[l]!==0&&(i=i.map((u,c)=>Math.max(u,Math.pow(e.worthSibling,Math.abs(l-c))*o[l])));let a=r.label;a!==void 0&&(i=i.map(l=>Math.max(l,e.worthDown*a))),r.subs.forEach((l,u)=>l.label=i[u])},"topDown"),xo(n)}function xo(t){let e=rt(t,[],(n,r)=>((n.type==="line"||n.type==="blank")&&r.push(n.type==="line"?[st(n).trimEnd(),n.label??0]:["",n.label??0]),r),"topDown");return new lt(e)}var To,It=E(()=>{"use strict";$n();at();To={worthUp:.9,worthSibling:.88,worthDown:.8};s(ze,"fromTreeWithFocussedLines");s(xo,"fromTreeWithValuedLines")});function Gn(t,e=!0,n=!0){let r=typeof t=="string"?pe(t):pe(t.source,t.languageId);te(r);let o=ee(r,i=>e&&i!=="closer");return M(o,i=>{i.label===void 0&&(i.label=e&&i.label!==!1)},"topDown"),e&&M(o,i=>{if(i.label){let a=!1;for(let l of[...i.subs].reverse())l.label&&!a?a=!0:l.label=!1}else for(let a of i.subs)a.label=!1;i.subs.length>0&&(i.label=!1)},"topDown"),n&&M(o,i=>{i.label||=(G(i)||x(i))&&i.lineNumber==0},"topDown"),ze(o)}var Kn=E(()=>{"use strict";It();at();s(Gn,"elidableTextForSourceCode")});var he,Lt=E(()=>{"use strict";he=class extends Error{constructor(n,r){super(n,{cause:r});this.code="CopilotPromptLoadFailure"}static{s(this,"CopilotPromptLoadFailure")}}});var ko=k(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});re.bytePairEncode=re.BinaryMap=re.binaryMapKey=void 0;var ea=s((t,e,n)=>{let r=n-e,o=16777215>>>Math.max(0,(3-r)*8),i=(t[e+0]|t[e+1]<<8|t[e+2]<<16)&o,a=16777215>>>Math.min(31,Math.max(0,(6-r)*8)),l=(t[e+3]|t[e+4]<<8|t[e+5]<<16)&a;return i+16777216*l},"binaryMapKey");re.binaryMapKey=ea;var Jn=class t{static{s(this,"BinaryMap")}constructor(){this.nested=new Map,this.final=new Map}get(e,n=0,r=e.length){let o=r<6+n,i=(0,re.binaryMapKey)(e,n,r);return o?this.final.get(i):this.nested.get(i)?.get(e,6+n,r)}set(e,n){let r=(0,re.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(r,n);return}let i=this.nested.get(r);if(i instanceof t)i.set(e.subarray(6),n);else{let a=new t;a.set(e.subarray(6),n),this.nested.set(r,a)}}};re.BinaryMap=Jn;var ne=new Int32Array(128),B=new Int32Array(128);function ta(t,e,n){if(n===1)return[e.get(t)];let r=2147483647,o=-1;for(;ne.length<n*2;)B=new Int32Array(B.length*2),ne=new Int32Array(ne.length*2);for(let u=0;u<n-1;u++){let c=e.get(t,u,u+2)??2147483647;c<r&&(r=c,o=u),B[u]=u,ne[u]=c}B[n-1]=n-1,ne[n-1]=2147483647,B[n]=n,ne[n]=2147483647;let i=n+1;function a(u,c=0){if(u+c+2<i){let d=e.get(t,B[u],B[u+c+2]);if(d!==void 0)return d}return 2147483647}for(s(a,"getRank");r!==2147483647;){ne[B[o]]=a(o,1),o>0&&(ne[B[o-1]]=a(o-1,1));for(let u=o+1;u<i-1;u++)B[u]=B[u+1];i--,o=-1,r=2147483647;for(let u=0;u<i-1;u++){let c=ne[B[u]];ne[B[u]]<r&&(r=c,o=u)}}let l=[];for(let u=0;u<i-1;u++)l.push(e.get(t,B[u],B[u+1]));return l}s(ta,"bytePairEncode");re.bytePairEncode=ta});var Mo=k(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.makeTextEncoder=void 0;var Xn=class{static{s(this,"UniversalTextEncoder")}constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let n=this.encoder.encode(e);return this.length=n.length,n}},Yn=class{static{s(this,"NodeTextEncoder")}constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}},na=s(()=>typeof Buffer<"u"?new Yn:new Xn,"makeTextEncoder");Pt.makeTextEncoder=na});var Io=k(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.LRUCache=void 0;var Qn=class{static{s(this,"LRUCache")}constructor(e){this.size=e,this.nodes=new Map}get(e){let n=this.nodes.get(e);if(n)return this.moveToHead(n),n.value}set(e,n){let r=this.nodes.get(e);if(r)r.value=n,this.moveToHead(r);else{let o=new er(e,n);this.nodes.set(e,o),this.addNode(o),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),e.next=void 0,e.prev=void 0,this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};Nt.LRUCache=Qn;var er=class{static{s(this,"Node")}constructor(e,n){this.key=e,this.value=n}}});var nr=k(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.TikTokenizer=void 0;var ra=require("fs"),oa=require("util"),Ct=ko(),ia=Mo(),sa=Io();function aa(t){let e=new Map;try{let r=ra.readFileSync(t,"utf-8");return n(r),e}catch(r){throw new Error(`Failed to load from BPE encoder file stream: ${r}`)}function n(r){for(let o of r.split(/[\r\n]+/)){if(o.trim()==="")continue;let i=o.split(" ");if(i.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let a=new Uint8Array(Buffer.from(i[0],"base64")),l=parseInt(i[1]);if(!isNaN(l))e.set(a,l);else throw new Error(`Can't parse ${i[1]} to integer`)}}s(n,"processBpeRanks")}s(aa,"loadTikTokenBpe");function la(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(la,"escapeRegExp");var tr=class{static{s(this,"TikTokenizer")}constructor(e,n,r,o=8192){this.textEncoder=(0,ia.makeTextEncoder)(),this.textDecoder=new oa.TextDecoder("utf-8"),this.cache=new sa.LRUCache(o);let i=typeof e=="string"?aa(e):e;this.init(i,n,r)}init(e,n,r){this.encoder=new Ct.BinaryMap;for(let[o,i]of e)this.encoder.set(o,i);this.regex=new RegExp(r,"gu"),this.specialTokensRegex=new RegExp(Array.from(n.keys()).map(o=>la(o)).join("|")),this.specialTokensEncoder=n,this.decoder=new Map;for(let[o,i]of e)this.decoder.set(i,o);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[o,i]of n)this.specialTokensDecoder.set(i,o)}findNextSpecialToken(e,n,r){let o=n,i=null;if(r&&this.specialTokensRegex)for(;i=e.slice(o).match(this.specialTokensRegex),!(!i||r&&r.includes(i[0]));)o+=i.index+1;let a=i?o+i.index:e.length;return[i,a]}encode(e,n){let r=[],o=0;for(;;){let i,a;if([i,a]=this.findNextSpecialToken(e,o,n),a>o&&this.encodeByIndex(e,r,o,a),i){if(o=o+this.encodeSpecialToken(r,i),o>=e.length)break}else break}return r}encodeSpecialToken(e,n){let r=this.specialTokensEncoder?.get(n[0]);return e.push(r),n.index+n[0].length}encodeByIndex(e,n,r,o){let i,a=e.substring(r,o);for(this.regex.lastIndex=0;i=this.regex.exec(a);){let l=this.cache.get(i[0]);if(l)for(let u of l)n.push(u);else{let u=this.textEncoder.encode(i[0]),c=this.encoder.get(u,0,this.textEncoder.length);if(c!==void 0)n.push(c),this.cache.set(i[0],[c]);else{let d=(0,Ct.bytePairEncode)(u,this.encoder,this.textEncoder.length);for(let _ of d)n.push(_);this.cache.set(i[0],d)}}}}encodeTrimSuffixByIndex(e,n,r,o,i,a,l){let u,c=e.substring(r,o);for(this.regex.lastIndex=0;u=this.regex.exec(c);){let d=u[0],_=this.cache.get(d);if(_)if(a+_.length<=i)a+=_.length,l+=d.length,n.push(..._);else{let m=i-a;a+=m,l+=d.length,n.push(..._.slice(0,m));break}else{let m=this.textEncoder.encode(d),f=this.encoder.get(m,0,m.length);if(f!==void 0)if(this.cache.set(d,[f]),a+1<=i)a++,l+=d.length,n.push(f);else break;else{let h=(0,Ct.bytePairEncode)(m,this.encoder,this.textEncoder.length);if(this.cache.set(d,h),a+h.length<=i){a+=h.length,l+=d.length;for(let p of h)n.push(p)}else{let p=i-a;a+=p,l+=d.length;for(let g=0;g<p;g++)n.push(h[g]);break}}}if(a>=i)break}return{tokenCount:a,encodeLength:l}}encodeTrimSuffix(e,n,r){let o=[],i=0,a=0,l=0;for(;;){let c,d;if([c,d]=this.findNextSpecialToken(e,i,r),d>i){let{tokenCount:_,encodeLength:m}=this.encodeTrimSuffixByIndex(e,o,i,d,n,a,l);if(a=_,l=m,a>=n)break}if(c!==null){if(a++,a<=n&&(i=i+this.encodeSpecialToken(o,c),l+=c[0].length,i>=e.length)||a>=n)break}else break}let u=l===e.length?e:e.slice(0,l);return{tokenIds:o,text:u}}encodeTrimPrefix(e,n,r){let o=[],i=0,a=0,l=0,u=new Map;for(u.set(a,l);;){let m,f;if([m,f]=this.findNextSpecialToken(e,i,r),f>i){let h,p=e.substring(i,f);for(this.regex.lastIndex=0;h=this.regex.exec(p);){let g=h[0],y=this.cache.get(g);if(y)a+=y.length,l+=g.length,o.push(...y),u.set(a,l);else{let b=this.textEncoder.encode(g),S=this.encoder.get(b);if(S!==void 0)this.cache.set(g,[S]),a++,l+=g.length,o.push(S),u.set(a,l);else{let v=(0,Ct.bytePairEncode)(b,this.encoder,this.textEncoder.length);this.cache.set(g,v),a+=v.length,l+=g.length;for(let I of v)o.push(I);u.set(a,l)}}}}if(m!==null){if(i=i+this.encodeSpecialToken(o,m),a++,l+=m[0].length,u.set(a,l),i>=e.length)break}else break}if(a<=n)return{tokenIds:o,text:e};let c=a-n,d=0,_=0;for(let[m,f]of u)if(m>=c){d=m,_=f;break}if(d>n){let m=this.encode(e,r),f=m.slice(m.length-n);return{tokenIds:f,text:this.decode(f)}}return{tokenIds:o.slice(d),text:e.slice(_)}}decode(e){let n=[];for(let r of e){let o=[],i=this.decoder?.get(r);if(i!==void 0)o=Array.from(i);else{let a=this.specialTokensDecoder?.get(r);if(a!==void 0){let l=this.textEncoder.encode(a);o=Array.from(l.subarray(0,this.textEncoder.length))}}n.push(...o)}return this.textDecoder.decode(new Uint8Array(n))}};At.TikTokenizer=tr});var Bo=k(P=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});P.createTokenizer=P.createByEncoderName=P.createByModelName=P.getRegexByModel=P.getRegexByEncoder=P.getSpecialTokensByModel=P.getSpecialTokensByEncoder=P.MODEL_TO_ENCODING=void 0;var Ot=require("fs"),rr=require("path"),ua=nr(),ca=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);P.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var Ft="<|endoftext|>",Lo="<|fim_prefix|>",Po="<|fim_middle|>",No="<|fim_suffix|>",Co="<|endofprompt|>",ut="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",Ao="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",da=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],Fo=da.join("|");function or(t){let e="";if(P.MODEL_TO_ENCODING.has(t))e=P.MODEL_TO_ENCODING.get(t);else for(let[n,r]of ca)if(t.startsWith(n)){e=r;break}return e}s(or,"getEncoderFromModelName");async function _a(t,e){let n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${n.status}`);let r=await n.text();Ot.writeFileSync(e,r)}s(_a,"fetchAndSaveFile");function ir(t){let e=new Map([[Ft,50256]]);switch(t){case"o200k_base":e=new Map([[Ft,199999],[Co,200018]]);break;case"cl100k_base":e=new Map([[Ft,100257],[Lo,100258],[Po,100259],[No,100260],[Co,100276]]);break;case"p50k_edit":e=new Map([[Ft,50256],[Lo,50281],[Po,50282],[No,50283]]);break;default:break}return e}s(ir,"getSpecialTokensByEncoder");P.getSpecialTokensByEncoder=ir;function ma(t){let e=or(t);return ir(e)}s(ma,"getSpecialTokensByModel");P.getSpecialTokensByModel=ma;function Oo(t){switch(t){case"o200k_base":return Fo;case"cl100k_base":return Ao;default:break}return ut}s(Oo,"getRegexByEncoder");P.getRegexByEncoder=Oo;function fa(t){let e=or(t);return Oo(e)}s(fa,"getRegexByModel");P.getRegexByModel=fa;async function pa(t,e=null){return Ro(or(t),e)}s(pa,"createByModelName");P.createByModelName=pa;async function Ro(t,e=null){let n,r,o=ir(t);switch(t){case"o200k_base":n=Fo,r="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":n=Ao,r="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":n=ut,r="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":n=ut,r="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":n=ut,r="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":n=ut,r="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(o=new Map([...o,...e]));let i=rr.basename(r),a=rr.resolve(__dirname,"..","model");Ot.existsSync(a)||Ot.mkdirSync(a,{recursive:!0});let l=rr.resolve(a,i);return Ot.existsSync(l)||(console.log(`Downloading file from ${r}`),await _a(r,l),console.log(`Saved file to ${l}`)),Do(l,o,n)}s(Ro,"createByEncoderName");P.createByEncoderName=Ro;function Do(t,e,n,r=8192){return new ua.TikTokenizer(t,e,n,r)}s(Do,"createTokenizer");P.createTokenizer=Do});var Wo=k(N=>{"use strict";Object.defineProperty(N,"__esModule",{value:!0});N.createTokenizer=N.createByEncoderName=N.createByModelName=N.getSpecialTokensByModel=N.getSpecialTokensByEncoder=N.getRegexByModel=N.getRegexByEncoder=N.MODEL_TO_ENCODING=N.TikTokenizer=void 0;var ha=nr();Object.defineProperty(N,"TikTokenizer",{enumerable:!0,get:s(function(){return ha.TikTokenizer},"get")});var ge=Bo();Object.defineProperty(N,"MODEL_TO_ENCODING",{enumerable:!0,get:s(function(){return ge.MODEL_TO_ENCODING},"get")});Object.defineProperty(N,"getRegexByEncoder",{enumerable:!0,get:s(function(){return ge.getRegexByEncoder},"get")});Object.defineProperty(N,"getRegexByModel",{enumerable:!0,get:s(function(){return ge.getRegexByModel},"get")});Object.defineProperty(N,"getSpecialTokensByEncoder",{enumerable:!0,get:s(function(){return ge.getSpecialTokensByEncoder},"get")});Object.defineProperty(N,"getSpecialTokensByModel",{enumerable:!0,get:s(function(){return ge.getSpecialTokensByModel},"get")});Object.defineProperty(N,"createByModelName",{enumerable:!0,get:s(function(){return ge.createByModelName},"get")});Object.defineProperty(N,"createByEncoderName",{enumerable:!0,get:s(function(){return ge.createByEncoderName},"get")});Object.defineProperty(N,"createTokenizer",{enumerable:!0,get:s(function(){return ge.createTokenizer},"get")})});function K(t="cl100k_base"){let e=Uo.get(t);return e!==void 0||(t==="mock"?e=new sr:e=new Rt(t),Uo.set(t,e)),e}function ga(t){if(!t.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let e=(0,zo.readFileSync)(t,"utf-8"),n=new Map;for(let r of e.split(`
`)){if(!r)continue;let o=Buffer.from(r,"base64");n.set(o,n.size)}return n}var je,zo,jo,Dt,Uo,Rt,sr,Ho=E(()=>{"use strict";Lt();je=Je(Wo()),zo=require("fs"),jo=require("path"),Dt=(r=>(r.cl100k="cl100k_base",r.o200k="o200k_base",r.mock="mock",r))(Dt||{}),Uo=new Map;s(K,"getTokenizer");s(ga,"parseTikTokenNoIndex");Rt=class{static{s(this,"TTokenizer")}constructor(e){try{this._tokenizer=(0,je.createTokenizer)(ga((0,jo.join)(__dirname,`./resources/${e}.tiktoken.noindex`)),(0,je.getSpecialTokensByEncoder)(e),(0,je.getRegexByEncoder)(e),32768)}catch(n){throw n instanceof Error?new he("Could not load tokenizer",n):n}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(r=>this.detokenize([r]))}takeLastTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=4,o=1,i=Math.min(e.length,n*r),a=e.slice(-i),l=this.tokenize(a);for(;l.length<n+2&&i<e.length;)i=Math.min(e.length,i+n*o),a=e.slice(-i),l=this.tokenize(a);return l.length<n?{text:e,tokens:l}:(l=l.slice(-n),{text:this.detokenize(l),tokens:l})}takeFirstTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=4,o=1,i=Math.min(e.length,n*r),a=e.slice(0,i),l=this.tokenize(a);for(;l.length<n+2&&i<e.length;)i=Math.min(e.length,i+n*o),a=e.slice(0,i),l=this.tokenize(a);return l.length<n?{text:e,tokens:l}:(l=l.slice(0,n),{text:this.detokenize(l),tokens:l})}takeLastLinesTokens(e,n){let{text:r}=this.takeLastTokens(e,n);if(r.length===e.length||e[e.length-r.length-1]===`
`)return r;let o=r.indexOf(`
`);return r.substring(o+1)}},sr=class{constructor(){this.hash=s(e=>{let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);n=(n<<5)-n+o,n&=n&65535}return n},"hash")}static{s(this,"MockTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(n=>n.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,n){let r=this.tokenizeStrings(e).slice(-n);return{text:r.join(""),tokens:r.map(this.hash)}}takeFirstTokens(e,n){let r=this.tokenizeStrings(e).slice(0,n);return{text:r.join(""),tokens:r.map(this.hash)}}takeLastLinesTokens(e,n){let{text:r}=this.takeLastTokens(e,n);if(r.length===e.length||e[e.length-r.length-1]===`
`)return r;let o=r.indexOf(`
`);return r.substring(o+1)}}});var He=E(()=>{"use strict";Ho()});var Ve,ar=E(()=>{"use strict";He();Ve=class t{constructor(e,n,r=K().tokenLength(e+`
`),o="strict"){this.text=e;this._value=n;this._cost=r;if(e.includes(`
`)&&o!=="none")throw new Error("LineWithValueAndCost: text contains newline");if(n<0&&o!=="none")throw new Error("LineWithValueAndCost: value is negative");if(r<0&&o!=="none")throw new Error("LineWithValueAndCost: cost is negative");if(o=="strict"&&n>1)throw new Error("Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error")}static{s(this,"LineWithValueAndCost")}get value(){return this._value}get cost(){return this._cost}adjustValue(e){return this._value*=e,this}recost(e=n=>K().tokenLength(n+`
`)){return this._cost=e(this.text),this}copy(){return new t(this.text,this.value,this.cost,"none")}}});function ba(t,e,n,r,o,i){if(i.tokenLength(n+`
`)>e)throw new Error("maxTokens must be larger than the ellipsis length");o==="removeLeastBangForBuck"&&t.forEach(_=>_.adjustValue(1/_.cost));let a=t.reduce((_,m)=>Math.max(_,m.value),0)+1,l=t.reduce((_,m)=>Math.max(_,m.text.length),0)+1,u=n.trim(),c=t.reduce((_,m)=>_+m.cost,0),d=t.length+1;for(;c>e&&d-->=-1;){let _=t.reduce((b,S)=>S.value<b.value?S:b),m=t.indexOf(_),f=t.slice(0,m+1).reverse().find(b=>b.text.trim()!=="")??{text:""},h=r?Math.min(f.text.match(/^\s*/)?.[0].length??0,t[m-1]?.text.trim()===u?t[m-1]?.text.match(/^\s*/)?.[0].length??0:l,t[m+1]?.text.trim()===u?t[m+1]?.text.match(/^\s*/)?.[0].length??0:l):0,p=" ".repeat(h)+n,g=new Ve(p,a,i.tokenLength(p+`
`),"loose");t.splice(m,1,g),t[m+1]?.text.trim()===u&&t.splice(m+1,1),t[m-1]?.text.trim()===u&&t.splice(m-1,1);let y=t.reduce((b,S)=>b+S.cost,0);y>=c&&t.every(b=>b.value===a)&&(r=!1),c=y}if(d<0)throw new Error("Infinite loop in ElidableText.makePrompt: Defensive counter < 0 in ElidableText.makePrompt with end text");return t.map(_=>_.text).join(`
`)}var lt,$n=E(()=>{"use strict";Kn();ar();He();lt=class t{constructor(e){this.lines=[];let n=[];for(let r of e){let o=Array.isArray(r)?r[1]:1,i=Array.isArray(r)?r[0]:r;typeof i=="string"?i.split(`
`).forEach(a=>n.push(new Ve(a,o))):i instanceof t?i.lines.forEach(a=>n.push(a.copy().adjustValue(o))):"source"in i&&"languageId"in i&&Gn(i).lines.forEach(a=>n.push(a.copy().adjustValue(o)))}this.lines=n}static{s(this,"ElidableText")}adjust(e){this.lines.forEach(n=>n.adjustValue(e))}recost(e=n=>K().tokenLength(n+`
`)){this.lines.forEach(n=>n.recost(e))}makePrompt(e,n="[...]",r=!0,o="removeLeastDesirable",i=K()){let a=this.lines.map(l=>l.copy());return ba(a,e,n,r,o,i)}};s(ba,"makePrompt")});function J(){}function Vo(t,e,n,r,o){for(var i=[],a;e;)i.push(e),a=e.previousComponent,delete e.previousComponent,e=a;i.reverse();for(var l=0,u=i.length,c=0,d=0;l<u;l++){var _=i[l];if(_.removed)_.value=t.join(r.slice(d,d+_.count)),d+=_.count;else{if(!_.added&&o){var m=n.slice(c,c+_.count);m=m.map(function(f,h){var p=r[d+h];return p.length>f.length?p:f}),_.value=t.join(m)}else _.value=t.join(n.slice(c,c+_.count));c+=_.count,_.added||(d+=_.count)}}return i}function qo(t,e){var n;for(n=0;n<t.length&&n<e.length;n++)if(t[n]!=e[n])return t.slice(0,n);return t.slice(0,n)}function Zo(t,e){var n;if(!t||!e||t[t.length-1]!=e[e.length-1])return"";for(n=0;n<t.length&&n<e.length;n++)if(t[t.length-(n+1)]!=e[e.length-(n+1)])return t.slice(-n);return t.slice(-n)}function ur(t,e,n){if(t.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return n+t.slice(e.length)}function cr(t,e,n){if(!e)return t+n;if(t.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return t.slice(0,-e.length)+n}function ct(t,e){return ur(t,e,"")}function Bt(t,e){return cr(t,e,"")}function $o(t,e){return e.slice(0,ya(t,e))}function ya(t,e){var n=0;t.length>e.length&&(n=t.length-e.length);var r=e.length;t.length<e.length&&(r=t.length);var o=Array(r),i=0;o[0]=0;for(var a=1;a<r;a++){for(e[a]==e[i]?o[a]=o[i]:o[a]=i;i>0&&e[a]!=e[i];)i=o[i];e[a]==e[i]&&i++}i=0;for(var l=n;l<t.length;l++){for(;i>0&&t[l]!=e[i];)i=o[i];t[l]==e[i]&&i++}return i}function Go(t,e,n,r){if(e&&n){var o=e.value.match(/^\s*/)[0],i=e.value.match(/\s*$/)[0],a=n.value.match(/^\s*/)[0],l=n.value.match(/\s*$/)[0];if(t){var u=qo(o,a);t.value=cr(t.value,a,u),e.value=ct(e.value,u),n.value=ct(n.value,u)}if(r){var c=Zo(i,l);r.value=ur(r.value,l,c),e.value=Bt(e.value,c),n.value=Bt(n.value,c)}}else if(n)t&&(n.value=n.value.replace(/^\s*/,"")),r&&(r.value=r.value.replace(/^\s*/,""));else if(t&&r){var d=r.value.match(/^\s*/)[0],_=e.value.match(/^\s*/)[0],m=e.value.match(/\s*$/)[0],f=qo(d,_);e.value=ct(e.value,f);var h=Zo(ct(d,f),m);e.value=Bt(e.value,h),r.value=ur(r.value,d,h),t.value=cr(t.value,d,d.slice(0,d.length-h.length))}else if(r){var p=r.value.match(/^\s*/)[0],g=e.value.match(/\s*$/)[0],y=$o(g,p);e.value=Bt(e.value,y)}else if(t){var b=t.value.match(/\s*$/)[0],S=e.value.match(/^\s*/)[0],v=$o(b,S);e.value=ct(e.value,v)}}function Ko(t,e,n){return zt.diff(t,e,n)}function Jo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Xo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jo(Object(n),!0).forEach(function(r){ka(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jo(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ta(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xa(t){var e=Ta(t,"string");return typeof e=="symbol"?e:e+""}function dr(t){"@babel/helpers - typeof";return dr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dr(t)}function ka(t,e,n){return e=xa(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lr(t){return Ma(t)||Ia(t)||La(t)||Pa()}function Ma(t){if(Array.isArray(t))return _r(t)}function Ia(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function La(t,e){if(t){if(typeof t=="string")return _r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _r(t,e)}}function _r(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Pa(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mr(t,e,n,r,o){e=e||[],n=n||[],r&&(t=r(o,t));var i;for(i=0;i<e.length;i+=1)if(e[i]===t)return n[i];var a;if(Object.prototype.toString.call(t)==="[object Array]"){for(e.push(t),a=new Array(t.length),n.push(a),i=0;i<t.length;i+=1)a[i]=mr(t[i],e,n,r,o);return e.pop(),n.pop(),a}if(t&&t.toJSON&&(t=t.toJSON()),dr(t)==="object"&&t!==null){e.push(t),a={},n.push(a);var l=[],u;for(u in t)Object.prototype.hasOwnProperty.call(t,u)&&l.push(u);for(l.sort(),i=0;i<l.length;i+=1)u=l[i],a[u]=mr(t[u],e,n,r,u);e.pop(),n.pop()}else a=t;return a}function Yo(t,e,n,r,o,i,a){if(a||(a={}),typeof a=="function"&&(a={callback:a}),typeof a.context>"u"&&(a.context=4),a.newlineIsToken)throw new Error("newlineIsToken may not be used with patch-generation functions, only with diffing functions");if(a.callback){var l=a,u=l.callback;Ko(n,r,Xo(Xo({},a),{},{callback:s(function(_){var m=c(_);u(m)},"callback")}))}else return c(Ko(n,r,a));function c(d){if(!d)return;d.push({value:"",lines:[]});function _(H){return H.map(function(W){return" "+W})}s(_,"contextLines");for(var m=[],f=0,h=0,p=[],g=1,y=1,b=s(function(){var W=d[S],D=W.lines||Na(W.value);if(W.lines=D,W.added||W.removed){var Le;if(!f){var V=d[S-1];f=g,h=y,V&&(p=a.context>0?_(V.lines.slice(-a.context)):[],f-=p.length,h-=p.length)}(Le=p).push.apply(Le,lr(D.map(function(Ne){return(W.added?"+":"-")+Ne}))),W.added?y+=D.length:g+=D.length}else{if(f)if(D.length<=a.context*2&&S<d.length-2){var se;(se=p).push.apply(se,lr(_(D)))}else{var Pe,Y=Math.min(D.length,a.context);(Pe=p).push.apply(Pe,lr(_(D.slice(0,Y))));var Ge={oldStart:f,oldLines:g-f+Y,newStart:h,newLines:y-h+Y,lines:p};m.push(Ge),f=0,h=0,p=[]}g+=D.length,y+=D.length}},"_loop"),S=0;S<d.length;S++)b();for(var v=0,I=m;v<I.length;v++)for(var O=I[v],A=0;A<O.lines.length;A++)O.lines[A].endsWith(`
`)?O.lines[A]=O.lines[A].slice(0,-1):(O.lines.splice(A+1,0,"\\ No newline at end of file"),A++);return{oldFileName:t,newFileName:e,oldHeader:o,newHeader:i,hunks:m}}s(c,"diffLinesResultToPatch")}function Na(t){var e=t.endsWith(`
`),n=t.split(`
`).map(function(r){return r+`
`});return e?n.pop():n.push(n.pop().slice(0,-1)),n}var Pc,Wt,wa,Ut,va,zt,Ea,Sa,dt,fr,Qo=E(()=>{s(J,"Diff");J.prototype={diff:s(function(e,n){var r,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=o.callback;typeof o=="function"&&(i=o,o={});var a=this;function l(v){return v=a.postProcess(v,o),i?(setTimeout(function(){i(v)},0),!0):v}s(l,"done"),e=this.castInput(e,o),n=this.castInput(n,o),e=this.removeEmpty(this.tokenize(e,o)),n=this.removeEmpty(this.tokenize(n,o));var u=n.length,c=e.length,d=1,_=u+c;o.maxEditLength!=null&&(_=Math.min(_,o.maxEditLength));var m=(r=o.timeout)!==null&&r!==void 0?r:1/0,f=Date.now()+m,h=[{oldPos:-1,lastComponent:void 0}],p=this.extractCommon(h[0],n,e,0,o);if(h[0].oldPos+1>=c&&p+1>=u)return l(Vo(a,h[0].lastComponent,n,e,a.useLongestToken));var g=-1/0,y=1/0;function b(){for(var v=Math.max(g,-d);v<=Math.min(y,d);v+=2){var I=void 0,O=h[v-1],A=h[v+1];O&&(h[v-1]=void 0);var H=!1;if(A){var W=A.oldPos-v;H=A&&0<=W&&W<u}var D=O&&O.oldPos+1<c;if(!H&&!D){h[v]=void 0;continue}if(!D||H&&O.oldPos<A.oldPos?I=a.addToPath(A,!0,!1,0,o):I=a.addToPath(O,!1,!0,1,o),p=a.extractCommon(I,n,e,v,o),I.oldPos+1>=c&&p+1>=u)return l(Vo(a,I.lastComponent,n,e,a.useLongestToken));h[v]=I,I.oldPos+1>=c&&(y=Math.min(y,v-1)),p+1>=u&&(g=Math.max(g,v+1))}d++}if(s(b,"execEditLength"),i)s(function v(){setTimeout(function(){if(d>_||Date.now()>f)return i();b()||v()},0)},"exec")();else for(;d<=_&&Date.now()<=f;){var S=b();if(S)return S}},"diff"),addToPath:s(function(e,n,r,o,i){var a=e.lastComponent;return a&&!i.oneChangePerToken&&a.added===n&&a.removed===r?{oldPos:e.oldPos+o,lastComponent:{count:a.count+1,added:n,removed:r,previousComponent:a.previousComponent}}:{oldPos:e.oldPos+o,lastComponent:{count:1,added:n,removed:r,previousComponent:a}}},"addToPath"),extractCommon:s(function(e,n,r,o,i){for(var a=n.length,l=r.length,u=e.oldPos,c=u-o,d=0;c+1<a&&u+1<l&&this.equals(r[u+1],n[c+1],i);)c++,u++,d++,i.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return d&&!i.oneChangePerToken&&(e.lastComponent={count:d,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=u,c},"extractCommon"),equals:s(function(e,n,r){return r.comparator?r.comparator(e,n):e===n||r.ignoreCase&&e.toLowerCase()===n.toLowerCase()},"equals"),removeEmpty:s(function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},"removeEmpty"),castInput:s(function(e){return e},"castInput"),tokenize:s(function(e){return Array.from(e)},"tokenize"),join:s(function(e){return e.join("")},"join"),postProcess:s(function(e){return e},"postProcess")};s(Vo,"buildValues");Pc=new J;s(qo,"longestCommonPrefix");s(Zo,"longestCommonSuffix");s(ur,"replacePrefix");s(cr,"replaceSuffix");s(ct,"removePrefix");s(Bt,"removeSuffix");s($o,"maximumOverlap");s(ya,"overlapCount");Wt="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",wa=new RegExp("[".concat(Wt,"]+|\\s+|[^").concat(Wt,"]"),"ug"),Ut=new J;Ut.equals=function(t,e,n){return n.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t.trim()===e.trim()};Ut.tokenize=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');n=Array.from(e.intlSegmenter.segment(t),function(i){return i.segment})}else n=t.match(wa)||[];var r=[],o=null;return n.forEach(function(i){/\s/.test(i)?o==null?r.push(i):r.push(r.pop()+i):/\s/.test(o)?r[r.length-1]==o?r.push(r.pop()+i):r.push(o+i):r.push(i),o=i}),r};Ut.join=function(t){return t.map(function(e,n){return n==0?e:e.replace(/^\s+/,"")}).join("")};Ut.postProcess=function(t,e){if(!t||e.oneChangePerToken)return t;var n=null,r=null,o=null;return t.forEach(function(i){i.added?r=i:i.removed?o=i:((r||o)&&Go(n,o,r,i),n=i,r=null,o=null)}),(r||o)&&Go(n,o,r,null),t};s(Go,"dedupeWhitespaceInChangeObjects");va=new J;va.tokenize=function(t){var e=new RegExp("(\\r?\\n)|[".concat(Wt,"]+|[^\\S\\n\\r]+|[^").concat(Wt,"]"),"ug");return t.match(e)||[]};zt=new J;zt.tokenize=function(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var n=[],r=t.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var o=0;o<r.length;o++){var i=r[o];o%2&&!e.newlineIsToken?n[n.length-1]+=i:n.push(i)}return n};zt.equals=function(t,e,n){return n.ignoreWhitespace?((!n.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!n.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):n.ignoreNewlineAtEof&&!n.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),J.prototype.equals.call(this,t,e,n)};s(Ko,"diffLines");Ea=new J;Ea.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};Sa=new J;Sa.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};s(Jo,"ownKeys");s(Xo,"_objectSpread2");s(Ta,"_toPrimitive");s(xa,"_toPropertyKey");s(dr,"_typeof");s(ka,"_defineProperty");s(lr,"_toConsumableArray");s(Ma,"_arrayWithoutHoles");s(Ia,"_iterableToArray");s(La,"_unsupportedIterableToArray");s(_r,"_arrayLikeToArray");s(Pa,"_nonIterableSpread");dt=new J;dt.useLongestToken=!0;dt.tokenize=zt.tokenize;dt.castInput=function(t,e){var n=e.undefinedReplacement,r=e.stringifyReplacer,o=r===void 0?function(i,a){return typeof a>"u"?n:a}:r;return typeof t=="string"?t:JSON.stringify(mr(t,null,null,o),o,"  ")};dt.equals=function(t,e,n){return J.prototype.equals.call(dt,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),n)};s(mr,"canonicalize");fr=new J;fr.tokenize=function(t){return t.slice()};fr.join=fr.removeEmpty=function(t){return t};s(Yo,"structuredPatch");s(Na,"splitLines")});function Aa(t,e){let n=typeof t=="string"?typeof e=="string"?void 0:e.languageId:typeof e=="string"||t.languageId===e.languageId?t.languageId:void 0;t=typeof t=="string"?t:t.source,e=typeof e=="string"?e:e.source;let r=Yo("","",t,e),o=new Set,i=new Set;for(let u of r.hunks){for(let c=u.oldStart;c<u.oldStart+u.oldLines;c++)o.add(c);for(let c=u.newStart;c<u.newStart+u.newLines;c++)i.add(c)}let a=ee(te(pe(t,n)),()=>!1),l=ee(te(pe(e,n)),()=>!1);return M(a,u=>{(u.type==="line"||u.type==="blank")&&o.has(u.lineNumber)&&(u.label=!0)},"topDown"),M(l,u=>{(u.type==="line"||u.type==="blank")&&i.has(u.lineNumber)&&(u.label=!0)},"topDown"),[ze(a),ze(l)]}var ei=E(()=>{"use strict";It();at();Qo();s(Aa,"elidableTextForDiff")});var ti=E(()=>{"use strict";$n();ei();It();Kn();ar()});function Ra({source:t}){return t.startsWith("#!")||t.startsWith("<!DOCTYPE")}function mt(t,e){let n=_t[e]?_t[e].lineComment:Fa;if(n){let r=n.end==""?"":" "+n.end;return`${n.start} ${t}${r}`}return""}function be(t,e){if(t==="")return"";let n=t.endsWith(`
`),o=(n?t.slice(0,-1):t).split(`
`).map(i=>mt(i,e)).join(`
`);return n?o+`
`:o}function oi(t){let{languageId:e}=t;return Oa.indexOf(e)===-1&&!Ra(t)?e in ri?ri[e]:mt(`Language: ${e}`,e):""}function ii(t){return t.relativePath?mt(`Path: ${t.relativePath}`,t.languageId):""}function X(t){return t===""||t.endsWith(`
`)?t:t+`
`}var _t,ni,Fa,Oa,ri,le=E(()=>{"use strict";_t={abap:{lineComment:{start:'"',end:""},markdownLanguageIds:["abap","sap-abap"]},aspdotnet:{lineComment:{start:"<%--",end:"--%>"}},bat:{lineComment:{start:"REM",end:""}},bibtex:{lineComment:{start:"%",end:""},markdownLanguageIds:["bibtex"]},blade:{lineComment:{start:"#",end:""}},BluespecSystemVerilog:{lineComment:{start:"//",end:""}},c:{lineComment:{start:"//",end:""},markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";",end:""},markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["coffeescript","coffee","cson","iced"]},cpp:{lineComment:{start:"//",end:""},markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"]},csharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["csharp","cs"]},css:{lineComment:{start:"/*",end:"*/"}},cuda:{lineComment:{start:"//",end:""}},dart:{lineComment:{start:"//",end:""}},dockerfile:{lineComment:{start:"#",end:""},markdownLanguageIds:["dockerfile","docker"]},dotenv:{lineComment:{start:"#",end:""}},elixir:{lineComment:{start:"#",end:""}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%",end:""},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"]},go:{lineComment:{start:"//",end:""},markdownLanguageIds:["go","golang"]},graphql:{lineComment:{start:"#",end:""}},groovy:{lineComment:{start:"//",end:""}},haml:{lineComment:{start:"-#",end:""}},handlebars:{lineComment:{start:"{{!",end:"}}"},markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"]},haskell:{lineComment:{start:"--",end:""},markdownLanguageIds:["haskell","hs"]},hlsl:{lineComment:{start:"//",end:""}},html:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["html","xhtml"]},ini:{lineComment:{start:";",end:""}},java:{lineComment:{start:"//",end:""},markdownLanguageIds:["java","jsp"]},javascript:{lineComment:{start:"//",end:""},markdownLanguageIds:["javascript","js"]},javascriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},jsonc:{lineComment:{start:"//",end:""}},jsx:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#",end:""},markdownLanguageIds:["julia","jl"]},kotlin:{lineComment:{start:"//",end:""},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%",end:""},markdownLanguageIds:["tex"]},legend:{lineComment:{start:"//",end:""}},less:{lineComment:{start:"//",end:""}},lua:{lineComment:{start:"--",end:""},markdownLanguageIds:["lua","pluto"]},makefile:{lineComment:{start:"#",end:""},markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"[]: #",end:""},markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec","mm","objc","obj-c"]},"objective-cpp":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#",end:""},markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//",end:""}},powershell:{lineComment:{start:"#",end:""},markdownLanguageIds:["powershell","ps","ps1"]},pug:{lineComment:{start:"//",end:""}},python:{lineComment:{start:"#",end:""},markdownLanguageIds:["python","py","gyp"]},ql:{lineComment:{start:"//",end:""}},r:{lineComment:{start:"#",end:""}},razor:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["cshtml","razor","razor-cshtml"]},ruby:{lineComment:{start:"#",end:""},markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"]},rust:{lineComment:{start:"//",end:""},markdownLanguageIds:["rust","rs"]},sass:{lineComment:{start:"//",end:""}},scala:{lineComment:{start:"//",end:""}},scss:{lineComment:{start:"//",end:""}},shellscript:{lineComment:{start:"#",end:""},markdownLanguageIds:["bash","sh","zsh"]},slang:{lineComment:{start:"//",end:""}},slim:{lineComment:{start:"/",end:""}},solidity:{lineComment:{start:"//",end:""},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--",end:""}},stylus:{lineComment:{start:"//",end:""}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//",end:""}},systemverilog:{lineComment:{start:"//",end:""}},terraform:{lineComment:{start:"#",end:""}},tex:{lineComment:{start:"%",end:""}},typescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["typescript","ts"]},typescriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["tsx"]},vb:{lineComment:{start:"'",end:""},markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//",end:""}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//",end:""}},xml:{lineComment:{start:"<!--",end:"-->"}},xsl:{lineComment:{start:"<!--",end:"-->"}},yaml:{lineComment:{start:"#",end:""},markdownLanguageIds:["yaml","yml"]}},ni={};for(let[t,e]of Object.entries(_t))if(e.markdownLanguageIds)for(let n of e.markdownLanguageIds)ni[n]=t;else ni[t]=t;Fa={start:"//",end:""},Oa=["php","plaintext"],ri={html:"<!DOCTYPE html>",python:"#!/usr/bin/env python3",ruby:"#!/usr/bin/env ruby",shellscript:"#!/bin/sh",yaml:"# YAML data"};s(Ra,"hasLanguageMarker");s(mt,"comment");s(be,"commentBlockAsSingles");s(oi,"getLanguageMarker");s(ii,"getPathMarker");s(X,"newLineEnded")});function Ba(t){return{...Da,...t}}function Me(t,e={}){let n=Ba(e),r=K(n.tokenizerName);if(n.maxLineCount!==void 0&&n.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(n.maxTokenLength!==void 0&&n.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(n.maxLineCount===0||n.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:n.tokenizerName};let o=t.source.slice(0,t.offset);return n.maxLineCount!==void 0&&(o=o.split(`
`).slice(-n.maxLineCount).join(`
`)),n.maxTokenLength!==void 0&&(o=r.takeLastLinesTokens(o,n.maxTokenLength)),{context:o,lineCount:o.split(`
`).length,tokenLength:r.tokenLength(o),tokenizerName:n.tokenizerName}}var Da,jt=E(()=>{"use strict";He();Da={tokenizerName:"cl100k_base"};s(Ba,"cursorContextOptions");s(Me,"getCursorContext")});function Wa(t){return t.split(/[^a-zA-Z0-9]/).filter(e=>e.length>0)}var pr,hr,si,qe,Ua,za,ja,Ht=E(()=>{"use strict";ce();pr=class{constructor(e){this.keys=[];this.cache={};this.size=e}static{s(this,"FifoCache")}put(e,n){if(this.cache[e]=n,this.keys.length>this.size){this.keys.push(e);let r=this.keys.shift()??"";delete this.cache[r]}}get(e){return this.cache[e]}},hr=class{static{s(this,"Tokenizer")}constructor(e){this.stopsForLanguage=ja.get(e.languageId)??za}tokenize(e){return new Set(Wa(e).filter(n=>!this.stopsForLanguage.has(n)))}},si=new pr(20),qe=class{static{s(this,"WindowedMatcher")}constructor(e){this.referenceDoc=e,this.tokenizer=new hr(e)}get referenceTokens(){return this.createReferenceTokens()}async createReferenceTokens(){return this.referenceTokensCache??=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(e,n="descending"){return n=="ascending"?e.sort((r,o)=>r.score>o.score?1:-1):n=="descending"?e.sort((r,o)=>r.score>o.score?-1:1):e}async retrieveAllSnippets(e,n="descending"){let r=[];if(e.source.length===0||(await this.referenceTokens).size===0)return r;let o=e.source.split(`
`),i=this.id()+":"+e.source,a=si.get(i)??[],l=a.length==0,u=l?o.map(c=>this.tokenizer.tokenize(c),this.tokenizer):[];for(let[c,[d,_]]of this.getWindowsDelineations(o).entries()){if(l){let h=new Set;u.slice(d,_).forEach(p=>p.forEach(g=>h.add(g),h)),a.push(h)}let m=a[c],f=this.similarityScore(m,await this.referenceTokens);if(r.length&&d>0&&r[r.length-1].endLine>d){r[r.length-1].score<f&&(r[r.length-1].score=f,r[r.length-1].startLine=d,r[r.length-1].endLine=_);continue}r.push({score:f,startLine:d,endLine:_})}return l&&si.put(i,a),this.sortScoredSnippets(r,n)}findMatches(e,n){return this.findBestMatch(e,n)}async findBestMatch(e,n){if(e.source.length===0||(await this.referenceTokens).size===0)return[];let r=e.source.split(`
`),o=await this.retrieveAllSnippets(e,"descending");if(o.length===0)return[];let i=[];for(let a=0;a<o.length&&a<n;a++)if(o[a].score!==0){let l=r.slice(o[a].startLine,o[a].endLine).join(`
`);i.push({snippet:l,semantics:"snippet",provider:"similar-files",...o[a]})}return i}};s(Wa,"splitIntoWords");Ua=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),za=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...Ua]),ja=new Map([])});function Vt(t,e){let n=[],r=e.length;if(r==0)return[];if(r<t)return[[0,r]];for(let o=0;o<r-t+1;o++)n.push([o,o+t]);return n}var gr=E(()=>{"use strict";De();Ue();s(Vt,"getBasicWindowDelineations")});function Ha(t,e){let n=new Set;return t.forEach(r=>{e.has(r)&&n.add(r)}),n.size/(t.size+e.size-n.size)}var qt,ai=E(()=>{"use strict";jt();Ht();gr();qt=class t extends qe{static{s(this,"FixedWindowSizeJaccardMatcher")}constructor(e,n){super(e),this.windowLength=n}static{this.FACTORY=s(e=>({to:s(n=>new t(n,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return Vt(this.windowLength,e)}_getCursorContextInfo(e){return Me(e,{maxLineCount:this.windowLength})}similarityScore(e,n){return Ha(e,n)}};s(Ha,"computeScore")});var li=k((exports,module)=>{var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{static{s(this,"Parser")}constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=s((t,e)=>{throw e},"quit_"),ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}s(locateFile,"locateFile");function logExceptionOnExit(t){t instanceof ExitStatus||err("exiting due to exception: "+t)}if(s(logExceptionOnExit,"logExceptionOnExit"),ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=s((t,e)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFileSync(t,e?void 0:"utf8")),"read_"),readBinary=s(t=>{var e=read_(t,!0);return e.buffer||(e=new Uint8Array(e)),e},"readBinary"),readAsync=s((t,e,n)=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFile(t,function(r,o){r?n(r):e(o.buffer)})},"readAsync"),process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=s((t,e)=>{if(keepRuntimeAlive())throw process.exitCode=t,e;logExceptionOnExit(e),process.exit(t)},"quit_"),Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},"read_"),ENVIRONMENT_IS_WORKER&&(readBinary=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)},"readBinary")),readAsync=s((t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{r.status==200||r.status==0&&r.response?e(r.response):n()},r.onerror=n,r.send(null)},"readAsync"),setWindowTitle=s(t=>document.title=t,"setWindowTitle"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(t,e,n){for(var r=e+n,o=e;t[o]&&!(o>=r);)++o;if(o-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,o));for(var i="";e<o;){var a=t[e++];if(128&a){var l=63&t[e++];if((224&a)!=192){var u=63&t[e++];if((a=(240&a)==224?(15&a)<<12|l<<6|u:(7&a)<<18|l<<12|u<<6|63&t[e++])<65536)i+=String.fromCharCode(a);else{var c=a-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&a)<<6|l)}else i+=String.fromCharCode(a)}return i}s(UTF8ArrayToString,"UTF8ArrayToString");function UTF8ToString(t,e){return t?UTF8ArrayToString(HEAPU8,t,e):""}s(UTF8ToString,"UTF8ToString");function stringToUTF8Array(t,e,n,r){if(!(r>0))return 0;for(var o=n,i=n+r-1,a=0;a<t.length;++a){var l=t.charCodeAt(a);if(l>=55296&&l<=57343&&(l=65536+((1023&l)<<10)|1023&t.charCodeAt(++a)),l<=127){if(n>=i)break;e[n++]=l}else if(l<=2047){if(n+1>=i)break;e[n++]=192|l>>6,e[n++]=128|63&l}else if(l<=65535){if(n+2>=i)break;e[n++]=224|l>>12,e[n++]=128|l>>6&63,e[n++]=128|63&l}else{if(n+3>=i)break;e[n++]=240|l>>18,e[n++]=128|l>>12&63,e[n++]=128|l>>6&63,e[n++]=128|63&l}}return e[n]=0,n-o}s(stringToUTF8Array,"stringToUTF8Array");function stringToUTF8(t,e,n){return stringToUTF8Array(t,HEAPU8,e,n)}s(stringToUTF8,"stringToUTF8");function lengthBytesUTF8(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);r<=127?e++:r<=2047?e+=2:r>=55296&&r<=57343?(e+=4,++n):e+=3}return e}s(lengthBytesUTF8,"lengthBytesUTF8");function updateGlobalBufferAndViews(t){buffer=t,Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}s(updateGlobalBufferAndViews,"updateGlobalBufferAndViews");var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}s(keepRuntimeAlive,"keepRuntimeAlive");function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}s(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}s(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}s(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}s(postRun,"postRun");function addOnPreRun(t){__ATPRERUN__.unshift(t)}s(addOnPreRun,"addOnPreRun");function addOnInit(t){__ATINIT__.unshift(t)}s(addOnInit,"addOnInit");function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}s(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(t){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}s(addRunDependency,"addRunDependency");function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}s(removeRunDependency,"removeRunDependency");function abort(t){throw Module.onAbort&&Module.onAbort(t),err(t="Aborted("+t+")"),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}s(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(t){return t.startsWith(dataURIPrefix)}s(isDataURI,"isDataURI");function isFileURI(t){return t.startsWith("file://")}s(isFileURI,"isFileURI");function getBinary(t){try{if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}s(getBinary,"getBinary");function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return t.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(t,e){readAsync(wasmBinaryFile,function(n){t(new Uint8Array(n))},e)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}s(getBinaryPromise,"getBinaryPromise");function createWasm(){var t={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function e(o,i){var a=o.exports;a=relocateExports(a,1024);var l=getDylinkMetadata(i);l.neededDynlibs&&(dynamicLibraries=l.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(a,"main"),Module.asm=a,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}s(e,"t");function n(o){e(o.instance,o.module)}s(n,"r");function r(o){return getBinaryPromise().then(function(i){return WebAssembly.instantiate(i,t)}).then(function(i){return i}).then(o,function(i){err("failed to asynchronously prepare wasm: "+i),abort(i)})}if(s(r,"_"),addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(o){return err("Module.instantiateWasm callback failed with error: "+o),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?r(n):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(o){return WebAssembly.instantiateStreaming(o,t).then(n,function(i){return err("wasm streaming compile failed: "+i),err("falling back to ArrayBuffer instantiation"),r(n)})}),{}}s(createWasm,"createWasm"),wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}s(ExitStatus,"ExitStatus");var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:s(function(t,e){var n=GOT[e];return n||(n=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(e)||(n.required=!0),n},"get")};function callRuntimeCallbacks(t){for(;t.length>0;)t.shift()(Module)}s(callRuntimeCallbacks,"callRuntimeCallbacks");function getDylinkMetadata(t){var e=0,n=0;function r(){for(var y=0,b=1;;){var S=t[e++];if(y+=(127&S)*b,b*=128,!(128&S))break}return y}s(r,"_");function o(){var y=r();return UTF8ArrayToString(t,(e+=y)-y,y)}s(o,"n");function i(y,b){if(y)throw new Error(b)}s(i,"s");var a="dylink.0";if(t instanceof WebAssembly.Module){var l=WebAssembly.Module.customSections(t,a);l.length===0&&(a="dylink",l=WebAssembly.Module.customSections(t,a)),i(l.length===0,"need dylink section"),n=(t=new Uint8Array(l[0])).length}else{i(new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),i(t[8]!==0,"need the dylink section to be first"),e=9;var u=r();n=e+u,a=o()}var c={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(a=="dylink"){c.memorySize=r(),c.memoryAlign=r(),c.tableSize=r(),c.tableAlign=r();for(var d=r(),_=0;_<d;++_){var m=o();c.neededDynlibs.push(m)}}else for(i(a!=="dylink.0");e<n;){var f=t[e++],h=r();if(f===1)c.memorySize=r(),c.memoryAlign=r(),c.tableSize=r(),c.tableAlign=r();else if(f===2)for(d=r(),_=0;_<d;++_)m=o(),c.neededDynlibs.push(m);else if(f===3)for(var p=r();p--;){var g=o();256&r()&&c.tlsExports.add(g)}else if(f===4)for(p=r();p--;)o(),g=o(),(3&r())==1&&c.weakImports.add(g);else e+=h}return c}s(getDylinkMetadata,"getDylinkMetadata");function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return HEAP8[t>>0];case"i16":return HEAP16[t>>1];case"i32":case"i64":return HEAP32[t>>2];case"float":return HEAPF32[t>>2];case"double":return HEAPF64[t>>3];case"*":return HEAPU32[t>>2];default:abort("invalid type for getValue: "+e)}return null}s(getValue,"getValue");function asmjsMangle(t){return t.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(t)?t:"_"+t}s(asmjsMangle,"asmjsMangle");function mergeLibSymbols(t,e){for(var n in t)if(t.hasOwnProperty(n)){asmLibraryArg.hasOwnProperty(n)||(asmLibraryArg[n]=t[n]);var r=asmjsMangle(n);Module.hasOwnProperty(r)||(Module[r]=t[n]),n=="__main_argc_argv"&&(Module._main=t[n])}}s(mergeLibSymbols,"mergeLibSymbols");var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(t,e,n){var r=Module["dynCall_"+t];return n&&n.length?r.apply(null,[e].concat(n)):r.call(null,e)}s(dynCallLegacy,"dynCallLegacy");var wasmTableMirror=[];function getWasmTableEntry(t){var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e}s(getWasmTableEntry,"getWasmTableEntry");function dynCall(t,e,n){return t.includes("j")?dynCallLegacy(t,e,n):getWasmTableEntry(e).apply(null,n)}s(dynCall,"dynCall");function createInvokeFunction(t){return function(){var e=stackSave();try{return dynCall(t,arguments[0],Array.prototype.slice.call(arguments,1))}catch(n){if(stackRestore(e),n!==n+0)throw n;_setThrew(1,0)}}}s(createInvokeFunction,"createInvokeFunction");var ___heap_base=78144;function zeroMemory(t,e){return HEAPU8.fill(0,t,t+e),t}s(zeroMemory,"zeroMemory");function getMemory(t){if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,n=e+t+15&-16;return ___heap_base=n,GOT.__heap_base.value=n,e}s(getMemory,"getMemory");function isInternalSym(t){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(t)}s(isInternalSym,"isInternalSym");function uleb128Encode(t,e){t<128?e.push(t):e.push(t%128|128,t>>7)}s(uleb128Encode,"uleb128Encode");function sigToWasmTypes(t){for(var e={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},n={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},r=1;r<t.length;++r)n.parameters.push(e[t[r]]),t[r]==="j"&&n.parameters.push("i32");return n}s(sigToWasmTypes,"sigToWasmTypes");function generateFuncType(t,e){var n=t.slice(0,1),r=t.slice(1),o={i:127,p:127,j:126,f:125,d:124};e.push(96),uleb128Encode(r.length,e);for(var i=0;i<r.length;++i)e.push(o[r[i]]);n=="v"?e.push(0):e.push(1,o[n])}s(generateFuncType,"generateFuncType");function convertJsFunctionToWasm(t,e){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var n=[1];generateFuncType(e,n);var r=[0,97,115,109,1,0,0,0,1];uleb128Encode(n.length,r),r.push.apply(r,n),r.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var o=new WebAssembly.Module(new Uint8Array(r));return new WebAssembly.Instance(o,{e:{f:t}}).exports.f}s(convertJsFunctionToWasm,"convertJsFunctionToWasm");function updateTableMap(t,e){if(functionsInTableMap)for(var n=t;n<t+e;n++){var r=getWasmTableEntry(n);r&&functionsInTableMap.set(r,n)}}s(updateTableMap,"updateTableMap");var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1}s(getEmptyTableSlot,"getEmptyTableSlot");function setWasmTableEntry(t,e){wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)}s(setWasmTableEntry,"setWasmTableEntry");function addFunction(t,e){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(t))return functionsInTableMap.get(t);var n=getEmptyTableSlot();try{setWasmTableEntry(n,t)}catch(r){if(!(r instanceof TypeError))throw r;setWasmTableEntry(n,convertJsFunctionToWasm(t,e))}return functionsInTableMap.set(t,n),n}s(addFunction,"addFunction");function updateGOT(t,e){for(var n in t)if(!isInternalSym(n)){var r=t[n];n.startsWith("orig$")&&(n=n.split("$")[1],e=!0),GOT[n]||(GOT[n]=new WebAssembly.Global({value:"i32",mutable:!0})),(e||GOT[n].value==0)&&(typeof r=="function"?GOT[n].value=addFunction(r):typeof r=="number"?GOT[n].value=r:err("unhandled export type for `"+n+"`: "+typeof r))}}s(updateGOT,"updateGOT");function relocateExports(t,e,n){var r={};for(var o in t){var i=t[o];typeof i=="object"&&(i=i.value),typeof i=="number"&&(i+=e),r[o]=i}return updateGOT(r,n),r}s(relocateExports,"relocateExports");function resolveGlobalSymbol(t,e){var n;return e&&(n=asmLibraryArg["orig$"+t]),n||(n=asmLibraryArg[t])&&n.stub&&(n=void 0),n||(n=Module[asmjsMangle(t)]),!n&&t.startsWith("invoke_")&&(n=createInvokeFunction(t.split("_")[1])),n}s(resolveGlobalSymbol,"resolveGlobalSymbol");function alignMemory(t,e){return Math.ceil(t/e)*e}s(alignMemory,"alignMemory");function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t,!1);return e||(e=moduleExports[t]),e}s(resolveSymbol,"resolveSymbol"),tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:s(function(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in asmLibraryArg)return asmLibraryArg[e];var n;return e in t||(t[e]=function(){return n||(n=resolveSymbol(e)),n.apply(null,arguments)}),t[e]},"get")},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(s(addEmAsm,"addEmAsm"),updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(s(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(t){return postInstantiation(t.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return s(loadModule,"loadModule"),CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(t){loadDynamicLibrary(t,flags)}),loadModule())}s(loadWebAssemblyModule,"loadWebAssemblyModule");function loadDynamicLibrary(t,e,n){e=e||{global:!0,nodelete:!0};var r=LDSO.loadedLibsByName[t];if(r)return e.global&&!r.global&&(r.global=!0,r.module!=="loading"&&mergeLibSymbols(r.module,t)),e.nodelete&&r.refcount!==1/0&&(r.refcount=1/0),r.refcount++,n&&(LDSO.loadedLibsByHandle[n]=r),!e.loadAsync||Promise.resolve(!0);function o(l){if(e.fs&&e.fs.findObject(l)){var u=e.fs.readFile(l,{encoding:"binary"});return u instanceof Uint8Array||(u=new Uint8Array(u)),e.loadAsync?Promise.resolve(u):u}if(l=locateFile(l),e.loadAsync)return new Promise(function(c,d){readAsync(l,_=>c(new Uint8Array(_)),d)});if(!readBinary)throw new Error(l+": file not found, and synchronous loading of external files is not available");return readBinary(l)}s(o,"n");function i(){if(typeof preloadedWasm<"u"&&preloadedWasm[t]){var l=preloadedWasm[t];return e.loadAsync?Promise.resolve(l):l}return e.loadAsync?o(t).then(function(u){return loadWebAssemblyModule(u,e,n)}):loadWebAssemblyModule(o(t),e,n)}s(i,"s");function a(l){r.global&&mergeLibSymbols(l,t),r.module=l}return s(a,"a"),r={refcount:e.nodelete?1/0:1,name:t,module:"loading",global:e.global},LDSO.loadedLibsByName[t]=r,n&&(LDSO.loadedLibsByHandle[n]=r),e.loadAsync?i().then(function(l){return a(l),!0}):(a(i()),!0)}s(loadDynamicLibrary,"loadDynamicLibrary");function reportUndefinedSymbols(){for(var t in GOT)if(GOT[t].value==0){var e=resolveGlobalSymbol(t,!0);if(!e&&!GOT[t].required)continue;if(typeof e=="function")GOT[t].value=addFunction(e,e.sig);else{if(typeof e!="number")throw new Error("bad export type for `"+t+"`: "+typeof e);GOT[t].value=e}}}s(reportUndefinedSymbols,"reportUndefinedSymbols");function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}s(preloadDylibs,"preloadDylibs");function setValue(t,e,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":case"i8":HEAP8[t>>0]=e;break;case"i16":HEAP16[t>>1]=e;break;case"i32":HEAP32[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1];break;case"float":HEAPF32[t>>2]=e;break;case"double":HEAPF64[t>>3]=e;break;case"*":HEAPU32[t>>2]=e;break;default:abort("invalid type for setValue: "+n)}}s(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}s(__emscripten_get_now_is_monotonic,"__emscripten_get_now_is_monotonic");function _abort(){abort("")}s(_abort,"_abort");function _emscripten_date_now(){return Date.now()}s(_emscripten_date_now,"_emscripten_date_now");function _emscripten_memcpy_big(t,e,n){HEAPU8.copyWithin(t,e,e+n)}s(_emscripten_memcpy_big,"_emscripten_memcpy_big");function getHeapMax(){return 2147483648}s(getHeapMax,"getHeapMax");function emscripten_realloc_buffer(t){try{return wasmMemory.grow(t-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}s(emscripten_realloc_buffer,"emscripten_realloc_buffer");function _emscripten_resize_heap(t){var e=HEAPU8.length;t>>>=0;var n=getHeapMax();if(t>n)return!1;for(var r=1;r<=4;r*=2){var o=e*(1+.2/r);if(o=Math.min(o,t+100663296),emscripten_realloc_buffer(Math.min(n,(i=Math.max(t,o))+((a=65536)-i%a)%a)))return!0}var i,a;return!1}s(_emscripten_resize_heap,"_emscripten_resize_heap"),__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:s(function(t,e,n){if(PATH.isAbs(e))return e;var r;if(t===-100?r=FS.cwd():r=SYSCALLS.getStreamFromFD(t).path,e.length==0){if(!n)throw new FS.ErrnoError(44);return r}return PATH.join2(r,e)},"calculateAt"),doStat:s(function(t,e,n){try{var r=t(e)}catch(l){if(l&&l.node&&PATH.normalize(e)!==PATH.normalize(FS.getPath(l.node)))return-54;throw l}HEAP32[n>>2]=r.dev,HEAP32[n+8>>2]=r.ino,HEAP32[n+12>>2]=r.mode,HEAPU32[n+16>>2]=r.nlink,HEAP32[n+20>>2]=r.uid,HEAP32[n+24>>2]=r.gid,HEAP32[n+28>>2]=r.rdev,tempI64=[r.size>>>0,(tempDouble=r.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+40>>2]=tempI64[0],HEAP32[n+44>>2]=tempI64[1],HEAP32[n+48>>2]=4096,HEAP32[n+52>>2]=r.blocks;var o=r.atime.getTime(),i=r.mtime.getTime(),a=r.ctime.getTime();return tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+56>>2]=tempI64[0],HEAP32[n+60>>2]=tempI64[1],HEAPU32[n+64>>2]=o%1e3*1e3,tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+72>>2]=tempI64[0],HEAP32[n+76>>2]=tempI64[1],HEAPU32[n+80>>2]=i%1e3*1e3,tempI64=[Math.floor(a/1e3)>>>0,(tempDouble=Math.floor(a/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+88>>2]=tempI64[0],HEAP32[n+92>>2]=tempI64[1],HEAPU32[n+96>>2]=a%1e3*1e3,tempI64=[r.ino>>>0,(tempDouble=r.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+104>>2]=tempI64[0],HEAP32[n+108>>2]=tempI64[1],0},"doStat"),doMsync:s(function(t,e,n,r,o){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&r)return 0;var i=HEAPU8.slice(t,t+n);FS.msync(e,i,o,n,r)},"doMsync"),varargs:void 0,get:s(function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},"get"),getStr:s(function(t){return UTF8ToString(t)},"getStr"),getStreamFromFD:s(function(t){var e=FS.getStream(t);if(!e)throw new FS.ErrnoError(8);return e},"getStreamFromFD")};function _proc_exit(t){EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit&&Module.onExit(t),ABORT=!0),quit_(t,new ExitStatus(t))}s(_proc_exit,"_proc_exit");function exitJS(t,e){EXITSTATUS=t,_proc_exit(t)}s(exitJS,"exitJS"),_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(t){try{var e=SYSCALLS.getStreamFromFD(t);return FS.close(e),0}catch(n){if(typeof FS>"u"||!(n instanceof FS.ErrnoError))throw n;return n.errno}}s(_fd_close,"_fd_close");function convertI32PairToI53Checked(t,e){return e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN}s(convertI32PairToI53Checked,"convertI32PairToI53Checked");function _fd_seek(t,e,n,r,o){try{var i=convertI32PairToI53Checked(e,n);if(isNaN(i))return 61;var a=SYSCALLS.getStreamFromFD(t);return FS.llseek(a,i,r),tempI64=[a.position>>>0,(tempDouble=a.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[o>>2]=tempI64[0],HEAP32[o+4>>2]=tempI64[1],a.getdents&&i===0&&r===0&&(a.getdents=null),0}catch(l){if(typeof FS>"u"||!(l instanceof FS.ErrnoError))throw l;return l.errno}}s(_fd_seek,"_fd_seek");function doWritev(t,e,n,r){for(var o=0,i=0;i<n;i++){var a=HEAPU32[e>>2],l=HEAPU32[e+4>>2];e+=8;var u=FS.write(t,HEAP8,a,l,r);if(u<0)return-1;o+=u,r!==void 0&&(r+=u)}return o}s(doWritev,"doWritev");function _fd_write(t,e,n,r){try{var o=doWritev(SYSCALLS.getStreamFromFD(t),e,n);return HEAPU32[r>>2]=o,0}catch(i){if(typeof FS>"u"||!(i instanceof FS.ErrnoError))throw i;return i.errno}}s(_fd_write,"_fd_write");function _tree_sitter_log_callback(t,e){if(currentLogCallback){let n=UTF8ToString(e);currentLogCallback(n,t!==0)}}s(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(t,e,n,r,o){var i=currentParseCallback(e,{row:n,column:r});typeof i=="string"?(setValue(o,i.length,"i32"),stringToUTF16(i,t,10240)):setValue(o,0,"i32")}s(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");function handleException(t){if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)}s(handleException,"handleException");function allocateUTF8OnStack(t){var e=lengthBytesUTF8(t)+1,n=stackAlloc(e);return stringToUTF8Array(t,HEAP8,n,e),n}s(allocateUTF8OnStack,"allocateUTF8OnStack");function stringToUTF16(t,e,n){if(n===void 0&&(n=2147483647),n<2)return 0;for(var r=e,o=(n-=2)<2*t.length?n/2:t.length,i=0;i<o;++i){var a=t.charCodeAt(i);HEAP16[e>>1]=a,e+=2}return HEAP16[e>>1]=0,e-r}s(stringToUTF16,"stringToUTF16");function AsciiToString(t){for(var e="";;){var n=HEAPU8[t++>>0];if(!n)return e;e+=String.fromCharCode(n)}}s(AsciiToString,"AsciiToString"),_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(t){var e=Module._main;if(e){(t=t||[]).unshift(thisProgram);var n=t.length,r=stackAlloc(4*(n+1)),o=r>>2;t.forEach(a=>{HEAP32[o++]=allocateUTF8OnStack(a)}),HEAP32[o]=0;try{var i=e(n,r);return exitJS(i,!0),i}catch(a){return handleException(a)}}}s(callMain,"callMain"),Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=s(function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)},"e");var dylibsLoaded=!1;function run(t){function e(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(t),postRun()))}s(e,"t"),t=t||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()))}if(s(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static{s(this,"ParserImpl")}static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let n;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{n=e[0];let r=C._ts_language_version(n);if(r<MIN_COMPATIBLE_VERSION||VERSION<r)throw new Error(`Incompatible language version ${r}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else n=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],n),this}getLanguage(){return this.language}parse(e,n,r){if(typeof e=="string")currentParseCallback=s((u,c,d)=>e.slice(u,d),"currentParseCallback");else{if(typeof e!="function")throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let o=0,i=0;if(r&&r.includedRanges){o=r.includedRanges.length,i=C._calloc(o,SIZE_OF_RANGE);let u=i;for(let c=0;c<o;c++)marshalRange(u,r.includedRanges[c]),u+=SIZE_OF_RANGE}let a=C._ts_parser_parse_wasm(this[0],this[1],n?n[0]:0,i,o);if(!a)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let l=new Tree(INTERNAL,a,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,l}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(typeof e!="function")throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{static{s(this,"Tree")}constructor(e,n,r,o){assertInternal(e),this[0]=n,this.language=r,this.textCallback=o}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let n=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),o=new Array(n);if(n>0){let i=r;for(let a=0;a<n;a++)o[a]=unmarshalRange(i),i+=SIZE_OF_RANGE;C._free(r)}return o}}class Node{static{s(this,"Node")}constructor(e,n){assertInternal(e),this.tree=n}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let n=this.tree.language.fields.indexOf(e);if(n!==-1)return this.childForFieldId(n)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let r=n;for(let o=0;o<e;o++)this._children[o]=unmarshalNode(this.tree,r),r+=SIZE_OF_NODE;C._free(n)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let r=n;for(let o=0;o<e;o++)this._namedChildren[o]=unmarshalNode(this.tree,r),r+=SIZE_OF_NODE;C._free(n)}}return this._namedChildren}descendantsOfType(e,n,r){Array.isArray(e)||(e=[e]),n||(n=ZERO_POINT),r||(r=ZERO_POINT);let o=[],i=this.tree.language.types;for(let d=0,_=i.length;d<_;d++)e.includes(i[d])&&o.push(d);let a=C._malloc(SIZE_OF_INT*o.length);for(let d=0,_=o.length;d<_;d++)setValue(a+d*SIZE_OF_INT,o[d],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],a,o.length,n.row,n.column,r.row,r.column);let l=getValue(TRANSFER_BUFFER,"i32"),u=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=new Array(l);if(l>0){let d=u;for(let _=0;_<l;_++)c[_]=unmarshalNode(this.tree,d),d+=SIZE_OF_NODE}return C._free(u),C._free(a),c}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,n=e){if(typeof e!="number"||typeof n!="number")throw new Error("Arguments must be numbers");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,"i32"),setValue(r+SIZE_OF_INT,n,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,n=e){if(typeof e!="number"||typeof n!="number")throw new Error("Arguments must be numbers");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,"i32"),setValue(r+SIZE_OF_INT,n,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,n=e){if(!isPoint(e)||!isPoint(n))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(r,e),marshalPoint(r+SIZE_OF_POINT,n),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,n=e){if(!isPoint(e)||!isPoint(n))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(r,e),marshalPoint(r+SIZE_OF_POINT,n),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),n=AsciiToString(e);return C._free(e),n}}class TreeCursor{static{s(this,"TreeCursor")}constructor(e,n){assertInternal(e),this.tree=n,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),n=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,n)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{static{s(this,"Language")}constructor(e,n){assertInternal(e),this[0]=n,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let r=0,o=this.types.length;r<o;r++)C._ts_language_symbol_type(this[0],r)<2&&(this.types[r]=UTF8ToString(C._ts_language_symbol_name(this[0],r)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let r=0,o=this.fields.length;r<o;r++){let i=C._ts_language_field_name_for_id(this[0],r);this.fields[r]=i!==0?UTF8ToString(i):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){let n=this.fields.indexOf(e);return n!==-1?n:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,n){let r=lengthBytesUTF8(e),o=C._malloc(r+1);stringToUTF8(e,o,r+1);let i=C._ts_language_symbol_for_name(this[0],o,r,n);return C._free(o),i||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let n=C._ts_language_symbol_name(this[0],e);return n?UTF8ToString(n):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){let n=lengthBytesUTF8(e),r=C._malloc(n+1);stringToUTF8(e,r,n+1);let o=C._ts_query_new(this[0],r,n,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!o){let p=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),g=UTF8ToString(r,getValue(TRANSFER_BUFFER,"i32")).length,y=e.substr(g,100).split(`
`)[0],b,S=y.match(QUERY_WORD_REGEX)[0];switch(p){case 2:b=new RangeError(`Bad node name '${S}'`);break;case 3:b=new RangeError(`Bad field name '${S}'`);break;case 4:b=new RangeError(`Bad capture name @${S}`);break;case 5:b=new TypeError(`Bad pattern structure at offset ${g}: '${y}'...`),S="";break;default:b=new SyntaxError(`Bad syntax at offset ${g}: '${y}'...`),S=""}throw b.index=g,b.length=S.length,C._free(r),b}let i=C._ts_query_string_count(o),a=C._ts_query_capture_count(o),l=C._ts_query_pattern_count(o),u=new Array(a),c=new Array(i);for(let p=0;p<a;p++){let g=C._ts_query_capture_name_for_id(o,p,TRANSFER_BUFFER),y=getValue(TRANSFER_BUFFER,"i32");u[p]=UTF8ToString(g,y)}for(let p=0;p<i;p++){let g=C._ts_query_string_value_for_id(o,p,TRANSFER_BUFFER),y=getValue(TRANSFER_BUFFER,"i32");c[p]=UTF8ToString(g,y)}let d=new Array(l),_=new Array(l),m=new Array(l),f=new Array(l),h=new Array(l);for(let p=0;p<l;p++){let g=C._ts_query_predicates_for_pattern(o,p,TRANSFER_BUFFER),y=getValue(TRANSFER_BUFFER,"i32");f[p]=[],h[p]=[];let b=[],S=g;for(let v=0;v<y;v++){let I=getValue(S,"i32");S+=SIZE_OF_INT;let O=getValue(S,"i32");if(S+=SIZE_OF_INT,I===PREDICATE_STEP_TYPE_CAPTURE)b.push({type:"capture",name:u[O]});else if(I===PREDICATE_STEP_TYPE_STRING)b.push({type:"string",value:c[O]});else if(b.length>0){if(b[0].type!=="string")throw new Error("Predicates must begin with a literal value");let A=b[0].value,H=!0;switch(A){case"not-eq?":H=!1;case"eq?":if(b.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(b.length-1));if(b[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${b[1].value}"`);if(b[2].type==="capture"){let V=b[1].name,se=b[2].name;h[p].push(function(Pe){let Y,Ge;for(let Ne of Pe)Ne.name===V&&(Y=Ne.node),Ne.name===se&&(Ge=Ne.node);return Y===void 0||Ge===void 0||Y.text===Ge.text===H})}else{let V=b[1].name,se=b[2].value;h[p].push(function(Pe){for(let Y of Pe)if(Y.name===V)return Y.node.text===se===H;return!0})}break;case"not-match?":H=!1;case"match?":if(b.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${b.length-1}.`);if(b[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${b[1].value}".`);if(b[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${b[2].value}.`);let W=b[1].name,D=new RegExp(b[2].value);h[p].push(function(V){for(let se of V)if(se.name===W)return D.test(se.node.text)===H;return!0});break;case"set!":if(b.length<2||b.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${b.length-1}.`);if(b.some(V=>V.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');d[p]||(d[p]={}),d[p][b[1].value]=b[2]?b[2].value:null;break;case"is?":case"is-not?":if(b.length<2||b.length>3)throw new Error(`Wrong number of arguments to \`#${A}\` predicate. Expected 1 or 2. Got ${b.length-1}.`);if(b.some(V=>V.type!=="string"))throw new Error(`Arguments to \`#${A}\` predicate must be a strings.".`);let Le=A==="is?"?_:m;Le[p]||(Le[p]={}),Le[p][b[1].value]=b[2]?b[2].value:null;break;default:f[p].push({operator:A,operands:b.slice(1)})}b.length=0}}Object.freeze(d[p]),Object.freeze(_[p]),Object.freeze(m[p])}return C._free(r),new Query(INTERNAL,o,u,h,f,Object.freeze(d),Object.freeze(_),Object.freeze(m))}static load(e){let n;if(e instanceof Uint8Array)n=Promise.resolve(e);else{let o=e;if(typeof process<"u"&&process.versions&&process.versions.node){let i=require("fs");n=Promise.resolve(i.readFileSync(o))}else n=fetch(o).then(i=>i.arrayBuffer().then(a=>{if(i.ok)return new Uint8Array(a);{let l=new TextDecoder("utf-8").decode(a);throw new Error(`Language.load failed with status ${i.status}.

${l}`)}}))}let r=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return n.then(o=>r(o,{loadAsync:!0})).then(o=>{let i=Object.keys(o),a=i.find(u=>LANGUAGE_FUNCTION_REGEX.test(u)&&!u.includes("external_scanner_"));a||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(i,null,2)}`);let l=o[a]();return new Language(INTERNAL,l)})}}class Query{static{s(this,"Query")}constructor(e,n,r,o,i,a,l,u){assertInternal(e),this[0]=n,this.captureNames=r,this.textPredicates=o,this.predicates=i,this.setProperties=a,this.assertedProperties=l,this.refutedProperties=u,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,n,r,o){n||(n=ZERO_POINT),r||(r=ZERO_POINT),o||(o={});let i=o.matchLimit;if(i===void 0)i=0;else if(typeof i!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],n.row,n.column,r.row,r.column,i);let a=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),u=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),c=new Array(a);this.exceededMatchLimit=!!u;let d=0,_=l;for(let m=0;m<a;m++){let f=getValue(_,"i32");_+=SIZE_OF_INT;let h=getValue(_,"i32");_+=SIZE_OF_INT;let p=new Array(h);if(_=unmarshalCaptures(this,e.tree,_,p),this.textPredicates[f].every(g=>g(p))){c[d++]={pattern:f,captures:p};let g=this.setProperties[f];g&&(c[m].setProperties=g);let y=this.assertedProperties[f];y&&(c[m].assertedProperties=y);let b=this.refutedProperties[f];b&&(c[m].refutedProperties=b)}}return c.length=d,C._free(l),c}captures(e,n,r,o){n||(n=ZERO_POINT),r||(r=ZERO_POINT),o||(o={});let i=o.matchLimit;if(i===void 0)i=0;else if(typeof i!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],n.row,n.column,r.row,r.column,i);let a=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),u=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),c=[];this.exceededMatchLimit=!!u;let d=[],_=l;for(let m=0;m<a;m++){let f=getValue(_,"i32");_+=SIZE_OF_INT;let h=getValue(_,"i32");_+=SIZE_OF_INT;let p=getValue(_,"i32");if(_+=SIZE_OF_INT,d.length=h,_=unmarshalCaptures(this,e.tree,_,d),this.textPredicates[f].every(g=>g(d))){let g=d[p],y=this.setProperties[f];y&&(g.setProperties=y);let b=this.assertedProperties[f];b&&(g.assertedProperties=b);let S=this.refutedProperties[f];S&&(g.refutedProperties=S),c.push(g)}}return C._free(l),c}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,n){let r=n-e,o=t.textCallback(e,null,n);for(e+=o.length;e<n;){let i=t.textCallback(e,null,n);if(!(i&&i.length>0))break;e+=i.length,o+=i}return e>n&&(o=o.slice(0,r)),o}s(getText,"getText");function unmarshalCaptures(t,e,n,r){for(let o=0,i=r.length;o<i;o++){let a=getValue(n,"i32"),l=unmarshalNode(e,n+=SIZE_OF_INT);n+=SIZE_OF_NODE,r[o]={name:t.captureNames[a],node:l}}return n}s(unmarshalCaptures,"unmarshalCaptures");function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}s(assertInternal,"assertInternal");function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}s(isPoint,"isPoint");function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}s(marshalNode,"marshalNode");function unmarshalNode(t,e=TRANSFER_BUFFER){let n=getValue(e,"i32");if(n===0)return null;let r=getValue(e+=SIZE_OF_INT,"i32"),o=getValue(e+=SIZE_OF_INT,"i32"),i=getValue(e+=SIZE_OF_INT,"i32"),a=getValue(e+=SIZE_OF_INT,"i32"),l=new Node(INTERNAL,t);return l.id=n,l.startIndex=r,l.startPosition={row:o,column:i},l[0]=a,l}s(unmarshalNode,"unmarshalNode");function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32")}s(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}s(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}s(marshalPoint,"marshalPoint");function unmarshalPoint(t){return{row:getValue(t,"i32"),column:getValue(t+SIZE_OF_INT,"i32")}}s(unmarshalPoint,"unmarshalPoint");function marshalRange(t,e){marshalPoint(t,e.startPosition),marshalPoint(t+=SIZE_OF_POINT,e.endPosition),setValue(t+=SIZE_OF_POINT,e.startIndex,"i32"),setValue(t+=SIZE_OF_INT,e.endIndex,"i32"),t+=SIZE_OF_INT}s(marshalRange,"marshalRange");function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32"),t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32"),e}s(unmarshalRange,"unmarshalRange");function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}s(marshalEdit,"marshalEdit");for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});function Ze(t){return t in yr&&t!=="csharp"&&t!=="java"}function ft(t){if(!(t in yr))throw new Error(`Unrecognized language: ${t}`);return yr[t]}async function Va(t){let e,n=Zt.default.resolve(Zt.default.extname(__filename)!==".ts"?__dirname:Zt.default.resolve(__dirname,"../../dist"),`tree-sitter-${t}.wasm`);try{e=await ui.promises.readFile(n)}catch(r){throw r instanceof Error&&"code"in r&&typeof r.code=="string"&&r.name==="Error"?new he(`Could not load tree-sitter-${t}.wasm`,r):r}return $t.default.Language.load(e)}function di(t){let e=ft(t);if(!br.has(e)){let n=Va(e);br.set(e,n)}return br.get(e)}async function $e(t,e){await $t.default.init();let n;try{n=new $t.default}catch(i){throw i&&typeof i=="object"&&"message"in i&&typeof i.message=="string"&&i.message.includes("table index is out of bounds")?new wr(`Could not init Parse for language <${t}>`,i):i}let r=await di(t);n.setLanguage(r);let o=n.parse(e);return n.delete(),o}function qa(t){switch(ft(t)){case"python":return null;case"javascript":case"typescript":case"tsx":case"go":case"c_sharp":case"java":return"}";case"ruby":return"end"}}function Za(t,e){let n=[];for(let r of t){if(!r[1]){let o=e.tree.getLanguage();r[1]=o.query(r[0])}n.push(...r[1].matches(e))}return n}function vr(t){return Za([$a],t).length==1}var ui,Zt,$t,ci,yr,br,wr,$a,Gt=E(()=>{"use strict";Lt();ui=require("fs"),Zt=Je(require("path")),$t=Je(li()),ci=(u=>(u.Python="python",u.JavaScript="javascript",u.TypeScript="typescript",u.TSX="tsx",u.Go="go",u.Ruby="ruby",u.CSharp="c_sharp",u.Java="java",u))(ci||{}),yr={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c_sharp",java:"java"};s(Ze,"isSupportedLanguageId");s(ft,"languageIdToWasmLanguage");br=new Map;s(Va,"loadWasmLanguage");s(di,"getLanguage");wr=class extends Error{static{s(this,"WrappedError")}constructor(e,n){super(e,{cause:n})}};s($e,"parseTreeSitter");s(qa,"getBlockCloseToken");s(Za,"innerQuery");$a=[`[
    (class_definition (block (expression_statement (string))))
    (function_definition (block (expression_statement (string))))
]`];s(vr,"queryPythonIsDocstring")});function Ga(t,e){let n=new Set;return e.forEach(r=>{t.has(r)&&n.add(r)}),n.size}var Kt,_i=E(()=>{"use strict";Gt();jt();Ht();gr();Kt=class t extends qe{static{s(this,"BlockTokenSubsetMatcher")}constructor(e,n){super(e),this.windowLength=n}static{this.FACTORY=s(e=>({to:s(n=>new t(n,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return Vt(this.windowLength,e)}_getCursorContextInfo(e){return Me(e,{maxLineCount:this.windowLength})}get referenceTokens(){return this.createReferenceTokensForLanguage()}async createReferenceTokensForLanguage(){return this.referenceTokensCache?this.referenceTokensCache:(this.referenceTokensCache=t.syntaxAwareSupportsLanguage(this.referenceDoc.languageId)?await this.syntaxAwareReferenceTokens():await super.referenceTokens,this.referenceTokensCache)}async syntaxAwareReferenceTokens(){let e=(await this.getEnclosingMemberStart(this.referenceDoc.source,this.referenceDoc.offset))?.startIndex,n=this.referenceDoc.offset,r=e?this.referenceDoc.source.slice(e,n):Me(this.referenceDoc,{maxLineCount:this.windowLength}).context;return this.tokenizer.tokenize(r)}static syntaxAwareSupportsLanguage(e){switch(e){case"csharp":return!0;default:return!1}}similarityScore(e,n){return Ga(e,n)}async getEnclosingMemberStart(e,n){let r;try{r=await $e(this.referenceDoc.languageId,e);let o=r.rootNode.namedDescendantForIndex(n);for(;o&&!(t.isMember(o)||t.isBlock(o));)o=o.parent??void 0;return o}finally{r?.delete()}}static isMember(e){switch(e?.type){case"method_declaration":case"property_declaration":case"field_declaration":case"constructor_declaration":return!0;default:return!1}}static isBlock(e){switch(e?.type){case"class_declaration":case"struct_declaration":case"record_declaration":case"enum_declaration":case"interface_declaration":return!0;default:return!1}}};s(Ga,"computeScore")});function tl(t,e){return(e.useSubsetMatching?Kt.FACTORY(e.snippetLength):qt.FACTORY(e.snippetLength)).to(t)}async function fi(t,e,n){let r=tl(t,n);return n.maxTopSnippets===0?[]:(await e.filter(i=>i.source.length<n.maxCharPerFile&&i.source.length>0).slice(0,n.maxNumberOfFiles).reduce(async(i,a)=>(await i).concat((await r.findMatches(a,n.maxSnippetsPerFile)).map(l=>({relativePath:a.relativePath,...l}))),Promise.resolve([]))).filter(i=>i.score&&i.snippet&&i.score>n.threshold).sort((i,a)=>i.score-a.score).slice(-n.maxTopSnippets)}var Ka,Ja,Xa,Ya,Qa,el,mi,Er,Jt=E(()=>{"use strict";ai();_i();Ka=0,Ja=60,Xa=4,Ya=1,Qa=20,el=1e4,mi={snippetLength:Ja,threshold:Ka,maxTopSnippets:Xa,maxCharPerFile:el,maxNumberOfFiles:Qa,maxSnippetsPerFile:Ya,useSubsetMatching:!1},Er={snippetLength:60,threshold:0,maxTopSnippets:16,maxCharPerFile:1e5,maxNumberOfFiles:200,maxSnippetsPerFile:4};s(tl,"getMatcher");s(fi,"getSimilarSnippets")});function pi(t,e,n){if(!n)throw new Error("targetTokenBudget must be specified for the truncateFirstLinesFirst summarizer");let r=e.text.split(`
`);for(let g=0;g<r.length-1;g++)r[g]+=`
`;let o=[];r.forEach((g,y)=>{g===`
`&&o.length>0&&!o[o.length-1].endsWith(`

`)?o[o.length-1]+=`
`:o.push(g)});let i=o.map(g=>t.tokenLength(g)),a=1,l=0;for(;a<=i.length;a++){let g=i.at(-a);if(g){if(g+l>n){a--;break}l+=g}}let c=o.slice(-a).join(""),d=t.tokenLength(c),m=o.slice(0,-a).join(""),f=t.tokenLength(m),h={id:e.id,kind:e.kind,text:c,tokens:d,score:e.score},p={id:e.id,kind:e.kind,text:m,tokens:f,score:e.score};return{summarizedElement:h,removedMaterial:p}}var hi=E(()=>{"use strict";s(pi,"truncateFirstLinesFirst")});var Xt,gi=E(()=>{"use strict";hi();Yt();Xt=class{static{s(this,"SnippetTextProcessor")}constructor(e="default"){switch(e){case"default":default:this.kindToFunctionMap=new Map([["BeforeCursor",pi]])}}isSummarizationAvailable(e){return this.kindToFunctionMap.has(e)}summarize(e,n,r){return this.kindToFunctionMap.get(n.kind)(e,n,r)}}});function bi(t,e){let n=`Use ${t}`;return be(n,e)}function yi(t){let e=t.source.substring(0,t.offset);return rl.test(e)}function wi(t,e){let n=t.lastIndexOf(`
`)+1,r=t.substring(0,n),o=t.substring(n);return e.snippet=e.snippet+o,[r,e]}var rl,Sr=E(()=>{"use strict";le();rl=/(\.|->|::)\w+$/;s(bi,"announceTooltipSignatureSnippet");s(yi,"endsWithAttributesOrMethod");s(wi,"transferLastLineToTooltipSignature")});function ol(){Tr={text:"",tokens:[]}}function oe(t){return t=t.toLowerCase(),sl[t]??t}async function al(t,e={},n=[]){let r=new Qt(e,t.languageId),o=K(r.tokenizerName),i=new Xt(r.snippetTextProcessingPreset),a=new pt(r.promptOrderListPreset),l=new en(r.promptPriorityPreset),{source:u,offset:c}=t;if(c<0||c>u.length)throw new Error(`Offset ${c} is out of range.`);t.languageId=oe(t.languageId);let d=new nn(o,r.lineEnding,a,i,l),_=n.find(v=>v.provider==="path"),m=n.find(v=>v.provider==="language"),f=n.find(v=>v.provider==="trait"),h=n.find(v=>v.provider==="tooltip-signature");_!==void 0&&_.snippet.length>0?(d.append(_.snippet,"PathMarker"),m&&d.extMarkUnused({text:m.snippet,kind:"LanguageMarker",tokens:o.tokenLength(m.snippet),id:NaN,score:NaN})):m&&d.append(m.snippet,"LanguageMarker"),f!=null&&d.append(f.snippet,"Traits"),n=n.filter(v=>v.provider!=="language"&&v.provider!=="path"&&v.provider!=="tooltip-signature"&&v.provider!=="trait");function p(){Ii(n,t.languageId,o,l,r.numberOfSnippets).forEach(I=>{let O=tn(I.provider);d.append(I.announcedSnippet,O,I.tokens,I.score)})}s(p,"addSnippetsNow"),p();let g=u.substring(0,c);h!==void 0&&o.tokenLength(h.snippet)<=Ti?([g,h]=wi(g,h),d.append(h.snippet,"TooltipSignature")):h!==void 0&&d.extMarkUnused({text:h.snippet,kind:"TooltipSignature",tokens:o.tokenLength(h.snippet),id:NaN,score:NaN}),d.append(g,"BeforeCursor");let y=u.slice(c),{promptInfo:b,newCachedSuffix:S}=d.fulfill(y,r,Tr);return Tr=S,b}var Tr,vi,Ei,Si,Ti,xi,il,xr,ki,Mi,Qt,sl,Ie=E(()=>{"use strict";Jt();ce();gi();He();Sr();Yt();Tr={text:"",tokens:[]};s(ol,"resetSuffixCache");vi=500,Ei=8192-vi,Si=4,Ti=150,xi=10,il=15,xr=(n=>(n.ConvertToUnix="unix",n.KeepOriginal="keep",n))(xr||{}),ki=(n=>(n.None="none",n.FifteenPercent="fifteenPercent",n))(ki||{}),Mi=(n=>(n.Equal="equal",n.Levenshtein="levenshteineditdistance",n))(Mi||{}),Qt=class{constructor(e,n){this.maxPromptLength=Ei;this.lineEnding="unix";this.tokenizerName="cl100k_base";this.suffixPercent=15;this.suffixMatchThreshold=xi;this.promptOrderListPreset="default";this.promptPriorityPreset="default";this.snippetTextProcessingPreset="default";if(Object.assign(this,e),this.suffixPercent<0||this.suffixPercent>100)throw new Error(`suffixPercent must be between 0 and 100, but was ${this.suffixPercent}`);if(this.suffixMatchThreshold<0||this.suffixMatchThreshold>100)throw new Error(`suffixMatchThreshold must be at between 0 and 100, but was ${this.suffixMatchThreshold}`);n==="cpp"?(this.similarFilesOptions??=Er,this.numberOfSnippets??=Er.maxTopSnippets):(this.similarFilesOptions??=mi,this.numberOfSnippets??=Si)}static{s(this,"PromptOptions")}},sl={javascriptreact:"javascript",jsx:"javascript",typescriptreact:"typescript",jade:"pug",cshtml:"razor",c:"cpp"};s(oe,"normalizeLanguageId");s(al,"getPrompt")});function Li(t,e){if(t.length===0||e.length===0)return{score:t.length+e.length};let n=Array.from({length:t.length}).map(()=>Array.from({length:e.length}).map(()=>0));for(let r=0;r<t.length;r++)n[r][0]=r;for(let r=0;r<e.length;r++)n[0][r]=r;for(let r=0;r<e.length;r++)for(let o=0;o<t.length;o++)n[o][r]=Math.min((o==0?r:n[o-1][r])+1,(r==0?o:n[o][r-1])+1,(o==0||r==0?Math.max(o,r):n[o-1][r-1])+(t[o]==e[r]?0:1));return{score:n[t.length-1][e.length-1]}}var Pi=E(()=>{"use strict";s(Li,"findEditDistanceScore")});function tn(t){switch(t){case"similar-files":return"SimilarFile";case"path":return"PathMarker";case"language":return"LanguageMarker";case"tooltip-signature":return"TooltipSignature";case"trait":return"Traits";case"code":return"CodeSnippet";default:throw new Error(`Unknown snippet provider type ${t}`)}}var ht,ll,rn,on,pt,en,sn,nn,Yt=E(()=>{"use strict";an();Ie();Pi();ht=50,ll=5,rn=class{constructor(){this.used=new Map;this.unused=new Map}static{s(this,"PromptBackground")}add(e){for(let[n,r]of e.used)this.used.set(n,r);for(let[n,r]of e.unused)this.unused.set(n,r)}markUsed(e){this.IsSnippet(e)&&this.used.set(e.id,this.convert(e))}undoMarkUsed(e){this.IsSnippet(e)&&this.used.delete(e.id)}markUnused(e){this.IsSnippet(e)&&this.unused.set(e.id,this.convert(e))}convert(e){return{score:e.score.toFixed(4),length:e.text.length}}IsSnippet(e){return e.kind=="SimilarFile"||e.kind=="TooltipSignature"}},on=class{constructor(){this.used=new Map;this.unused=new Map;this.usedCounts=new Map;this.unusedCounts=new Map}static{s(this,"PromptChoices")}toJSON(){return{used:Object.fromEntries(this.used),unused:Object.fromEntries(this.unused),usedCounts:Object.fromEntries(this.usedCounts),unusedCounts:Object.fromEntries(this.unusedCounts)}}add(e){for(let[n,r]of e.used)this.used.set(n,(this.used.get(n)||0)+r);for(let[n,r]of e.unused)this.unused.set(n,(this.unused.get(n)||0)+r);for(let[n,r]of e.usedCounts)this.usedCounts.set(n,(this.usedCounts.get(n)||0)+r);for(let[n,r]of e.unusedCounts)this.unusedCounts.set(n,(this.unusedCounts.get(n)||0)+r)}markUsed(e){this.used.set(e.kind,(this.used.get(e.kind)||0)+e.tokens),e.kind=="BeforeCursor"?this.usedCounts.set(e.kind,(this.usedCounts.get(e.kind)||0)+e.text.split(`
`).length):this.usedCounts.set(e.kind,(this.usedCounts.get(e.kind)||0)+1)}undoMarkUsed(e){this.used.set(e.kind,(this.used.get(e.kind)||0)-e.tokens),e.kind=="BeforeCursor"?this.usedCounts.set(e.kind,(this.usedCounts.get(e.kind)||0)-e.text.split(`
`).length):this.usedCounts.set(e.kind,(this.usedCounts.get(e.kind)||0)-1)}markUnused(e){this.unused.set(e.kind,(this.unused.get(e.kind)||0)+e.tokens),e.kind=="BeforeCursor"?this.unusedCounts.set(e.kind,(this.unusedCounts.get(e.kind)||0)+e.text.split(`
`).length):this.unusedCounts.set(e.kind,(this.unusedCounts.get(e.kind)||0)+1)}},pt=class{static{s(this,"PromptOrderList")}constructor(e="default"){this._rankedList=["LanguageMarker","PathMarker","Traits","CodeSnippet","SimilarFile","BeforeCursor","TooltipSignature"]}get rankedList(){return this._rankedList}sortElements(e){return e.sort((n,r)=>{let o=this._rankedList.indexOf(n.kind),i=this._rankedList.indexOf(r.kind);if(o===-1||i===-1)throw new Error(`Invalid element kind: ${n.kind} or ${r.kind}, not found in prompt element ordering list`);return o===i?n.id-r.id:o-i})}},en=class extends pt{static{s(this,"PromptPriorityList")}constructor(e="default"){switch(super(),e){case"office-exp":this._rankedList=["PathMarker","TooltipSignature","BeforeCursor","CodeSnippet","SimilarFile","LanguageMarker","Traits"];break;default:this._rankedList=["TooltipSignature","BeforeCursor","CodeSnippet","SimilarFile","PathMarker","LanguageMarker","Traits"]}}sortElements(e){return e.sort((n,r)=>{let o=this._rankedList.indexOf(n.kind),i=this._rankedList.indexOf(r.kind);if(o===-1||i===-1)throw new Error(`Invalid element kind: ${n.kind} or ${r.kind}, not found in snippet provider priority list`);return o===i?r.id-n.id:o-i})}};s(tn,"kindForSnippetProviderType");sn=class{constructor(e){this.ranges=new Array;let n=0,r;for(let o of e)o.text.length!==0&&(r==="BeforeCursor"&&o.kind==="BeforeCursor"?this.ranges[this.ranges.length-1].end+=o.text.length:this.ranges.push({kind:o.kind,start:n,end:n+o.text.length}),r=o.kind,n+=o.text.length)}static{s(this,"PromptElementRanges")}},nn=class{constructor(e,n,r,o,i){this.tokenizer=e;this.lineEndingOption=n;this.orderingList=r;this.snippetTextProcessor=o;this.priorityList=i;this.content=[];this.basePromptBackground=new rn;this.baseTallyOfChoices=new on}static{s(this,"PromptWishlist")}extMarkUnused(e){this.basePromptBackground.markUnused(e),this.baseTallyOfChoices.markUnused(e)}getContent(){return[...this.content]}convertLineEndings(e){return this.lineEndingOption==="unix"&&(e=e.replace(/\r\n?/g,`
`)),e}maxPrefixTokenLength(){return this.content.reduce((e,n)=>e+=n.tokens,0)}append(e,n,r=this.tokenizer.tokenLength(e),o=NaN){e=this.convertLineEndings(e);let i=this.content.length;return this.content.push({id:i,text:e,kind:n,tokens:r,score:o}),i}fulfillPrefix(e){let n=new rn;n.add(this.basePromptBackground);let r=new on;r.add(this.baseTallyOfChoices);function o(h){n.markUsed(h),r.markUsed(h)}s(o,"markUsed");function i(h){n.undoMarkUsed(h),r.undoMarkUsed(h)}s(i,"undoMarkUsed");function a(h){n.markUnused(h),r.markUnused(h)}s(a,"markUnused"),this.priorityList.sortElements(this.content);let l,u=[],c=e;this.content.forEach(h=>{if(c>0||l===void 0){let p=h.tokens;if(c>=p)c-=p,o(h),u.push(h);else if(h.kind==="BeforeCursor"&&c>0){let{summarizedElement:g,removedMaterial:y}=this.snippetTextProcessor.summarize(this.tokenizer,h,c);h=g,p=h.tokens,c-=p,h.text.length>0&&o(h),y.text.length>0&&a(y),u.push(h)}else l===void 0?l=h:a(h)}else a(h)}),this.orderingList.sortElements(u);let d=u.reduce((h,p)=>h+p.text,""),_=this.tokenizer.tokenLength(d);for(;_>e;){this.priorityList.sortElements(u);let h=u.pop();h&&(i(h),a(h),l!==void 0&&a(l),l=void 0),this.orderingList.sortElements(u),d=u.reduce((p,g)=>p+g.text,""),_=this.tokenizer.tokenLength(d)}let m=[...u];if(l!==void 0){m.push(l),this.orderingList.sortElements(m);let h=m.reduce((g,y)=>g+y.text,""),p=this.tokenizer.tokenLength(h);if(p<=e){o(l);let g=new sn(m);return{prefix:h,suffix:"",prefixLength:p,suffixLength:0,promptChoices:r,promptBackground:n,promptElementRanges:g}}else a(l)}let f=new sn(u);return{prefix:d,suffix:"",prefixLength:_,suffixLength:0,promptChoices:r,promptBackground:n,promptElementRanges:f}}fulfill(e,n,r){if(n.suffixPercent===0||e.length===0)return{promptInfo:this.fulfillPrefix(n.maxPromptLength),newCachedSuffix:r};let o=n.maxPromptLength-ll,i=Math.floor(o*(100-n.suffixPercent)/100),a=o-i,l=e.replace(/^.*/,"").trimStart();if(o>ht&&a<ht)throw new Error(`Suffix budget is smaller than MAX_EDIT_DISTANCE_LENGTH: ${a} < ${ht}
`);let u=this.tokenizer.takeFirstTokens(l,ht),c=!1;u.tokens.length>0&&n.suffixMatchThreshold>0&&100*Li(u.tokens,r.tokens.slice(0,ht))?.score<n.suffixMatchThreshold*u.tokens.length&&(c=!0);let d;if(c)i=o-r.tokens.length,d=r;else{let m=this.maxPrefixTokenLength(),f=this.tokenizer.tokenLength(l);m<i?(i=m,a=o-i):f<a&&(i=o-f,a=f),d=this.tokenizer.takeFirstTokens(l,a)}let _=this.fulfillPrefix(i);return _.suffix=d.text,_.suffixLength=d.tokens.length,{promptInfo:_,newCachedSuffix:d}}}});function cl(t,e){let n=ul[t.semantics],r=["snippets"].includes(t.semantics)?"these":"this",i=(t.relativePath?`Compare ${r} ${n} from ${t.relativePath}:`:`Compare ${r} ${n}:`)+`
`+t.snippet;return i.endsWith(`
`)||(i+=`
`),be(i,e)}function Ni(t){t.sort((e,n)=>n.score-e.score)}function dl(t,e,n){if(e==0)return[];let r=t.map(i=>({...i,kind:tn(i.provider)})),o=[];return n.rankedList.forEach(i=>{let a=r.filter(({kind:l})=>l===i);Ni(a),o.push(...a)}),o.slice(0,e)}function Ii(t,e,n,r,o){let a=dl(t,o,r).map(l=>{let u=cl(l,e),c=n.tokenLength(u);return{announcedSnippet:u,provider:l.provider,score:l.score,tokens:c,relativePath:l.relativePath}}).filter(l=>l.tokens>0);return Ni(a),a.reverse(),a}var Z,ue,ul,ce=E(()=>{"use strict";le();Yt();Z=(a=>(a.SimilarFiles="similar-files",a.Language="language",a.Path="path",a.TooltipSignature="tooltip-signature",a.Trait="trait",a.CodeSnippet="code",a))(Z||{}),ue=(_=>(_.Function="function",_.Snippet="snippet",_.Snippets="snippets",_.Variable="variable",_.Parameter="parameter",_.Method="method",_.Class="class",_.Module="module",_.Alias="alias",_.Enum="enum member",_.Interface="interface",_))(ue||{}),ul={function:"function",snippet:"snippet",snippets:"snippets",variable:"variable",parameter:"parameter",method:"method",class:"class",module:"module",alias:"alias","enum member":"enum member",interface:"interface"};s(cl,"announceSnippet");s(Ni,"sortSnippetsDescending");s(dl,"selectSnippets");s(Ii,"processSnippetsForWishlist")});var we,U,de=E(()=>{"use strict";Mr();we=class extends Error{static{s(this,"ProviderTimeoutError")}constructor(e){super(e),this.name="ProviderTimeoutError"}},U=class{static{s(this,"SnippetProvider")}constructor(e){this.api=e}getSnippets(e,n){return new Promise((r,o)=>{n.aborted&&o(new ye(this.type,new we("provider aborted"))),n.addEventListener("abort",()=>{o(new ye(this.type,new we(`max runtime exceeded: ${kr} ms`)))},{once:!0});let i=performance.now();this.buildSnippets(e).then(a=>{let l=performance.now();r({snippets:a,providerType:this.type,runtime:l-i})}).catch(a=>{o(new ye(this.type,a))})})}}});var ln,Ci=E(()=>{"use strict";le();ce();de();ln=class extends U{constructor(){super(...arguments);this.type="code"}static{s(this,"CodeSnippetProvider")}async buildSnippets(n){if(n.codeSnippets===void 0||n.codeSnippets.length===0)return[];let{codeSnippets:r}=n,o=new Map;for(let a of r){let l=a.relativePath??a.snippet.uri,u=o.get(l);u===void 0&&(u=[],o.set(l,u)),u.push(a)}let i=[];return o.forEach((a,l)=>{let u=a.map(c=>c.snippet.value).join(`
---
`);i.push({provider:this.type,semantics:a.length>1?"snippets":"snippet",snippet:X(u),relativePath:l,startLine:0,endLine:0,score:Math.max(...a.map(c=>c.snippet.importance??0))})}),i}}});var un,Ai=E(()=>{"use strict";le();Ie();ce();de();un=class extends U{constructor(){super(...arguments);this.type="language"}static{s(this,"LanguageSnippetProvider")}async buildSnippets(n){let{currentFile:r}=n;return r.languageId=oe(r.languageId),[{provider:this.type,semantics:"snippet",snippet:X(oi(r)),relativePath:r.relativePath,startLine:0,endLine:0,score:0}]}}});var cn,Fi=E(()=>{"use strict";le();Ie();ce();de();cn=class extends U{constructor(){super(...arguments);this.type="path"}static{s(this,"PathSnippetProvider")}async buildSnippets(n){let{currentFile:r}=n;return r.languageId=oe(r.languageId),[{provider:this.type,semantics:"snippet",snippet:X(ii(r)),relativePath:r.relativePath,startLine:0,endLine:0,score:0}]}}});var dn,Oi=E(()=>{"use strict";an();de();dn=class extends U{constructor(){super(...arguments);this.type="similar-files"}static{s(this,"SimilarFilesProvider")}async buildSnippets(n){let{currentFile:r,similarFiles:o,options:i}=n;return i&&o&&o.length?await this.api.getSimilarSnippets(r,o,i.similarFilesOptions):[]}}});var _n,Ri=E(()=>{"use strict";le();Ie();ce();de();Sr();_n=class extends U{constructor(){super(...arguments);this.type="tooltip-signature"}static{s(this,"TooltipSignatureSnippetProvider")}async buildSnippets(n){let{currentFile:r,tooltipSignature:o}=n,i=[];return r.languageId=oe(r.languageId),o&&yi(r)&&i.push({provider:this.type,semantics:"snippet",snippet:X(bi(o,r.languageId)),relativePath:r.relativePath,startLine:0,endLine:0,score:0}),i}}});var mn,Di=E(()=>{"use strict";le();Ie();ce();de();mn=class extends U{constructor(){super(...arguments);this.type="trait"}static{s(this,"TraitProvider")}async buildSnippets(n){if(n.traits.length===0)return[];let{currentFile:r}=n;return r.languageId=oe(r.languageId),[{provider:this.type,semantics:"snippet",snippet:be(`Consider this related information:
`+n.traits.map(o=>o.kind==="string"?X(o.value):X(`${o.name}: ${o.value}`)).join(""),r.languageId),relativePath:r.relativePath,startLine:0,endLine:0,score:0}]}}});function _l(t){return new Promise(e=>{setTimeout(()=>e(`delay: ${t}`),t)})}var fn,ie,Bi,Ir,pn,Wi=E(()=>{"use strict";Lt();Jt();fn=Je(require("path")),ie=require("worker_threads");s(_l,"sleep");Bi=["getSimilarSnippets","sleep"],Ir=class{constructor(){this.nextHandlerId=0;this.handlers=new Map;this.fns=new Map;this.getSimilarSnippets=fi;this.sleep=_l;!ie.isMainThread&&ie.workerData?.port&&(Hn(),process.cwd=()=>ie.workerData.cwd,this.configureWorkerResponse(ie.workerData.port))}static{s(this,"WorkerProxy")}initWorker(){let{port1:e,port2:n}=new ie.MessageChannel;this.port=e,this.worker=new ie.Worker(fn.default.resolve(fn.default.extname(__filename)!==".ts"?__dirname:fn.default.resolve(__dirname,"../../dist"),"workerProxy.js"),{workerData:{port:n,cwd:process.cwd()},transferList:[n]}),this.port.on("message",r=>this.handleMessage(r)),this.port.on("error",r=>this.handleError(r))}startThreading(){if(this.worker)throw new Error("Worker thread already initialized.");this.proxyFunctions(),this.initWorker()}stopThreading(){this.worker&&(this.worker.terminate(),this.worker.removeAllListeners(),this.worker=void 0,this.unproxyFunctions(),this.handlers.clear())}proxyFunctions(){for(let e of Bi)this.fns.set(e,this[e]),this.proxy(e)}unproxyFunctions(){for(let e of Bi){let n=this.fns.get(e);if(n)this[e]=n;else throw new Error(`Unproxy function not found: ${e}`)}}configureWorkerResponse(e){this.port=e,this.port.on("message",n=>void this.onMessage(n))}async onMessage({id:e,fn:n,args:r}){let o=this[n];if(!o)throw new Error(`Function not found: ${n}`);try{let i=await o.apply(this,r);this.port.postMessage({id:e,res:i})}catch(i){if(!(i instanceof Error))throw i;typeof i.code=="string"?this.port.postMessage({id:e,err:i,code:i.code}):this.port.postMessage({id:e,err:i})}}handleMessage({id:e,err:n,code:r,res:o}){let i=this.handlers.get(e);i&&(this.handlers.delete(e),n?(n.code=r,i.reject(n)):i.resolve(o))}handleError(e){let n;if(e instanceof Error){n=e,n.code==="MODULE_NOT_FOUND"&&n.message?.endsWith("workerProxy.js'")&&(n=new he("Failed to load workerProxy.js"));let r=new Error().stack;n.stack&&r?.match(/^Error\n/)&&(n.stack+=r.replace(/^Error/,""))}else e&&typeof e=="object"&&"name"in e&&e.name==="ExitStatus"&&"status"in e&&typeof e.status=="number"?(n=new Error(`workerProxy.js exited with status ${e.status}`),n.code=`CopilotPromptWorkerExit${e.status}`):n=new Error(`Non-error thrown: ${JSON.stringify(e)}`);for(let r of this.handlers.values())r.reject(n);throw n}proxy(e){this[e]=function(...n){let r=this.nextHandlerId++;return new Promise((o,i)=>{this.handlers.set(r,{resolve:o,reject:i}),this.port?.postMessage({id:r,fn:e,args:n})})}}},pn=new Ir});function Ui(t){return t.status==="fulfilled"}function fl(t){return t.status==="rejected"}function zi(t){return t.filter(Ui).flatMap(e=>e.value.snippets)}function ji(t){return t.filter(fl).flatMap(e=>e.reason)}function Hi(t){let e={},n={};return t.forEach(r=>{Ui(r)?(e[r.value.providerType]=Math.round(r.value.runtime),n[r.value.providerType]=!1):pl(r.reason)&&(n[r.reason.providerType]=!0,e[r.reason.providerType]=0)}),{runtimes:e,timeouts:n}}function pl(t){return t!==null&&typeof t=="object"&&"error"in t&&t.error instanceof we}function hl(t){return Promise.all(t.map(e=>e.then(gl,bl)))}function gl(t){return{status:"fulfilled",value:t}}function bl(t){return{status:"rejected",reason:t}}var kr,ml,ye,hn,Mr=E(()=>{"use strict";Ci();Ai();Fi();Oi();de();Ri();Di();Wi();kr=300,ml=[un,cn,dn,_n,mn,ln],ye=class extends Error{constructor(n,r){super();this.providerType=n;this.error=r}static{s(this,"ProviderError")}};s(Ui,"isFulfilledResult");s(fl,"isRejectedResult");s(zi,"providersSnippets");s(ji,"providersErrors");s(Hi,"providersPerformance");s(pl,"isProviderTimeout");hn=class{constructor(e=ml){this.startThreading=s(()=>pn.startThreading(),"startThreading");this.stopThreading=s(()=>pn.stopThreading(),"stopThreading");this.providers=e.map(n=>new n(pn))}static{s(this,"SnippetOrchestrator")}async getSnippets(e){let n=AbortSignal.timeout(kr),r=this.providers.map(o=>o.getSnippets(e,n));return Promise.allSettled?Promise.allSettled(r):hl(r)}};s(hl,"allSettledBackup");s(gl,"createPromiseFulfilledResult");s(bl,"createPromiseRejectedResult")});function yl(t,e){let n=t.lastIndexOf(`
`,e-1),r=t.indexOf(`
`,e);return r<0&&(r=t.length),t.slice(n+1,r)}function qi(t,e){let n=e;for(;n>0&&/\s/.test(t.charAt(n-1));)n--;return n}function Vi(t,e){let n=t.startIndex,r=t.startIndex-t.startPosition.column,o=e.substring(r,n);if(/^\s*$/.test(o))return o}function wl(t,e,n){if(e.startPosition.row<=t.startPosition.row)return!1;let r=Vi(t,n),o=Vi(e,n);return r!==void 0&&o!==void 0&&r.startsWith(o)}function yn(t){if(!Ze(t))throw new Error(`Language ${t} is not supported`);return vl[ft(t)]}async function El(t,e,n){return Ze(t)?yn(t).isEmptyBlockStart(e,n):!1}async function Sl(t,e,n,r){if(Ze(t))return yn(t).isBlockBodyFinished(e,n,r)}async function Tl(t,e,n){if(Ze(t))return yn(t).getNodeStart(e,n)}var gn,bn,ve,vl,Zi=E(()=>{"use strict";Gt();gn=class{constructor(e,n,r){this.languageId=e;this.nodeMatch=n;this.nodeTypesWithBlockOrStmtChild=r}static{s(this,"BaseBlockParser")}async getNodeMatchAtPosition(e,n,r){let o=await $e(this.languageId,e);try{let a=o.rootNode.descendantForIndex(n);for(;a;){let l=this.nodeMatch[a.type];if(l){if(!this.nodeTypesWithBlockOrStmtChild.has(a.type))break;let u=this.nodeTypesWithBlockOrStmtChild.get(a.type);if((u==""?a.namedChildren[0]:a.childForFieldName(u))?.type==l)break}a=a.parent}return a?r(a):void 0}finally{o.delete()}}getNextBlockAtPosition(e,n,r){return this.getNodeMatchAtPosition(e,n,o=>{let i=o.children.reverse().find(a=>a.type==this.nodeMatch[o.type]);if(i){if(this.languageId=="python"&&i.parent){let a=i.parent.type==":"?i.parent.parent:i.parent,l=a?.nextSibling;for(;l&&l.type=="comment";){let u=l.startPosition.row==i.endPosition.row&&l.startPosition.column>=i.endPosition.column,c=l.startPosition.row>a.endPosition.row&&l.startPosition.column>a.startPosition.column;if(u||c)i=l,l=l.nextSibling;else break}}if(!(i.endIndex>=i.tree.rootNode.endIndex-1&&(i.hasError()||i.parent.hasError())))return r(i)}})}async isBlockBodyFinished(e,n,r){let o=(e+n).trimEnd(),i=await this.getNextBlockAtPosition(o,r,a=>a.endIndex);if(i!==void 0&&i<o.length){let a=i-e.length;return a>0?a:void 0}}getNodeStart(e,n){let r=e.trimEnd();return this.getNodeMatchAtPosition(r,n,o=>o.startIndex)}},bn=class extends gn{constructor(n,r,o,i,a){super(n,i,a);this.blockEmptyMatch=r;this.lineMatch=o}static{s(this,"RegexBasedBlockParser")}isBlockStart(n){return this.lineMatch.test(n.trimStart())}async isBlockBodyEmpty(n,r){let o=await this.getNextBlockAtPosition(n,r,i=>{i.startIndex<r&&(r=i.startIndex);let a=n.substring(r,i.endIndex).trim();return a==""||a.replace(/\s/g,"")==this.blockEmptyMatch});return o===void 0||o}async isEmptyBlockStart(n,r){return r=qi(n,r),this.isBlockStart(yl(n,r))&&this.isBlockBodyEmpty(n,r)}};s(yl,"getLineAtOffset");s(qi,"rewindToNearestNonWs");s(Vi,"indent");s(wl,"outdented");ve=class extends gn{constructor(n,r,o,i,a,l,u){super(n,r,o);this.startKeywords=i;this.blockNodeType=a;this.emptyStatementType=l;this.curlyBraceLanguage=u}static{s(this,"TreeSitterBasedBlockParser")}isBlockEmpty(n,r){let o=n.text.trim();return this.curlyBraceLanguage&&(o.startsWith("{")&&(o=o.slice(1)),o.endsWith("}")&&(o=o.slice(0,-1)),o=o.trim()),!!(o.length==0||this.languageId=="python"&&(n.parent?.type=="class_definition"||n.parent?.type=="function_definition")&&n.children.length==1&&vr(n.parent))}async isEmptyBlockStart(n,r){if(r>n.length)throw new RangeError("Invalid offset");for(let i=r;i<n.length&&n.charAt(i)!=`
`;i++)if(/\S/.test(n.charAt(i)))return!1;r=qi(n,r);let o=await $e(this.languageId,n);try{let i=o.rootNode.descendantForIndex(r-1);if(i==null||this.curlyBraceLanguage&&i.type=="}")return!1;if((this.languageId=="javascript"||this.languageId=="typescript")&&i.parent&&i.parent.type=="object"&&i.parent.text.trim()=="{")return!0;if(this.languageId=="typescript"){let d=i;for(;d.parent;){if(d.type=="function_signature"||d.type=="method_signature"){let _=i.nextSibling;return _&&d.hasError()&&wl(d,_,n)?!0:!d.children.find(f=>f.type==";")&&d.endIndex<=r}d=d.parent}}let a=null,l=null,u=null,c=i;for(;c!=null;){if(c.type==this.blockNodeType){l=c;break}if(this.nodeMatch[c.type]){u=c;break}if(c.type=="ERROR"){a=c;break}c=c.parent}if(l!=null){if(!l.parent||!this.nodeMatch[l.parent.type])return!1;if(this.languageId=="python"){let d=l.previousSibling;if(d!=null&&d.hasError()&&(d.text.startsWith('"""')||d.text.startsWith("'''")))return!0}return this.isBlockEmpty(l,r)}if(a!=null){if(a.previousSibling?.type=="module"||a.previousSibling?.type=="internal_module"||a.previousSibling?.type=="def")return!0;let d=[...a.children].reverse(),_=d.find(f=>this.startKeywords.includes(f.type)),m=d.find(f=>f.type==this.blockNodeType);if(_){switch(this.languageId){case"python":{_.type=="try"&&i.type=="identifier"&&i.text.length>4&&(m=d.find(p=>p.hasError())?.children.find(p=>p.type=="block"));let f,h=0;for(let p of a.children){if(p.type==":"&&h==0){f=p;break}p.type=="("&&(h+=1),p.type==")"&&(h-=1)}if(f&&_.endIndex<=f.startIndex&&f.nextSibling){if(_.type=="def"){let p=f.nextSibling;if(p.type=='"'||p.type=="'"||p.type=="ERROR"&&(p.text=='"""'||p.text=="'''"))return!0}return!1}break}case"javascript":{let f=d.find(g=>g.type=="formal_parameters");if(_.type=="class"&&f)return!0;let h=d.find(g=>g.type=="{");if(h&&h.startIndex>_.endIndex&&h.nextSibling!=null||d.find(g=>g.type=="do")&&_.type=="while"||_.type=="=>"&&_.nextSibling&&_.nextSibling.type!="{")return!1;break}case"typescript":{let f=d.find(p=>p.type=="{");if(f&&f.startIndex>_.endIndex&&f.nextSibling!=null||d.find(p=>p.type=="do")&&_.type=="while"||_.type=="=>"&&_.nextSibling&&_.nextSibling.type!="{")return!1;break}}return m&&m.startIndex>_.endIndex?this.isBlockEmpty(m,r):!0}}if(u!=null){let d=this.nodeMatch[u.type],_=u.children.slice().reverse().find(m=>m.type==d);if(_)return this.isBlockEmpty(_,r);if(this.nodeTypesWithBlockOrStmtChild.has(u.type)){let m=this.nodeTypesWithBlockOrStmtChild.get(u.type),f=m==""?u.children[0]:u.childForFieldName(m);if(f&&f.type!=this.blockNodeType&&f.type!=this.emptyStatementType)return!1}return!0}return!1}finally{o.delete()}}},vl={python:new ve("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new ve("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new ve("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new ve("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new bn("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new bn("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),c_sharp:new ve("csharp",{},new Map([]),[],"block",null,!0),java:new ve("java",{},new Map([]),[],"block",null,!0)};s(yn,"getBlockParser");s(El,"isEmptyBlockStart");s(Sl,"isBlockBodyFinished");s(Tl,"getNodeStart")});var Gi={};ns(Gi,{DEFAULT_MAX_COMPLETION_LENGTH:()=>vi,DEFAULT_MAX_PROMPT_LENGTH:()=>Ei,DEFAULT_NUM_SNIPPETS:()=>Si,DEFAULT_SUFFIX_MATCH_THRESHOLD:()=>xi,DEFAULT_SUFFIX_PERCENT:()=>il,DEFAULT_TREE_TRAVERSAL_CONFIG:()=>To,ElidableText:()=>lt,LineEndingOptions:()=>xr,LineWithValueAndCost:()=>Ve,MAX_TOOLTIP_SIGNATURE_TOKENS:()=>Ti,PromptOptions:()=>Qt,ProviderError:()=>ye,ProviderTimeoutError:()=>we,SnippetOrchestrator:()=>hn,SnippetProviderType:()=>Z,SnippetSemantics:()=>ue,SuffixMatchOption:()=>Mi,SuffixOption:()=>ki,TTokenizer:()=>Rt,TokenizerName:()=>Dt,WASMLanguage:()=>ci,blankNode:()=>xt,buildLabelRules:()=>We,clearLabels:()=>co,clearLabelsIf:()=>qn,combineClosersAndOpeners:()=>kt,comment:()=>mt,commentBlockAsSingles:()=>be,createWorker:()=>xl,cutTreeAfterLine:()=>Hs,deparseAndCutTree:()=>Qs,deparseLine:()=>st,deparseTree:()=>bo,describeTree:()=>yo,duplicateTree:()=>Vs,elidableTextForDiff:()=>Aa,elidableTextForSourceCode:()=>Gn,encodeTree:()=>wo,firstLineOf:()=>vo,flattenVirtual:()=>te,foldTree:()=>rt,fromTreeWithFocussedLines:()=>ze,fromTreeWithValuedLines:()=>xo,getBlockCloseToken:()=>qa,getBlockParser:()=>yn,getCursorContext:()=>Me,getLanguage:()=>di,getNodeStart:()=>Tl,getPrompt:()=>al,getTokenizer:()=>K,groupBlocks:()=>Zn,isBlank:()=>x,isBlockBodyFinished:()=>Sl,isEmptyBlockStart:()=>El,isLine:()=>G,isSupportedLanguageId:()=>Ze,isTop:()=>fe,isVirtual:()=>j,labelLines:()=>Be,labelVirtualInherited:()=>it,languageIdToWasmLanguage:()=>ft,languageMarkers:()=>_t,lastLineOf:()=>Eo,lineNode:()=>Vn,mapLabels:()=>ee,normalizeLanguageId:()=>oe,parseRaw:()=>_o,parseTree:()=>pe,parseTreeSitter:()=>$e,providersErrors:()=>ji,providersPerformance:()=>Hi,providersSnippets:()=>zi,queryPythonIsDocstring:()=>vr,rebuildTree:()=>ot,registerLanguageSpecificParser:()=>Mt,resetLineNumbers:()=>qs,resetSuffixCache:()=>ol,topNode:()=>nt,virtualNode:()=>Tt,visitTree:()=>M,visitTreeConditionally:()=>Zs});function xl(t,e){return new $i.Worker(wn.default.resolve(wn.default.extname(__filename)!==".ts"?__dirname:wn.default.resolve(__dirname,"../../dist"),t),{workerData:e})}var wn,$i,an=E(()=>{"use strict";wn=Je(require("path")),$i=require("worker_threads");ti();at();le();Mr();Gt();Zi();Ie();jt();Ht();Jt();ce();de();He();s(xl,"createWorker")});Hn();var Ki=(an(),rs(Gi)),{parentPort:gt,workerData:Ji}=require("worker_threads");Ji?.cwd&&(process.cwd=()=>Ji.cwd);gt.on("message",async({id:t,fn:e,args:n})=>{try{if(e==="getPrompt"){let r=await Ki.getPrompt(...n);gt.postMessage({id:t,res:r})}else{let r=await Ki[e](...n);gt.postMessage({id:t,res:r})}}catch(r){if(!(r instanceof Error))throw r;typeof r.code=="string"?gt.postMessage({id:t,err:r,code:r.code}):gt.postMessage({id:t,err:r})}});
//# sourceMappingURL=worker.js.map
